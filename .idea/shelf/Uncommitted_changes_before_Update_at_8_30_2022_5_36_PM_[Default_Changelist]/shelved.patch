Index: app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailTutupJalanActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.jatmika.admin_e_complaintrangkasbitung;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.view.animation.Animation;\r\nimport android.view.animation.AnimationUtils;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.ScrollView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.AuthFailureError;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.JsonObjectRequest;\r\nimport com.bumptech.glide.Glide;\r\nimport com.google.android.flexbox.FlexboxLayoutManager;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomentar;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterProses;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Komentar;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.MySingleton;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Proses;\r\nimport com.uncopt.android.widget.text.justify.JustifiedTextView;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport static android.text.TextUtils.isEmpty;\r\n\r\npublic class DetailTutupJalanActivity extends AppCompatActivity {\r\n\r\n    final private String serverKey = \"key=\" + \"AIzaSyDL3TGOXPGwfM7iIf_pX4zqD3IbTr-I45w\";\r\n    final private String contentType = \"application/json\";\r\n    final String TAG = \"NOTIFICATION TAG\";\r\n\r\n    String FCM_API = \"https://fcm.googleapis.com/fcm/send\";\r\n    String NOTIFICATION_TITLE;\r\n    String NOTIFICATION_MESSAGE;\r\n    String TOPIC;\r\n    String Penerima;\r\n    String prosesStatus;\r\n\r\n    TextView nomorDetailTextView, namaDetailTextView, emailDetailTextView, alamatDetailTextView,\r\n            tanggalDetailTextView, tvBalas, tvJudul, statusDetailtextView;\r\n    JustifiedTextView isiDetailTextView;\r\n    ImageView fotoDetailImageView;\r\n    Button btnTambahKomentar;\r\n    LinearLayout linear2, layout_kerangka;\r\n    RelativeLayout relative1, btnBack;\r\n    FloatingActionButton fab;\r\n    Animation fromright;\r\n\r\n    RecyclerView mRecyclerView;\r\n    private RecyclerAdapterKomentar mAdapter;\r\n    private StorageReference mStorageRef;\r\n    FirebaseStorage mStorage;\r\n    DatabaseReference mDatabaseRef, databaseReference;\r\n    private List<Komentar> mKomentar;\r\n    ValueEventListener mDBListener;\r\n\r\n    FirebaseAuth mAuth;\r\n    FirebaseUser firebaseUser;\r\n\r\n    int satuan;\r\n\r\n    private void initializeWidgets(){\r\n        nomorDetailTextView = findViewById(R.id.nomorTextView);\r\n        namaDetailTextView = findViewById(R.id.namaTextView);\r\n        emailDetailTextView = findViewById(R.id.emailTextView);\r\n        alamatDetailTextView = findViewById(R.id.alamatTextView);\r\n        tanggalDetailTextView = findViewById(R.id.tanggalTextView);\r\n        isiDetailTextView = findViewById(R.id.isiTextView);\r\n        statusDetailtextView = findViewById(R.id.statusTextView);\r\n        fotoDetailImageView = findViewById(R.id.fotoDetailImageView);\r\n        relative1 = findViewById(R.id.relative1);\r\n        btnTambahKomentar = findViewById(R.id.btnTambahKomentar);\r\n        linear2 = findViewById(R.id.linear2);\r\n        layout_kerangka = findViewById(R.id.layout_kerangka);\r\n        tvBalas = findViewById(R.id.tvBalas);\r\n        fab = findViewById(R.id.fab);\r\n        tvJudul = findViewById(R.id.tvJudul);\r\n        btnBack = findViewById(R.id.btnBack);\r\n    }\r\n\r\n    String image, berkas, nomor, nik, email, nama, alamat, tanggal, namalokasi, latitude, longitude, isi, kategori, status,\r\n            jml_lihat, jml_suka, jml_balas, getKey;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.app_bar_detail_tutup_jalan);\r\n\r\n        Intent i = this.getIntent();\r\n        image = i.getExtras().getString(\"IMAGE_KEY\");\r\n        berkas = i.getExtras().getString(\"BERKAS_KEY\");\r\n        nomor = i.getExtras().getString(\"NOMOR_KEY\");\r\n        nik = i.getExtras().getString(\"NIK_KEY\");\r\n        email = i.getExtras().getString(\"EMAIL_KEY\");\r\n        nama = i.getExtras().getString(\"NAMA_KEY\");\r\n        alamat = i.getExtras().getString(\"ALAMAT_KEY\");\r\n        tanggal = i.getExtras().getString(\"TANGGAL_KEY\");\r\n        namalokasi = i.getExtras().getString(\"NAMALOKASI_KEY\");\r\n        latitude = i.getExtras().getString(\"LATITUDE_KEY\");\r\n        longitude = i.getExtras().getString(\"LONGITUDE_KEY\");\r\n        isi = i.getExtras().getString(\"ISI_KEY\");\r\n        kategori = i.getExtras().getString(\"KATEGORI_KEY\");\r\n        status = i.getExtras().getString(\"STATUS_KEY\");\r\n        jml_lihat = i.getExtras().getString(\"JML_LIHAT_KEY\");\r\n        jml_suka = i.getExtras().getString(\"JML_SUKA_KEY\");\r\n        jml_balas = i.getExtras().getString(\"JML_BALAS_KEY\");\r\n        getKey = i.getExtras().getString(\"GETPRIMARY_KEY\");\r\n\r\n        initializeWidgets();\r\n        displayKomentar();\r\n\r\n        Toolbar toolbar = findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        firebaseUser = mAuth.getCurrentUser();\r\n\r\n        fromright = AnimationUtils.loadAnimation(this, R.anim.fromright);\r\n        tvJudul.startAnimation(fromright);\r\n        linear2.setVisibility(View.GONE);\r\n\r\n        nomorDetailTextView.setText(nomor);\r\n        emailDetailTextView.setText(email);\r\n        namaDetailTextView.setText(nama);\r\n        alamatDetailTextView.setText(alamat);\r\n        tanggalDetailTextView.setText(tanggal);\r\n        isiDetailTextView.setText(\"''\"+isi+\"''\");\r\n        statusDetailtextView.setText(status);\r\n        Glide.with(this)\r\n                .load(image)\r\n                .into(fotoDetailImageView);\r\n\r\n        fotoDetailImageView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailTutupJalanActivity.this);\r\n                View mView = getLayoutInflater().inflate(R.layout.show_image, null);\r\n                ImageView imageView = mView.findViewById(R.id.imageView);\r\n                TextView btnClose = mView.findViewById(R.id.btnClose);\r\n\r\n                Glide.with(DetailTutupJalanActivity.this)\r\n                        .load(image)\r\n                        .into(imageView);\r\n\r\n                mBuilder.setView(mView);\r\n                final AlertDialog mDialog = mBuilder.create();\r\n                mDialog.show();\r\n\r\n                btnClose.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        mDialog.dismiss();\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        satuan = 1;\r\n        int jml_lihatlama = Integer.parseInt(jml_lihat);\r\n        final int total = satuan + jml_lihatlama;\r\n        FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_lihat\").setValue(String.valueOf(total));\r\n\r\n        relative1.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if (status.equals(\"Menunggu Diproses\")){\r\n                    AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailTutupJalanActivity.this);\r\n                    View mView = getLayoutInflater().inflate(R.layout.show_menunggu, null);\r\n                    TextView btnClose = mView.findViewById(R.id.btnClose);\r\n                    TextView tvNomor = mView.findViewById(R.id.tvNomor);\r\n                    RelativeLayout relative1 = mView.findViewById(R.id.relative1);\r\n\r\n                    mBuilder.setView(mView);\r\n                    final AlertDialog mDialog = mBuilder.create();\r\n                    mDialog.show();\r\n\r\n                    tvNomor.setText(\"No : \"+nomor);\r\n                    btnClose.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n                        }\r\n                    });\r\n\r\n                    relative1.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n\r\n                            CharSequence[] item = {\"Dalam Proses\", \"Selesai\"};\r\n                            AlertDialog.Builder request = new AlertDialog.Builder(DetailTutupJalanActivity.this)\r\n                                    .setTitle(\"Pilih Status Komplain\")\r\n                                    .setItems(item, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialog, int i) {\r\n                                            switch (i){\r\n                                                case 0:\r\n                                                    prosesStatus = \"Dalam Proses\";\r\n                                                    Intent intent = new Intent(DetailTutupJalanActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle = new Bundle();\r\n                                                    bundle.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle.putString(\"status\", status);\r\n                                                    bundle.putString(\"getKey\", getKey);\r\n                                                    intent.putExtras(bundle);\r\n                                                    startActivity(intent);\r\n                                                    break;\r\n                                                case 1:\r\n                                                    prosesStatus = \"Selesai\";\r\n                                                    Intent intent2 = new Intent(DetailTutupJalanActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle2 = new Bundle();\r\n                                                    bundle2.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle2.putString(\"status\", status);\r\n                                                    bundle2.putString(\"getKey\", getKey);\r\n                                                    intent2.putExtras(bundle2);\r\n                                                    startActivity(intent2);\r\n                                                    break;\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            request.create();\r\n                            request.show();\r\n                        }\r\n                    });\r\n\r\n                } else {\r\n                    AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailTutupJalanActivity.this);\r\n                    View mView = getLayoutInflater().inflate(R.layout.show_proses, null);\r\n\r\n                    TextView btnClose = mView.findViewById(R.id.btnClose);\r\n                    TextView tvNomor = mView.findViewById(R.id.tvNomor);\r\n                    TextView tvStatus = mView.findViewById(R.id.tvStatus);\r\n                    RelativeLayout relative2 = mView.findViewById(R.id.relative1);\r\n                    RecyclerView mRecyclerView = mView.findViewById(R.id.mRecyclerView);\r\n                    final RecyclerAdapterProses mAdapter;\r\n                    DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"status_komplain\");\r\n                    final List<Proses> mProsess;\r\n\r\n                    mBuilder.setView(mView);\r\n                    final AlertDialog mDialog = mBuilder.create();\r\n                    mDialog.show();\r\n\r\n                    mRecyclerView.setHasFixedSize(true);\r\n                    mRecyclerView.setLayoutManager(new LinearLayoutManager(DetailTutupJalanActivity.this));\r\n\r\n                    mProsess = new ArrayList<>();\r\n                    mAdapter = new RecyclerAdapterProses(DetailTutupJalanActivity.this, mProsess);\r\n                    mRecyclerView.setAdapter(mAdapter);\r\n\r\n                    mDBListener = databaseReference.addValueEventListener(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                            mProsess.clear();\r\n                            for (DataSnapshot kandidatSnapshot : dataSnapshot.getChildren()) {\r\n                                Proses upload = kandidatSnapshot.getValue(Proses.class);\r\n                                upload.setKey(kandidatSnapshot.getKey());\r\n                                mProsess.add(upload);\r\n                            }\r\n                            mAdapter.notifyDataSetChanged();\r\n                        }\r\n\r\n                        @Override\r\n                        public void onCancelled(DatabaseError databaseError) {\r\n                            Toast.makeText(DetailTutupJalanActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n\r\n                    tvStatus.setText(status);\r\n                    tvNomor.setText(\"No : \"+nomor);\r\n                    btnClose.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n                        }\r\n                    });\r\n\r\n                    relative2.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n\r\n                            CharSequence[] item = {\"Dalam Proses\", \"Selesai\"};\r\n                            AlertDialog.Builder request = new AlertDialog.Builder(DetailTutupJalanActivity.this)\r\n                                    .setTitle(\"Pilih Status Komplain\")\r\n                                    .setItems(item, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialog, int i) {\r\n                                            switch (i){\r\n                                                case 0:\r\n                                                    prosesStatus = \"Dalam Proses\";\r\n                                                    Intent intent = new Intent(DetailTutupJalanActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle = new Bundle();\r\n                                                    bundle.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle.putString(\"status\", status);\r\n                                                    bundle.putString(\"getKey\", getKey);\r\n                                                    intent.putExtras(bundle);\r\n                                                    startActivity(intent);\r\n                                                    break;\r\n                                                case 1:\r\n                                                    prosesStatus = \"Selesai\";\r\n                                                    Intent intent2 = new Intent(DetailTutupJalanActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle2 = new Bundle();\r\n                                                    bundle2.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle2.putString(\"status\", status);\r\n                                                    bundle2.putString(\"getKey\", getKey);\r\n                                                    intent2.putExtras(bundle2);\r\n                                                    startActivity(intent2);\r\n                                                    break;\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            request.create();\r\n                            request.show();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        btnTambahKomentar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                final ScrollView scrollView = findViewById(R.id.scrollView);\r\n                btnTambahKomentar.setVisibility(View.GONE);\r\n                scrollView.postDelayed(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                        scrollView.isSmoothScrollingEnabled(); }\r\n                }, 200);\r\n                linear2.setVisibility(View.VISIBLE);\r\n            }\r\n        });\r\n\r\n        fab.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                final EditText input = findViewById(R.id.input);\r\n                final ScrollView scrollView = findViewById(R.id.scrollView);\r\n\r\n                AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailTutupJalanActivity.this);\r\n                View mView = getLayoutInflater().inflate(R.layout.show_loading, null);\r\n\r\n                mBuilder.setView(mView);\r\n                mBuilder.setCancelable(false);\r\n                final AlertDialog mDialog = mBuilder.create();\r\n                mDialog.show();\r\n\r\n                if (isEmpty(input.getText().toString())) {\r\n                    Toast.makeText(DetailTutupJalanActivity.this, \"Balasan tidak boleh kosong!\",\r\n                            Toast.LENGTH_SHORT).show();\r\n                    mDialog.dismiss();\r\n\r\n                } else {\r\n                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey)\r\n                            .child(\"balasan\").push().setValue(new Komentar(input.getText().toString(),\r\n                            namaDetailTextView.getText().toString(), firebaseUser.getEmail())).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) { FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"balasan\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                if (dataSnapshot.exists()) {\r\n                                    long totalBalas;\r\n                                    totalBalas = (dataSnapshot.getChildrenCount());\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_balas\").setValue(String.valueOf(totalBalas))\r\n                                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                @Override\r\n                                                public void onSuccess(Void aVoid) {\r\n                                                    Penerima = emailDetailTextView.getText().toString();\r\n                                                    Penerima = Penerima.replaceAll(\"[@.-]\", \"\");\r\n\r\n                                                    TOPIC = \"/topics/\"+Penerima;\r\n                                                    NOTIFICATION_TITLE = \"Balasan Komplain Dari Admin\";\r\n                                                    NOTIFICATION_MESSAGE = input.getText().toString();\r\n\r\n                                                    JSONObject notification = new JSONObject();\r\n                                                    JSONObject notifcationBody = new JSONObject();\r\n                                                    try {\r\n                                                        notifcationBody.put(\"title\", NOTIFICATION_TITLE);\r\n                                                        notifcationBody.put(\"message\", NOTIFICATION_MESSAGE);\r\n\r\n                                                        notification.put(\"to\", TOPIC);\r\n                                                        notification.put(\"data\", notifcationBody);\r\n                                                    } catch (JSONException e) {\r\n                                                        Log.e(TAG, \"onCreate: \" + e.getMessage() );\r\n                                                    }\r\n                                                    sendNotification(notification);\r\n\r\n                                                    linear2.setVisibility(View.GONE);\r\n                                                    input.setText(\"\");\r\n                                                    btnTambahKomentar.setVisibility(View.VISIBLE);\r\n                                                    mDialog.dismiss();\r\n\r\n                                                    scrollView.postDelayed(new Runnable() {\r\n                                                        @Override\r\n                                                        public void run() {\r\n                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                                                            scrollView.isSmoothScrollingEnabled();\r\n                                                        }\r\n                                                    }, 200);\r\n                                                }\r\n                                            });\r\n                                } else {\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_balas\").setValue(\"0\")\r\n                                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                @Override\r\n                                                public void onSuccess(Void aVoid) {\r\n                                                    Penerima = emailDetailTextView.getText().toString();\r\n                                                    Penerima = Penerima.replaceAll(\"[@.-]\", \"\");\r\n\r\n                                                    TOPIC = \"/topics/\"+Penerima;\r\n                                                    NOTIFICATION_TITLE = \"Balasan Komplain Dari Admin\";\r\n                                                    NOTIFICATION_MESSAGE = input.getText().toString();\r\n\r\n                                                    JSONObject notification = new JSONObject();\r\n                                                    JSONObject notifcationBody = new JSONObject();\r\n                                                    try {\r\n                                                        notifcationBody.put(\"title\", NOTIFICATION_TITLE);\r\n                                                        notifcationBody.put(\"message\", NOTIFICATION_MESSAGE);\r\n\r\n                                                        notification.put(\"to\", TOPIC);\r\n                                                        notification.put(\"data\", notifcationBody);\r\n                                                    } catch (JSONException e) {\r\n                                                        Log.e(TAG, \"onCreate: \" + e.getMessage() );\r\n                                                    }\r\n                                                    sendNotification(notification);\r\n\r\n                                                    linear2.setVisibility(View.GONE);\r\n                                                    input.setText(\"\");\r\n                                                    btnTambahKomentar.setVisibility(View.VISIBLE);\r\n                                                    mDialog.dismiss();\r\n\r\n                                                    scrollView.postDelayed(new Runnable() {\r\n                                                        @Override\r\n                                                        public void run() {\r\n                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                                                            scrollView.isSmoothScrollingEnabled();\r\n                                                        }\r\n                                                    }, 200);\r\n                                                }\r\n                                            });\r\n                                }\r\n                            }\r\n                            @Override\r\n                            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                            }\r\n                        });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        btnBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void sendNotification(JSONObject notification) {\r\n        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(FCM_API, notification,\r\n                new Response.Listener<JSONObject>() {\r\n                    @Override\r\n                    public void onResponse(JSONObject response) {\r\n                        Log.i(TAG, \"onResponse: \" + response.toString());\r\n                    }\r\n                },\r\n                new Response.ErrorListener() {\r\n                    @Override\r\n                    public void onErrorResponse(VolleyError error) {\r\n                        Toast.makeText(DetailTutupJalanActivity.this, \"Request error!\", Toast.LENGTH_LONG).show();\r\n                        Log.i(TAG, \"onErrorResponse: Didn't work\");\r\n                    }\r\n                }){\r\n            @Override\r\n            public Map<String, String> getHeaders() throws AuthFailureError {\r\n                Map<String, String> params = new HashMap<>();\r\n                params.put(\"Authorization\", serverKey);\r\n                params.put(\"Content-Type\", contentType);\r\n                return params;\r\n            }\r\n        };\r\n        MySingleton.getInstance(getApplicationContext()).addToRequestQueue(jsonObjectRequest);\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        finish();\r\n    }\r\n\r\n    private void displayKomentar() {\r\n        mRecyclerView = findViewById(R.id.list_of_komentar);\r\n        RecyclerView.LayoutManager layoutManager = new FlexboxLayoutManager(this);\r\n        mRecyclerView.setLayoutManager(layoutManager);\r\n\r\n        mKomentar = new ArrayList<>();\r\n        mAdapter = new RecyclerAdapterKomentar (DetailTutupJalanActivity.this, mKomentar);\r\n        mRecyclerView.setAdapter(mAdapter);\r\n\r\n        mStorage = FirebaseStorage.getInstance();\r\n        mStorageRef = FirebaseStorage.getInstance().getReference(\"foto_komentar\");\r\n        mDatabaseRef = FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"balasan\");\r\n        mDBListener = mDatabaseRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                if (dataSnapshot.exists()) {\r\n                    mKomentar.clear();\r\n\r\n                    for (DataSnapshot komentarSnapshot : dataSnapshot.getChildren()) {\r\n                        Komentar upload = komentarSnapshot.getValue(Komentar.class);\r\n                        upload.setKey(komentarSnapshot.getKey());\r\n                        mKomentar.add(upload);\r\n                    }\r\n                    mAdapter.notifyDataSetChanged();\r\n                    tvBalas.setText(\"Balasan Komplain\");\r\n                    layout_kerangka.setVisibility(View.VISIBLE);\r\n\r\n                } else{\r\n                    tvBalas.setText(\"Belum Ada Balasan\");\r\n                    layout_kerangka.setVisibility(View.VISIBLE);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError databaseError) {\r\n                Toast.makeText(DetailTutupJalanActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailTutupJalanActivity.java b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailTutupJalanActivity.java
--- a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailTutupJalanActivity.java	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailTutupJalanActivity.java	(date 1661855557477)
@@ -40,11 +40,14 @@
 import com.google.firebase.database.ValueEventListener;
 import com.google.firebase.storage.FirebaseStorage;
 import com.google.firebase.storage.StorageReference;
+import com.jatmika.admin_e_complaintrangkasbitung.API.API;
+import com.jatmika.admin_e_complaintrangkasbitung.API.APIUtility;
 import com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomentar;
 import com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterProses;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.Komentar;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.MySingleton;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.Proses;
+import com.jatmika.admin_e_complaintrangkasbitung.SharePref.SharePref;
 import com.uncopt.android.widget.text.justify.JustifiedTextView;
 
 import org.json.JSONException;
@@ -54,6 +57,8 @@
 import java.util.HashMap;
 import java.util.List;
 import java.util.Map;
+import retrofit2.Call;
+import retrofit2.Callback;
 
 import static android.text.TextUtils.isEmpty;
 
@@ -90,6 +95,8 @@
 
     FirebaseAuth mAuth;
     FirebaseUser firebaseUser;
+    private API apiService;
+    private SharePref sharePref;
 
     int satuan;
 
@@ -140,6 +147,9 @@
         jml_balas = i.getExtras().getString("JML_BALAS_KEY");
         getKey = i.getExtras().getString("GETPRIMARY_KEY");
 
+        apiService = APIUtility.getAPI();
+        sharePref = new SharePref(this);
+
         initializeWidgets();
         displayKomentar();
 
@@ -190,9 +200,9 @@
         });
 
         satuan = 1;
-        int jml_lihatlama = Integer.parseInt(jml_lihat);
+        int jml_lihatlama = 0;
         final int total = satuan + jml_lihatlama;
-        FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_lihat").setValue(String.valueOf(total));
+//        FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_lihat").setValue(String.valueOf(total));
 
         relative1.setOnClickListener(new View.OnClickListener() {
             @Override
@@ -280,25 +290,6 @@
                     mAdapter = new RecyclerAdapterProses(DetailTutupJalanActivity.this, mProsess);
                     mRecyclerView.setAdapter(mAdapter);
 
-                    mDBListener = databaseReference.addValueEventListener(new ValueEventListener() {
-                        @Override
-                        public void onDataChange(DataSnapshot dataSnapshot) {
-
-                            mProsess.clear();
-                            for (DataSnapshot kandidatSnapshot : dataSnapshot.getChildren()) {
-                                Proses upload = kandidatSnapshot.getValue(Proses.class);
-                                upload.setKey(kandidatSnapshot.getKey());
-                                mProsess.add(upload);
-                            }
-                            mAdapter.notifyDataSetChanged();
-                        }
-
-                        @Override
-                        public void onCancelled(DatabaseError databaseError) {
-                            Toast.makeText(DetailTutupJalanActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();
-                        }
-                    });
-
                     tvStatus.setText(status);
                     tvNomor.setText("No : "+nomor);
                     btnClose.setOnClickListener(new View.OnClickListener() {
@@ -386,100 +377,28 @@
                     mDialog.dismiss();
 
                 } else {
-                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey)
-                            .child("balasan").push().setValue(new Komentar(input.getText().toString(),
-                            namaDetailTextView.getText().toString(), firebaseUser.getEmail())).addOnSuccessListener(new OnSuccessListener<Void>() {
+                    apiService.addComentar("Bearer "+sharePref.getTokenApi(), getKey, input.getText().toString()).enqueue(new Callback<Komentar>() {
                         @Override
-                        public void onSuccess(Void aVoid) { FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("balasan").addListenerForSingleValueEvent(new ValueEventListener() {
-                            @Override
-                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
-                                if (dataSnapshot.exists()) {
-                                    long totalBalas;
-                                    totalBalas = (dataSnapshot.getChildrenCount());
-                                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_balas").setValue(String.valueOf(totalBalas))
-                                            .addOnSuccessListener(new OnSuccessListener<Void>() {
-                                                @Override
-                                                public void onSuccess(Void aVoid) {
-                                                    Penerima = emailDetailTextView.getText().toString();
-                                                    Penerima = Penerima.replaceAll("[@.-]", "");
-
-                                                    TOPIC = "/topics/"+Penerima;
-                                                    NOTIFICATION_TITLE = "Balasan Komplain Dari Admin";
-                                                    NOTIFICATION_MESSAGE = input.getText().toString();
-
-                                                    JSONObject notification = new JSONObject();
-                                                    JSONObject notifcationBody = new JSONObject();
-                                                    try {
-                                                        notifcationBody.put("title", NOTIFICATION_TITLE);
-                                                        notifcationBody.put("message", NOTIFICATION_MESSAGE);
-
-                                                        notification.put("to", TOPIC);
-                                                        notification.put("data", notifcationBody);
-                                                    } catch (JSONException e) {
-                                                        Log.e(TAG, "onCreate: " + e.getMessage() );
-                                                    }
-                                                    sendNotification(notification);
-
-                                                    linear2.setVisibility(View.GONE);
-                                                    input.setText("");
-                                                    btnTambahKomentar.setVisibility(View.VISIBLE);
-                                                    mDialog.dismiss();
-
-                                                    scrollView.postDelayed(new Runnable() {
-                                                        @Override
-                                                        public void run() {
-                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);
-                                                            scrollView.isSmoothScrollingEnabled();
-                                                        }
-                                                    }, 200);
-                                                }
-                                            });
-                                } else {
-                                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_balas").setValue("0")
-                                            .addOnSuccessListener(new OnSuccessListener<Void>() {
-                                                @Override
-                                                public void onSuccess(Void aVoid) {
-                                                    Penerima = emailDetailTextView.getText().toString();
-                                                    Penerima = Penerima.replaceAll("[@.-]", "");
-
-                                                    TOPIC = "/topics/"+Penerima;
-                                                    NOTIFICATION_TITLE = "Balasan Komplain Dari Admin";
-                                                    NOTIFICATION_MESSAGE = input.getText().toString();
-
-                                                    JSONObject notification = new JSONObject();
-                                                    JSONObject notifcationBody = new JSONObject();
-                                                    try {
-                                                        notifcationBody.put("title", NOTIFICATION_TITLE);
-                                                        notifcationBody.put("message", NOTIFICATION_MESSAGE);
-
-                                                        notification.put("to", TOPIC);
-                                                        notification.put("data", notifcationBody);
-                                                    } catch (JSONException e) {
-                                                        Log.e(TAG, "onCreate: " + e.getMessage() );
-                                                    }
-                                                    sendNotification(notification);
-
-                                                    linear2.setVisibility(View.GONE);
-                                                    input.setText("");
-                                                    btnTambahKomentar.setVisibility(View.VISIBLE);
-                                                    mDialog.dismiss();
+                        public void onResponse(Call<Komentar> call, retrofit2.Response<Komentar> response) {
+                            Log.i("responseAPI", response.body().toString());
+                            linear2.setVisibility(View.GONE);
+                            input.setText("");
+                            btnTambahKomentar.setVisibility(View.VISIBLE);
+                            mDialog.dismiss();
 
-                                                    scrollView.postDelayed(new Runnable() {
-                                                        @Override
-                                                        public void run() {
-                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);
-                                                            scrollView.isSmoothScrollingEnabled();
-                                                        }
-                                                    }, 200);
-                                                }
-                                            });
-                                }
-                            }
-                            @Override
-                            public void onCancelled(@NonNull DatabaseError databaseError) {
-
-                            }
-                        });
+                            scrollView.postDelayed(new Runnable() {
+                                @Override
+                                public void run() {
+                                    scrollView.fullScroll(ScrollView.FOCUS_DOWN);
+                                    scrollView.isSmoothScrollingEnabled();
+                                }
+                            }, 200);
+                            displayKomentar();
+                        }
+
+                        @Override
+                        public void onFailure(Call<Komentar> call, Throwable t) {
+                            Log.i("responseAPI", t.toString());
                         }
                     });
                 }
@@ -534,20 +453,14 @@
         mAdapter = new RecyclerAdapterKomentar (DetailTutupJalanActivity.this, mKomentar);
         mRecyclerView.setAdapter(mAdapter);
 
-        mStorage = FirebaseStorage.getInstance();
-        mStorageRef = FirebaseStorage.getInstance().getReference("foto_komentar");
-        mDatabaseRef = FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("balasan");
-        mDBListener = mDatabaseRef.addValueEventListener(new ValueEventListener() {
+        Log.i("keyKomplain", getKey);
+        apiService.getComentar("Bearer "+sharePref.getTokenApi(), getKey).enqueue(new Callback<List<Komentar>>() {
             @Override
-            public void onDataChange(DataSnapshot dataSnapshot) {
-
-                if (dataSnapshot.exists()) {
-                    mKomentar.clear();
-
-                    for (DataSnapshot komentarSnapshot : dataSnapshot.getChildren()) {
-                        Komentar upload = komentarSnapshot.getValue(Komentar.class);
-                        upload.setKey(komentarSnapshot.getKey());
-                        mKomentar.add(upload);
+            public void onResponse(Call<List<Komentar>> call, retrofit2.Response<List<Komentar>> response) {
+                Log.i("response", "code"+response.code());
+                if(response.code() == 200){
+                    for (Komentar komentar : response.body()){
+                        mKomentar.add(komentar);
                     }
                     mAdapter.notifyDataSetChanged();
                     tvBalas.setText("Balasan Komplain");
@@ -560,8 +473,8 @@
             }
 
             @Override
-            public void onCancelled(DatabaseError databaseError) {
-                Toast.makeText(DetailTutupJalanActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();
+            public void onFailure(Call<List<Komentar>> call, Throwable t) {
+                Log.i("errorResponse", t.toString());
             }
         });
     }
Index: app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailKTPActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.jatmika.admin_e_complaintrangkasbitung;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.view.animation.Animation;\r\nimport android.view.animation.AnimationUtils;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.ScrollView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.AuthFailureError;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.JsonObjectRequest;\r\nimport com.bumptech.glide.Glide;\r\nimport com.google.android.flexbox.FlexboxLayoutManager;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.API.API;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.API.APIUtility;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomentar;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterProses;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Komentar;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.MySingleton;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Proses;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.SharePref.SharePref;\r\nimport com.uncopt.android.widget.text.justify.JustifiedTextView;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport static android.text.TextUtils.isEmpty;\r\n\r\nimport retrofit2.Call;\r\nimport retrofit2.Callback;\r\n\r\npublic class DetailKTPActivity extends AppCompatActivity {\r\n\r\n    final private String serverKey = \"key=\" + \"AIzaSyDL3TGOXPGwfM7iIf_pX4zqD3IbTr-I45w\";\r\n    final private String contentType = \"application/json\";\r\n    final String TAG = \"NOTIFICATION TAG\";\r\n\r\n    String FCM_API = \"https://fcm.googleapis.com/fcm/send\";\r\n    String NOTIFICATION_TITLE;\r\n    String NOTIFICATION_MESSAGE;\r\n    String TOPIC;\r\n    String Penerima;\r\n    String prosesStatus;\r\n\r\n    TextView nomorDetailTextView, namaDetailTextView, emailDetailTextView, alamatDetailTextView,\r\n            tanggalDetailTextView, tvBalas, tvJudul, statusDetailtextView;\r\n    JustifiedTextView isiDetailTextView;\r\n    ImageView fotoDetailImageView;\r\n    Button btnTambahKomentar;\r\n    LinearLayout linear2, layout_kerangka;\r\n    RelativeLayout relative1, btnBack;\r\n    FloatingActionButton fab;\r\n    Animation fromright;\r\n\r\n    RecyclerView mRecyclerView;\r\n    private RecyclerAdapterKomentar mAdapter;\r\n    private StorageReference mStorageRef;\r\n    FirebaseStorage mStorage;\r\n    DatabaseReference mDatabaseRef, databaseReference;\r\n    private List<Komentar> mKomentar;\r\n    ValueEventListener mDBListener;\r\n\r\n    FirebaseAuth mAuth;\r\n    FirebaseUser firebaseUser;\r\n    private API apiService;\r\n    private SharePref sharePref;\r\n\r\n    int satuan;\r\n\r\n    private void initializeWidgets(){\r\n        nomorDetailTextView = findViewById(R.id.nomorTextView);\r\n        namaDetailTextView = findViewById(R.id.namaTextView);\r\n        emailDetailTextView = findViewById(R.id.emailTextView);\r\n        alamatDetailTextView = findViewById(R.id.alamatTextView);\r\n        tanggalDetailTextView = findViewById(R.id.tanggalTextView);\r\n        isiDetailTextView = findViewById(R.id.isiTextView);\r\n        statusDetailtextView = findViewById(R.id.statusTextView);\r\n        fotoDetailImageView = findViewById(R.id.fotoDetailImageView);\r\n        relative1 = findViewById(R.id.relative1);\r\n        btnTambahKomentar = findViewById(R.id.btnTambahKomentar);\r\n        linear2 = findViewById(R.id.linear2);\r\n        layout_kerangka = findViewById(R.id.layout_kerangka);\r\n        tvBalas = findViewById(R.id.tvBalas);\r\n        fab = findViewById(R.id.fab);\r\n        tvJudul = findViewById(R.id.tvJudul);\r\n        btnBack = findViewById(R.id.btnBack);\r\n    }\r\n\r\n    String image, berkas, nomor, nik, email, nama, alamat, tanggal, namalokasi, latitude, longitude, isi, kategori, status,\r\n            jml_lihat, jml_suka, jml_balas, getKey;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.app_bar_detail_ktp);\r\n\r\n        Intent i = this.getIntent();\r\n        image = i.getExtras().getString(\"IMAGE_KEY\");\r\n        berkas = i.getExtras().getString(\"BERKAS_KEY\");\r\n        nomor = i.getExtras().getString(\"NOMOR_KEY\");\r\n        nik = i.getExtras().getString(\"NIK_KEY\");\r\n        email = i.getExtras().getString(\"EMAIL_KEY\");\r\n        nama = i.getExtras().getString(\"NAMA_KEY\");\r\n        alamat = i.getExtras().getString(\"ALAMAT_KEY\");\r\n        tanggal = i.getExtras().getString(\"TANGGAL_KEY\");\r\n        namalokasi = i.getExtras().getString(\"NAMALOKASI_KEY\");\r\n        latitude = i.getExtras().getString(\"LATITUDE_KEY\");\r\n        longitude = i.getExtras().getString(\"LONGITUDE_KEY\");\r\n        isi = i.getExtras().getString(\"ISI_KEY\");\r\n        kategori = i.getExtras().getString(\"KATEGORI_KEY\");\r\n        status = i.getExtras().getString(\"STATUS_KEY\");\r\n        jml_lihat = i.getExtras().getString(\"JML_LIHAT_KEY\");\r\n        jml_suka = i.getExtras().getString(\"JML_SUKA_KEY\");\r\n        jml_balas = i.getExtras().getString(\"JML_BALAS_KEY\");\r\n        getKey = i.getExtras().getString(\"GETPRIMARY_KEY\");\r\n\r\n        apiService = APIUtility.getAPI();\r\n        sharePref = new SharePref(this);\r\n\r\n        initializeWidgets();\r\n        displayKomentar();\r\n\r\n        Toolbar toolbar = findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        firebaseUser = mAuth.getCurrentUser();\r\n\r\n        fromright = AnimationUtils.loadAnimation(this, R.anim.fromright);\r\n        tvJudul.startAnimation(fromright);\r\n        linear2.setVisibility(View.GONE);\r\n\r\n        nomorDetailTextView.setText(nomor);\r\n        emailDetailTextView.setText(email);\r\n        namaDetailTextView.setText(nama);\r\n        alamatDetailTextView.setText(alamat);\r\n        tanggalDetailTextView.setText(tanggal);\r\n        isiDetailTextView.setText(\"''\"+isi+\"''\");\r\n        statusDetailtextView.setText(status);\r\n        String urlImage = \"http://192.168.216.94:8000/uploads/\"+image;\r\n        Glide.with(this)\r\n                .load(urlImage)\r\n                .into(fotoDetailImageView);\r\n\r\n        fotoDetailImageView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailKTPActivity.this);\r\n                View mView = getLayoutInflater().inflate(R.layout.show_image, null);\r\n                ImageView imageView = mView.findViewById(R.id.imageView);\r\n                TextView btnClose = mView.findViewById(R.id.btnClose);\r\n\r\n                Glide.with(DetailKTPActivity.this)\r\n                        .load(urlImage)\r\n                        .into(imageView);\r\n\r\n                mBuilder.setView(mView);\r\n                final AlertDialog mDialog = mBuilder.create();\r\n                mDialog.show();\r\n\r\n                btnClose.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        mDialog.dismiss();\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        satuan = 1;\r\n        int jml_lihatlama = 0;\r\n        final int total = satuan + jml_lihatlama;\r\n//        FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_lihat\").setValue(String.valueOf(total));\r\n\r\n        relative1.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if (status.equals(\"Menunggu Diproses\")){\r\n                    AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailKTPActivity.this);\r\n                    View mView = getLayoutInflater().inflate(R.layout.show_menunggu, null);\r\n                    TextView btnClose = mView.findViewById(R.id.btnClose);\r\n                    TextView tvNomor = mView.findViewById(R.id.tvNomor);\r\n                    RelativeLayout relative1 = mView.findViewById(R.id.relative1);\r\n\r\n                    mBuilder.setView(mView);\r\n                    final AlertDialog mDialog = mBuilder.create();\r\n                    mDialog.show();\r\n\r\n                    tvNomor.setText(\"No : \"+nomor);\r\n                    btnClose.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n                        }\r\n                    });\r\n\r\n                    relative1.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n\r\n                            CharSequence[] item = {\"Dalam Proses\", \"Selesai\"};\r\n                            AlertDialog.Builder request = new AlertDialog.Builder(DetailKTPActivity.this)\r\n                                    .setTitle(\"Pilih Status Komplain\")\r\n                                    .setItems(item, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialog, int i) {\r\n                                            switch (i){\r\n                                                case 0:\r\n                                                    prosesStatus = \"Dalam Proses\";\r\n                                                    Intent intent = new Intent(DetailKTPActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle = new Bundle();\r\n                                                    bundle.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle.putString(\"status\", status);\r\n                                                    bundle.putString(\"getKey\", getKey);\r\n                                                    intent.putExtras(bundle);\r\n                                                    startActivity(intent);\r\n                                                    break;\r\n                                                case 1:\r\n                                                    prosesStatus = \"Selesai\";\r\n                                                    Intent intent2 = new Intent(DetailKTPActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle2 = new Bundle();\r\n                                                    bundle2.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle2.putString(\"status\", status);\r\n                                                    bundle2.putString(\"getKey\", getKey);\r\n                                                    intent2.putExtras(bundle2);\r\n                                                    startActivity(intent2);\r\n                                                    break;\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            request.create();\r\n                            request.show();\r\n                        }\r\n                    });\r\n\r\n                } else {\r\n                    AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailKTPActivity.this);\r\n                    View mView = getLayoutInflater().inflate(R.layout.show_proses, null);\r\n\r\n                    TextView btnClose = mView.findViewById(R.id.btnClose);\r\n                    TextView tvNomor = mView.findViewById(R.id.tvNomor);\r\n                    TextView tvStatus = mView.findViewById(R.id.tvStatus);\r\n                    RelativeLayout relative2 = mView.findViewById(R.id.relative1);\r\n                    RecyclerView mRecyclerView = mView.findViewById(R.id.mRecyclerView);\r\n                    final RecyclerAdapterProses mAdapter;\r\n                    DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"status_komplain\");\r\n                    final List<Proses> mProsess;\r\n\r\n                    mBuilder.setView(mView);\r\n                    final AlertDialog mDialog = mBuilder.create();\r\n                    mDialog.show();\r\n\r\n                    mRecyclerView.setHasFixedSize(true);\r\n                    mRecyclerView.setLayoutManager(new LinearLayoutManager(DetailKTPActivity.this));\r\n\r\n                    mProsess = new ArrayList<>();\r\n                    mAdapter = new RecyclerAdapterProses(DetailKTPActivity.this, mProsess);\r\n                    mRecyclerView.setAdapter(mAdapter);\r\n\r\n                    tvStatus.setText(status);\r\n                    tvNomor.setText(\"No : \"+nomor);\r\n                    btnClose.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n                        }\r\n                    });\r\n\r\n                    relative2.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n\r\n                            CharSequence[] item = {\"Dalam Proses\", \"Selesai\"};\r\n                            AlertDialog.Builder request = new AlertDialog.Builder(DetailKTPActivity.this)\r\n                                    .setTitle(\"Pilih Status Komplain\")\r\n                                    .setItems(item, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialog, int i) {\r\n                                            switch (i){\r\n                                                case 0:\r\n                                                    prosesStatus = \"Dalam Proses\";\r\n                                                    Intent intent = new Intent(DetailKTPActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle = new Bundle();\r\n                                                    bundle.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle.putString(\"status\", status);\r\n                                                    bundle.putString(\"getKey\", getKey);\r\n                                                    intent.putExtras(bundle);\r\n                                                    startActivity(intent);\r\n                                                    break;\r\n                                                case 1:\r\n                                                    prosesStatus = \"Selesai\";\r\n                                                    Intent intent2 = new Intent(DetailKTPActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle2 = new Bundle();\r\n                                                    bundle2.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle2.putString(\"status\", status);\r\n                                                    bundle2.putString(\"getKey\", getKey);\r\n                                                    intent2.putExtras(bundle2);\r\n                                                    startActivity(intent2);\r\n                                                    break;\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            request.create();\r\n                            request.show();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        btnTambahKomentar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                final ScrollView scrollView = findViewById(R.id.scrollView);\r\n                btnTambahKomentar.setVisibility(View.GONE);\r\n                scrollView.postDelayed(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                        scrollView.isSmoothScrollingEnabled(); }\r\n                }, 200);\r\n                linear2.setVisibility(View.VISIBLE);\r\n            }\r\n        });\r\n\r\n        fab.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                final EditText input = findViewById(R.id.input);\r\n                final ScrollView scrollView = findViewById(R.id.scrollView);\r\n\r\n                AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailKTPActivity.this);\r\n                View mView = getLayoutInflater().inflate(R.layout.show_loading, null);\r\n\r\n                mBuilder.setView(mView);\r\n                mBuilder.setCancelable(false);\r\n                final AlertDialog mDialog = mBuilder.create();\r\n                mDialog.show();\r\n\r\n                if (isEmpty(input.getText().toString())) {\r\n                    Toast.makeText(DetailKTPActivity.this, \"Balasan tidak boleh kosong!\",\r\n                            Toast.LENGTH_SHORT).show();\r\n                    mDialog.dismiss();\r\n\r\n                } else {\r\n                    apiService.addComentar(\"Bearer \"+sharePref.getTokenApi(), getKey, input.getText().toString()).enqueue(new Callback<Komentar>() {\r\n                        @Override\r\n                        public void onResponse(Call<Komentar> call, retrofit2.Response<Komentar> response) {\r\n                            Log.i(\"responseAPI\", response.body().toString());\r\n                            linear2.setVisibility(View.GONE);\r\n                            input.setText(\"\");\r\n                            btnTambahKomentar.setVisibility(View.VISIBLE);\r\n                            mDialog.dismiss();\r\n\r\n                            scrollView.postDelayed(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n                                    scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                                    scrollView.isSmoothScrollingEnabled();\r\n                                }\r\n                            }, 200);\r\n                            displayKomentar();\r\n                        }\r\n\r\n                        @Override\r\n                        public void onFailure(Call<Komentar> call, Throwable t) {\r\n                            Log.i(\"responseAPI\", t.toString());\r\n                        }\r\n                    });\r\n//                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey)\r\n//                            .child(\"balasan\").push().setValue(new Komentar(input.getText().toString(),\r\n//                            namaDetailTextView.getText().toString(), firebaseUser.getEmail())).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n//                        @Override\r\n//                        public void onSuccess(Void aVoid) { FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"balasan\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n//                            @Override\r\n//                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n//                                if (dataSnapshot.exists()) {\r\n//                                    long totalBalas;\r\n//                                    totalBalas = (dataSnapshot.getChildrenCount());\r\n//                                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_balas\").setValue(String.valueOf(totalBalas))\r\n//                                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n//                                                @Override\r\n//                                                public void onSuccess(Void aVoid) {\r\n//                                                    Penerima = emailDetailTextView.getText().toString();\r\n//                                                    Penerima = Penerima.replaceAll(\"[@.-]\", \"\");\r\n//\r\n//                                                    TOPIC = \"/topics/\"+Penerima;\r\n//                                                    NOTIFICATION_TITLE = \"Balasan Komplain Dari Admin\";\r\n//                                                    NOTIFICATION_MESSAGE = input.getText().toString();\r\n//\r\n//                                                    JSONObject notification = new JSONObject();\r\n//                                                    JSONObject notifcationBody = new JSONObject();\r\n//                                                    try {\r\n//                                                        notifcationBody.put(\"title\", NOTIFICATION_TITLE);\r\n//                                                        notifcationBody.put(\"message\", NOTIFICATION_MESSAGE);\r\n//\r\n//                                                        notification.put(\"to\", TOPIC);\r\n//                                                        notification.put(\"data\", notifcationBody);\r\n//                                                    } catch (JSONException e) {\r\n//                                                        Log.e(TAG, \"onCreate: \" + e.getMessage() );\r\n//                                                    }\r\n//                                                    sendNotification(notification);\r\n//\r\n//                                                    linear2.setVisibility(View.GONE);\r\n//                                                    input.setText(\"\");\r\n//                                                    btnTambahKomentar.setVisibility(View.VISIBLE);\r\n//                                                    mDialog.dismiss();\r\n//\r\n//                                                    scrollView.postDelayed(new Runnable() {\r\n//                                                        @Override\r\n//                                                        public void run() {\r\n//                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n//                                                            scrollView.isSmoothScrollingEnabled();\r\n//                                                        }\r\n//                                                    }, 200);\r\n//                                                }\r\n//                                            });\r\n//                                } else {\r\n//                                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_balas\").setValue(\"0\")\r\n//                                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n//                                                @Override\r\n//                                                public void onSuccess(Void aVoid) {\r\n//                                                    Penerima = emailDetailTextView.getText().toString();\r\n//                                                    Penerima = Penerima.replaceAll(\"[@.-]\", \"\");\r\n//\r\n//                                                    TOPIC = \"/topics/\"+Penerima;\r\n//                                                    NOTIFICATION_TITLE = \"Balasan Komplain Dari Admin\";\r\n//                                                    NOTIFICATION_MESSAGE = input.getText().toString();\r\n//\r\n//                                                    JSONObject notification = new JSONObject();\r\n//                                                    JSONObject notifcationBody = new JSONObject();\r\n//                                                    try {\r\n//                                                        notifcationBody.put(\"title\", NOTIFICATION_TITLE);\r\n//                                                        notifcationBody.put(\"message\", NOTIFICATION_MESSAGE);\r\n//\r\n//                                                        notification.put(\"to\", TOPIC);\r\n//                                                        notification.put(\"data\", notifcationBody);\r\n//                                                    } catch (JSONException e) {\r\n//                                                        Log.e(TAG, \"onCreate: \" + e.getMessage() );\r\n//                                                    }\r\n//                                                    sendNotification(notification);\r\n//\r\n//                                                    linear2.setVisibility(View.GONE);\r\n//                                                    input.setText(\"\");\r\n//                                                    btnTambahKomentar.setVisibility(View.VISIBLE);\r\n//                                                    mDialog.dismiss();\r\n//\r\n//                                                    scrollView.postDelayed(new Runnable() {\r\n//                                                        @Override\r\n//                                                        public void run() {\r\n//                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n//                                                            scrollView.isSmoothScrollingEnabled();\r\n//                                                        }\r\n//                                                    }, 200);\r\n//                                                }\r\n//                                            });\r\n//                                }\r\n//                            }\r\n//                            @Override\r\n//                            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n//\r\n//                            }\r\n//                        });\r\n//                        }\r\n//                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        btnBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void sendNotification(JSONObject notification) {\r\n        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(FCM_API, notification,\r\n                new Response.Listener<JSONObject>() {\r\n                    @Override\r\n                    public void onResponse(JSONObject response) {\r\n                        Log.i(TAG, \"onResponse: \" + response.toString());\r\n                    }\r\n                },\r\n                new Response.ErrorListener() {\r\n                    @Override\r\n                    public void onErrorResponse(VolleyError error) {\r\n                        Toast.makeText(DetailKTPActivity.this, \"Request error!\", Toast.LENGTH_LONG).show();\r\n                        Log.i(TAG, \"onErrorResponse: Didn't work\");\r\n                    }\r\n                }){\r\n            @Override\r\n            public Map<String, String> getHeaders() throws AuthFailureError {\r\n                Map<String, String> params = new HashMap<>();\r\n                params.put(\"Authorization\", serverKey);\r\n                params.put(\"Content-Type\", contentType);\r\n                return params;\r\n            }\r\n        };\r\n        MySingleton.getInstance(getApplicationContext()).addToRequestQueue(jsonObjectRequest);\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        finish();\r\n    }\r\n\r\n    private void displayKomentar() {\r\n        mRecyclerView = findViewById(R.id.list_of_komentar);\r\n        RecyclerView.LayoutManager layoutManager = new FlexboxLayoutManager(this);\r\n        mRecyclerView.setLayoutManager(layoutManager);\r\n\r\n        mKomentar = new ArrayList<>();\r\n        mAdapter = new RecyclerAdapterKomentar (DetailKTPActivity.this, mKomentar);\r\n        mRecyclerView.setAdapter(mAdapter);\r\n        Log.i(\"keyKomplain\", getKey);\r\n        apiService.getComentar(\"Bearer \"+sharePref.getTokenApi(), getKey).enqueue(new Callback<List<Komentar>>() {\r\n            @Override\r\n            public void onResponse(Call<List<Komentar>> call, retrofit2.Response<List<Komentar>> response) {\r\n                Log.i(\"response\", \"code\"+response.code());\r\n                if(response.code() == 200){\r\n                    for (Komentar komentar : response.body()){\r\n                        mKomentar.add(komentar);\r\n                    }\r\n                    mAdapter.notifyDataSetChanged();\r\n                    tvBalas.setText(\"Balasan Komplain\");\r\n                    layout_kerangka.setVisibility(View.VISIBLE);\r\n                }else{\r\n                    tvBalas.setText(\"Belum Ada Balasan\");\r\n                    layout_kerangka.setVisibility(View.VISIBLE);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(Call<List<Komentar>> call, Throwable t) {\r\n                Log.i(\"errorResponse\", t.toString());\r\n            }\r\n        });\r\n\r\n//        mStorage = FirebaseStorage.getInstance();\r\n//        mStorageRef = FirebaseStorage.getInstance().getReference(\"foto_komentar\");\r\n//        mDatabaseRef = FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"balasan\");\r\n//        mDBListener = mDatabaseRef.addValueEventListener(new ValueEventListener() {\r\n//            @Override\r\n//            public void onDataChange(DataSnapshot dataSnapshot) {\r\n//\r\n//                if (dataSnapshot.exists()) {\r\n//                    mKomentar.clear();\r\n//\r\n//                    for (DataSnapshot komentarSnapshot : dataSnapshot.getChildren()) {\r\n//                        Komentar upload = komentarSnapshot.getValue(Komentar.class);\r\n//                        upload.setKey(komentarSnapshot.getKey());\r\n//                        mKomentar.add(upload);\r\n//                    }\r\n//                    mAdapter.notifyDataSetChanged();\r\n//                    tvBalas.setText(\"Balasan Komplain\");\r\n//                    layout_kerangka.setVisibility(View.VISIBLE);\r\n//\r\n//                } else{\r\n//                    tvBalas.setText(\"Belum Ada Balasan\");\r\n//                    layout_kerangka.setVisibility(View.VISIBLE);\r\n//                }\r\n//            }\r\n//\r\n//            @Override\r\n//            public void onCancelled(DatabaseError databaseError) {\r\n//                Toast.makeText(DetailKTPActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n//            }\r\n//        });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailKTPActivity.java b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailKTPActivity.java
--- a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailKTPActivity.java	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailKTPActivity.java	(date 1661786605475)
@@ -171,7 +171,7 @@
         tanggalDetailTextView.setText(tanggal);
         isiDetailTextView.setText("''"+isi+"''");
         statusDetailtextView.setText(status);
-        String urlImage = "http://192.168.216.94:8000/uploads/"+image;
+        String urlImage = "http://192.168.1.14:8000/uploads/"+image;
         Glide.with(this)
                 .load(urlImage)
                 .into(fotoDetailImageView);
Index: app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentSPPT.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.jatmika.admin_e_complaintrangkasbitung;\r\n\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomplain;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Komplain;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.PersentaseKomplain;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n */\r\npublic class FragmentSPPT extends Fragment implements RecyclerAdapterKomplain.OnItemClickListener {\r\n\r\n    private RecyclerAdapterKomplain mAdapter;\r\n    private FirebaseStorage mStorage;\r\n    private DatabaseReference mDatabaseRef;\r\n    private List<Komplain> mPengaduans;\r\n    private TextView tvNoData;\r\n    private Context context;\r\n\r\n    private void openDetailKomplainSPPT(String[] data){\r\n        Intent intent = new Intent(getActivity(), DetailSPPTActivity.class);\r\n        intent.putExtra(\"IMAGE_KEY\",data[0]);\r\n        intent.putExtra(\"BERKAS_KEY\",data[1]);\r\n        intent.putExtra(\"NOMOR_KEY\",data[2]);\r\n        intent.putExtra(\"NIK_KEY\",data[3]);\r\n        intent.putExtra(\"EMAIL_KEY\",data[4]);\r\n        intent.putExtra(\"NAMA_KEY\",data[5]);\r\n        intent.putExtra(\"ALAMAT_KEY\",data[6]);\r\n        intent.putExtra(\"TANGGAL_KEY\",data[7]);\r\n        intent.putExtra(\"NAMALOKASI_KEY\",data[8]);\r\n        intent.putExtra(\"LATITUDE_KEY\",data[9]);\r\n        intent.putExtra(\"LONGITUDE_KEY\",data[10]);\r\n        intent.putExtra(\"ISI_KEY\",data[11]);\r\n        intent.putExtra(\"KATEGORI_KEY\",data[12]);\r\n        intent.putExtra(\"STATUS_KEY\",data[13]);\r\n        intent.putExtra(\"JML_LIHAT_KEY\",data[14]);\r\n        intent.putExtra(\"JML_SUKA_KEY\",data[15]);\r\n        intent.putExtra(\"JML_BALAS_KEY\",data[16]);\r\n        intent.putExtra(\"GETPRIMARY_KEY\",data[17]);\r\n        startActivity(intent);\r\n    }\r\n\r\n    private String jumlahKomplainIUMK, jumlahKomplainKependudukan, jumlahKomplainKTP,\r\n            jumlahKomplainNikah, jumlahKomplainSPPT, jumlahKomplainTutupJalan;\r\n\r\n    public FragmentSPPT() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View view = inflater.inflate(R.layout.fragment_sppt, container, false);\r\n\r\n        context = getActivity().getApplicationContext();\r\n\r\n        tvNoData = view.findViewById(R.id.tvNoData);\r\n        RecyclerView mRecyclerView = view.findViewById(R.id.mRecyclerView);\r\n        mRecyclerView.setHasFixedSize(true);\r\n        mRecyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));\r\n\r\n        mPengaduans = new ArrayList<>();\r\n        mAdapter = new RecyclerAdapterKomplain(getActivity(), mPengaduans);\r\n        mRecyclerView.setAdapter(mAdapter);\r\n        mAdapter.setOnItemClickListener(this);\r\n\r\n        mStorage = FirebaseStorage.getInstance();\r\n        mDatabaseRef = FirebaseDatabase.getInstance().getReference(\"data_komplain\");\r\n\r\n        mDatabaseRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                Query query = mDatabaseRef.orderByChild(\"kategori\").equalTo(\"Komplain SPPT\");\r\n                query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()) {\r\n                            mPengaduans.clear();\r\n                            for (DataSnapshot komplainSnapshot : dataSnapshot.getChildren()) {\r\n                                Komplain upload = komplainSnapshot.getValue(Komplain.class);\r\n                                upload.setKey(komplainSnapshot.getKey());\r\n                                mPengaduans.add(upload);\r\n                            }\r\n                            mAdapter.notifyDataSetChanged();\r\n                            tvNoData.setVisibility(View.GONE);\r\n                        } else {\r\n                            tvNoData.setVisibility(View.VISIBLE);\r\n                            tvNoData.setText(\"Belum Ada Komplain\");\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError databaseError) {\r\n                Toast.makeText(getActivity(), databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        return view;\r\n    }\r\n\r\n    @Override\r\n    public void onDeleteItemClick(int position) {\r\n        showJumlahKomplain();\r\n\r\n        final Komplain selectedItem = mPengaduans.get(position);\r\n        final String selectedKey = selectedItem.getKey();\r\n\r\n        String url = selectedItem.getBerkas();\r\n\r\n        AlertDialog.Builder mBuilder = new AlertDialog.Builder(getActivity());\r\n        View mView = getLayoutInflater().inflate(R.layout.show_loading, null);\r\n\r\n        mBuilder.setView(mView);\r\n        mBuilder.setCancelable(false);\r\n        final AlertDialog mDialog = mBuilder.create();\r\n        mDialog.show();\r\n\r\n        if (url.equals(\"\")){\r\n            mDatabaseRef.child(selectedKey).removeValue().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                @Override\r\n                public void onSuccess(Void aVoid) {\r\n                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain SPPT\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                            if (dataSnapshot.exists()) {\r\n                                long totalData = dataSnapshot.getChildrenCount();\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"jumlah_komplain\").setValue(String.valueOf(totalData));\r\n                                showJumlahKomplain();\r\n\r\n                                double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);\r\n                                double komplainKependudukan = Double.parseDouble(jumlahKomplainKependudukan);\r\n                                double komplainKTP = Double.parseDouble(jumlahKomplainKTP);\r\n                                double komplainNikah = Double.parseDouble(jumlahKomplainNikah);\r\n                                double komplainSPPT = Double.parseDouble(String.valueOf(totalData));\r\n                                double komplainTutupJalan = Double.parseDouble(jumlahKomplainTutupJalan);\r\n                                double TotalPersen2 = (komplainIUMK / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                double TotalPersen3 = (komplainKependudukan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                double TotalPersen4 = (komplainKTP / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                double TotalPersen5 = (komplainNikah / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                double TotalPersen6 = (komplainSPPT / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                double TotalPersen7 = (komplainTutupJalan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain IUMK\").child(\"persen\").setValue(String.valueOf(TotalPersen2));\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"persen\").setValue(String.valueOf(TotalPersen3));\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain KTP\").child(\"persen\").setValue(String.valueOf(TotalPersen4));\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"persen\").setValue(String.valueOf(TotalPersen5));\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"persen\").setValue(String.valueOf(TotalPersen6));\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"persen\").setValue(String.valueOf(TotalPersen7));\r\n\r\n                                mDialog.dismiss();\r\n                                Toast.makeText(FragmentSPPT.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n\r\n                            } else {\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"jumlah_komplain\").setValue(\"0\")\r\n                                        .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                            @Override\r\n                                            public void onSuccess(Void aVoid) {\r\n                                                showJumlahKomplain();\r\n\r\n                                                double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);\r\n                                                double komplainKependudukan = Double.parseDouble(jumlahKomplainKependudukan);\r\n                                                double komplainKTP = Double.parseDouble(jumlahKomplainKTP);\r\n                                                double komplainNikah = Double.parseDouble(jumlahKomplainNikah);\r\n                                                double komplainSPPT = 0;\r\n                                                double komplainTutupJalan = Double.parseDouble(jumlahKomplainTutupJalan);\r\n\r\n                                                if (komplainIUMK == 0 && komplainKependudukan == 0 && komplainKTP == 0\r\n                                                        && komplainNikah == 0 && komplainTutupJalan == 0){\r\n                                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"persen\").setValue(\"0.0\");\r\n                                                    mDialog.dismiss();\r\n                                                    Toast.makeText(FragmentSPPT.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n\r\n                                                } else {\r\n                                                    double TotalPersen2 = (komplainIUMK / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                    double TotalPersen3 = (komplainKependudukan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                    double TotalPersen4 = (komplainKTP / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                    double TotalPersen5 = (komplainNikah / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                    double TotalPersen6 = (komplainSPPT / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                    double TotalPersen7 = (komplainTutupJalan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n\r\n                                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain IUMK\").child(\"persen\").setValue(String.valueOf(TotalPersen2));\r\n                                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"persen\").setValue(String.valueOf(TotalPersen3));\r\n                                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain KTP\").child(\"persen\").setValue(String.valueOf(TotalPersen4));\r\n                                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"persen\").setValue(String.valueOf(TotalPersen5));\r\n                                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"persen\").setValue(String.valueOf(TotalPersen6));\r\n                                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"persen\").setValue(String.valueOf(TotalPersen7));\r\n\r\n                                                    mDialog.dismiss();\r\n                                                    Toast.makeText(FragmentSPPT.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n                                                }\r\n                                            }\r\n                                        });\r\n                            }\r\n                        }\r\n\r\n                        @Override\r\n                        public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n        } else {\r\n            StorageReference imageRef = mStorage.getReferenceFromUrl(selectedItem.getBerkas());\r\n            imageRef.delete().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                @Override\r\n                public void onSuccess(Void aVoid) {\r\n                    mDatabaseRef.child(selectedKey).removeValue().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            FirebaseDatabase.getInstance().getReference(\"data_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain SPPT\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                @Override\r\n                                public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                    if (dataSnapshot.exists()) {\r\n                                        long totalData = dataSnapshot.getChildrenCount();\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"jumlah_komplain\").setValue(String.valueOf(totalData));\r\n                                        showJumlahKomplain();\r\n\r\n                                        double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);\r\n                                        double komplainKependudukan = Double.parseDouble(jumlahKomplainKependudukan);\r\n                                        double komplainKTP = Double.parseDouble(jumlahKomplainKTP);\r\n                                        double komplainNikah = Double.parseDouble(jumlahKomplainNikah);\r\n                                        double komplainSPPT = Double.parseDouble(String.valueOf(totalData));\r\n                                        double komplainTutupJalan = Double.parseDouble(jumlahKomplainTutupJalan);\r\n                                        double TotalPersen2 = (komplainIUMK / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                        double TotalPersen3 = (komplainKependudukan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                        double TotalPersen4 = (komplainKTP / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                        double TotalPersen5 = (komplainNikah / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                        double TotalPersen6 = (komplainSPPT / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                        double TotalPersen7 = (komplainTutupJalan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain IUMK\").child(\"persen\").setValue(String.valueOf(TotalPersen2));\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"persen\").setValue(String.valueOf(TotalPersen3));\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain KTP\").child(\"persen\").setValue(String.valueOf(TotalPersen4));\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"persen\").setValue(String.valueOf(TotalPersen5));\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"persen\").setValue(String.valueOf(TotalPersen6));\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"persen\").setValue(String.valueOf(TotalPersen7));\r\n\r\n                                        mDialog.dismiss();\r\n                                        Toast.makeText(FragmentSPPT.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n\r\n                                    } else {\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"jumlah_komplain\").setValue(\"0\")\r\n                                                .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                    @Override\r\n                                                    public void onSuccess(Void aVoid) {\r\n                                                        showJumlahKomplain();\r\n\r\n                                                        double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);\r\n                                                        double komplainKependudukan = Double.parseDouble(jumlahKomplainKependudukan);\r\n                                                        double komplainKTP = Double.parseDouble(jumlahKomplainKTP);\r\n                                                        double komplainNikah = Double.parseDouble(jumlahKomplainNikah);\r\n                                                        double komplainSPPT = 0;\r\n                                                        double komplainTutupJalan = Double.parseDouble(jumlahKomplainTutupJalan);\r\n\r\n                                                        if (komplainIUMK == 0 && komplainKependudukan == 0 && komplainKTP == 0\r\n                                                                && komplainNikah == 0 && komplainTutupJalan == 0){\r\n                                                            FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"persen\").setValue(\"0.0\");\r\n                                                            mDialog.dismiss();\r\n                                                            Toast.makeText(FragmentSPPT.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n\r\n                                                        } else {\r\n                                                            double TotalPersen2 = (komplainIUMK / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                            double TotalPersen3 = (komplainKependudukan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                            double TotalPersen4 = (komplainKTP / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                            double TotalPersen5 = (komplainNikah / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                            double TotalPersen6 = (komplainSPPT / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                            double TotalPersen7 = (komplainTutupJalan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n\r\n                                                            FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain IUMK\").child(\"persen\").setValue(String.valueOf(TotalPersen2));\r\n                                                            FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"persen\").setValue(String.valueOf(TotalPersen3));\r\n                                                            FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain KTP\").child(\"persen\").setValue(String.valueOf(TotalPersen4));\r\n                                                            FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"persen\").setValue(String.valueOf(TotalPersen5));\r\n                                                            FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"persen\").setValue(String.valueOf(TotalPersen6));\r\n                                                            FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"persen\").setValue(String.valueOf(TotalPersen7));\r\n\r\n                                                            mDialog.dismiss();\r\n                                                            Toast.makeText(FragmentSPPT.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n                                                        }\r\n                                                    }\r\n                                                });\r\n                                    }\r\n                                }\r\n\r\n                                @Override\r\n                                public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onItemClick(int position) {\r\n        Komplain clickedKomplain = mPengaduans.get(position);\r\n        String[] komplainData = {clickedKomplain.getFoto(), clickedKomplain.getBerkas(), clickedKomplain.getNomor(),\r\n                clickedKomplain.getNik(), clickedKomplain.getEmail(), clickedKomplain.getNama(), clickedKomplain.getAlamat(),\r\n                clickedKomplain.getTanggal(), clickedKomplain.getNamalokasi(), String.valueOf(clickedKomplain.getLatitude()),\r\n                String.valueOf(clickedKomplain.getLongitude()), clickedKomplain.getIsi(), clickedKomplain.getKategori(),\r\n                clickedKomplain.getStatus(), clickedKomplain.getJml_lihat(), clickedKomplain.getJml_suka(),\r\n                clickedKomplain.getJml_balas(), clickedKomplain.getKey()};\r\n\r\n        openDetailKomplainSPPT(komplainData);\r\n    }\r\n\r\n    private void showJumlahKomplain(){\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain IUMK\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainIUMK = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainIUMK = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Kependudukan\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainKependudukan = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainKependudukan = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain KTP\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainKTP = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainKTP = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Nikah\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainNikah = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainNikah = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain SPPT\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainSPPT = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainSPPT = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Tutup Jalan\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainTutupJalan = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainTutupJalan = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentSPPT.java b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentSPPT.java
--- a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentSPPT.java	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentSPPT.java	(date 1661855721773)
@@ -27,9 +27,12 @@
 import com.google.firebase.database.ValueEventListener;
 import com.google.firebase.storage.FirebaseStorage;
 import com.google.firebase.storage.StorageReference;
+import com.jatmika.admin_e_complaintrangkasbitung.API.API;
+import com.jatmika.admin_e_complaintrangkasbitung.API.APIUtility;
 import com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomplain;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.Komplain;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.PersentaseKomplain;
+import com.jatmika.admin_e_complaintrangkasbitung.SharePref.SharePref;
 
 import org.json.JSONException;
 import org.json.JSONObject;
@@ -37,6 +40,10 @@
 import java.util.ArrayList;
 import java.util.List;
 
+import retrofit2.Call;
+import retrofit2.Callback;
+import retrofit2.Response;
+
 
 /**
  * A simple {@link Fragment} subclass.
@@ -49,6 +56,8 @@
     private List<Komplain> mPengaduans;
     private TextView tvNoData;
     private Context context;
+    private SharePref sharePref;
+    private API apiService;
 
     private void openDetailKomplainSPPT(String[] data){
         Intent intent = new Intent(getActivity(), DetailSPPTActivity.class);
@@ -88,6 +97,8 @@
         View view = inflater.inflate(R.layout.fragment_sppt, container, false);
 
         context = getActivity().getApplicationContext();
+        apiService = APIUtility.getAPI();
+        sharePref = new SharePref(context);
 
         tvNoData = view.findViewById(R.id.tvNoData);
         RecyclerView mRecyclerView = view.findViewById(R.id.mRecyclerView);
@@ -101,43 +112,23 @@
 
         mStorage = FirebaseStorage.getInstance();
         mDatabaseRef = FirebaseDatabase.getInstance().getReference("data_komplain");
-
-        mDatabaseRef.addValueEventListener(new ValueEventListener() {
+        Log.i("token", sharePref.getTokenApi());
+        apiService.getComplain("Bearer "+sharePref.getTokenApi(), "SPPT").enqueue(new Callback<List<Komplain>>() {
             @Override
-            public void onDataChange(DataSnapshot dataSnapshot) {
-
-                Query query = mDatabaseRef.orderByChild("kategori").equalTo("Komplain SPPT");
-                query.addListenerForSingleValueEvent(new ValueEventListener() {
-                    @Override
-                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
-                        if (dataSnapshot.exists()) {
-                            mPengaduans.clear();
-                            for (DataSnapshot komplainSnapshot : dataSnapshot.getChildren()) {
-                                Komplain upload = komplainSnapshot.getValue(Komplain.class);
-                                upload.setKey(komplainSnapshot.getKey());
-                                mPengaduans.add(upload);
-                            }
-                            mAdapter.notifyDataSetChanged();
-                            tvNoData.setVisibility(View.GONE);
-                        } else {
-                            tvNoData.setVisibility(View.VISIBLE);
-                            tvNoData.setText("Belum Ada Komplain");
-                        }
-                    }
+            public void onResponse(Call<List<Komplain>> call, Response<List<Komplain>> response) {
+                Log.i("response", response.body().toString());
+                for (Komplain komplain : response.body()){
+                    mPengaduans.add(komplain);
+                }
+                mAdapter.notifyDataSetChanged();
+                tvNoData.setVisibility(View.GONE);
+            }
 
-                    @Override
-                    public void onCancelled(@NonNull DatabaseError databaseError) {
-
-                    }
-                });
-            }
-
-            @Override
-            public void onCancelled(DatabaseError databaseError) {
-                Toast.makeText(getActivity(), databaseError.getMessage(), Toast.LENGTH_SHORT).show();
+            @Override
+            public void onFailure(Call<List<Komplain>> call, Throwable t) {
+                Log.i("responseError", t.toString());
             }
         });
-
         return view;
     }
 
Index: app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentKependudukan.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.jatmika.admin_e_complaintrangkasbitung;\r\n\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomplain;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Komplain;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.PersentaseKomplain;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n */\r\npublic class FragmentKependudukan extends Fragment implements RecyclerAdapterKomplain.OnItemClickListener {\r\n\r\n    private RecyclerAdapterKomplain mAdapter;\r\n    private FirebaseStorage mStorage;\r\n    private DatabaseReference mDatabaseRef;\r\n    private List<Komplain> mPengaduans;\r\n    private TextView tvNoData;\r\n    private Context context;\r\n\r\n    private void openDetailKomplainKependudukan(String[] data){\r\n        Intent intent = new Intent(getActivity(), DetailKependudukanActivity.class);\r\n        intent.putExtra(\"IMAGE_KEY\",data[0]);\r\n        intent.putExtra(\"BERKAS_KEY\",data[1]);\r\n        intent.putExtra(\"NOMOR_KEY\",data[2]);\r\n        intent.putExtra(\"NIK_KEY\",data[3]);\r\n        intent.putExtra(\"EMAIL_KEY\",data[4]);\r\n        intent.putExtra(\"NAMA_KEY\",data[5]);\r\n        intent.putExtra(\"ALAMAT_KEY\",data[6]);\r\n        intent.putExtra(\"TANGGAL_KEY\",data[7]);\r\n        intent.putExtra(\"NAMALOKASI_KEY\",data[8]);\r\n        intent.putExtra(\"LATITUDE_KEY\",data[9]);\r\n        intent.putExtra(\"LONGITUDE_KEY\",data[10]);\r\n        intent.putExtra(\"ISI_KEY\",data[11]);\r\n        intent.putExtra(\"KATEGORI_KEY\",data[12]);\r\n        intent.putExtra(\"STATUS_KEY\",data[13]);\r\n        intent.putExtra(\"JML_LIHAT_KEY\",data[14]);\r\n        intent.putExtra(\"JML_SUKA_KEY\",data[15]);\r\n        intent.putExtra(\"JML_BALAS_KEY\",data[16]);\r\n        intent.putExtra(\"GETPRIMARY_KEY\",data[17]);\r\n        startActivity(intent);\r\n    }\r\n\r\n    private String jumlahKomplainIUMK, jumlahKomplainKependudukan, jumlahKomplainKTP,\r\n            jumlahKomplainNikah, jumlahKomplainSPPT, jumlahKomplainTutupJalan;\r\n\r\n    public FragmentKependudukan() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View view = inflater.inflate(R.layout.fragment_kependudukan, container, false);\r\n\r\n        context = getActivity().getApplicationContext();\r\n\r\n        tvNoData = view.findViewById(R.id.tvNoData);\r\n        RecyclerView mRecyclerView = view.findViewById(R.id.mRecyclerView);\r\n        mRecyclerView.setHasFixedSize(true);\r\n        mRecyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));\r\n\r\n        mPengaduans = new ArrayList<>();\r\n        mAdapter = new RecyclerAdapterKomplain(getActivity(), mPengaduans);\r\n        mRecyclerView.setAdapter(mAdapter);\r\n        mAdapter.setOnItemClickListener(this);\r\n\r\n        mStorage = FirebaseStorage.getInstance();\r\n        mDatabaseRef = FirebaseDatabase.getInstance().getReference(\"data_komplain\");\r\n\r\n        mDatabaseRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                Query query = mDatabaseRef.orderByChild(\"kategori\").equalTo(\"Komplain Kependudukan\");\r\n                query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()) {\r\n                            mPengaduans.clear();\r\n                            for (DataSnapshot komplainSnapshot : dataSnapshot.getChildren()) {\r\n                                Komplain upload = komplainSnapshot.getValue(Komplain.class);\r\n                                upload.setKey(komplainSnapshot.getKey());\r\n                                mPengaduans.add(upload);\r\n                            }\r\n                            mAdapter.notifyDataSetChanged();\r\n                            tvNoData.setVisibility(View.GONE);\r\n                        } else {\r\n                            tvNoData.setVisibility(View.VISIBLE);\r\n                            tvNoData.setText(\"Belum Ada Komplain\");\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError databaseError) {\r\n                Toast.makeText(getActivity(), databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        return view;\r\n    }\r\n\r\n    @Override\r\n    public void onDeleteItemClick(int position) {\r\n        showJumlahKomplain();\r\n\r\n        Komplain selectedItem = mPengaduans.get(position);\r\n        final String selectedKey = selectedItem.getKey();\r\n\r\n        AlertDialog.Builder mBuilder = new AlertDialog.Builder(getActivity());\r\n        View mView = getLayoutInflater().inflate(R.layout.show_loading, null);\r\n\r\n        mBuilder.setView(mView);\r\n        mBuilder.setCancelable(false);\r\n        final AlertDialog mDialog = mBuilder.create();\r\n        mDialog.show();\r\n\r\n        StorageReference imageRef = mStorage.getReferenceFromUrl(selectedItem.getFoto());\r\n        imageRef.delete().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n            @Override\r\n            public void onSuccess(Void aVoid) {\r\n                mDatabaseRef.child(selectedKey).removeValue().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                    @Override\r\n                    public void onSuccess(Void aVoid) {\r\n                        FirebaseDatabase.getInstance().getReference(\"data_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Kependudukan\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                if (dataSnapshot.exists()){\r\n                                    long totalData = dataSnapshot.getChildrenCount();\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"jumlah_komplain\").setValue(String.valueOf(totalData));\r\n                                    showJumlahKomplain();\r\n\r\n                                    double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);\r\n                                    double komplainKependudukan = Double.parseDouble(String.valueOf(totalData));\r\n                                    double komplainKTP = Double.parseDouble(jumlahKomplainKTP);\r\n                                    double komplainNikah = Double.parseDouble(jumlahKomplainNikah);\r\n                                    double komplainSPPT = Double.parseDouble(jumlahKomplainSPPT);\r\n                                    double komplainTutupJalan = Double.parseDouble(jumlahKomplainTutupJalan);\r\n                                    double TotalPersen2 = (komplainIUMK / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                    double TotalPersen3 = (komplainKependudukan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                    double TotalPersen4 = (komplainKTP / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                    double TotalPersen5 = (komplainNikah / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                    double TotalPersen6 = (komplainSPPT / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                    double TotalPersen7 = (komplainTutupJalan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain IUMK\").child(\"persen\").setValue(String.valueOf(TotalPersen2));\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"persen\").setValue(String.valueOf(TotalPersen3));\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain KTP\").child(\"persen\").setValue(String.valueOf(TotalPersen4));\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"persen\").setValue(String.valueOf(TotalPersen5));\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"persen\").setValue(String.valueOf(TotalPersen6));\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"persen\").setValue(String.valueOf(TotalPersen7));\r\n\r\n                                    mDialog.dismiss();\r\n                                    Toast.makeText(FragmentKependudukan.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n\r\n                                } else {\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"jumlah_komplain\").setValue(\"0\")\r\n                                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                @Override\r\n                                                public void onSuccess(Void aVoid) {\r\n                                                    showJumlahKomplain();\r\n\r\n                                                    double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);\r\n                                                    double komplainKependudukan = 0;\r\n                                                    double komplainKTP = Double.parseDouble(jumlahKomplainKTP);\r\n                                                    double komplainNikah = Double.parseDouble(jumlahKomplainNikah);\r\n                                                    double komplainSPPT = Double.parseDouble(jumlahKomplainSPPT);\r\n                                                    double komplainTutupJalan = Double.parseDouble(jumlahKomplainTutupJalan);\r\n\r\n                                                    if (komplainIUMK == 0 && komplainKTP == 0 && komplainNikah == 0\r\n                                                            && komplainSPPT == 0 && komplainTutupJalan == 0) {\r\n                                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"persen\").setValue(\"0.0\");\r\n                                                        mDialog.dismiss();\r\n                                                        Toast.makeText(FragmentKependudukan.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n\r\n                                                    } else {\r\n                                                        double TotalPersen2 = (komplainIUMK / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                        double TotalPersen3 = (komplainKependudukan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                        double TotalPersen4 = (komplainKTP / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                        double TotalPersen5 = (komplainNikah / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                        double TotalPersen6 = (komplainSPPT / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                        double TotalPersen7 = (komplainTutupJalan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n\r\n                                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain IUMK\").child(\"persen\").setValue(String.valueOf(TotalPersen2));\r\n                                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"persen\").setValue(String.valueOf(TotalPersen3));\r\n                                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain KTP\").child(\"persen\").setValue(String.valueOf(TotalPersen4));\r\n                                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"persen\").setValue(String.valueOf(TotalPersen5));\r\n                                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"persen\").setValue(String.valueOf(TotalPersen6));\r\n                                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"persen\").setValue(String.valueOf(TotalPersen7));\r\n\r\n                                                        mDialog.dismiss();\r\n                                                        Toast.makeText(FragmentKependudukan.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n                                                    }\r\n                                                }\r\n                                            });\r\n                                }\r\n                            }\r\n\r\n                            @Override\r\n                            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onItemClick(int position) {\r\n        Komplain clickedKomplain = mPengaduans.get(position);\r\n        String[] komplainData = {clickedKomplain.getFoto(), clickedKomplain.getBerkas(), clickedKomplain.getNomor(),\r\n                clickedKomplain.getNik(), clickedKomplain.getEmail(), clickedKomplain.getNama(), clickedKomplain.getAlamat(),\r\n                clickedKomplain.getTanggal(), clickedKomplain.getNamalokasi(), String.valueOf(clickedKomplain.getLatitude()),\r\n                String.valueOf(clickedKomplain.getLongitude()), clickedKomplain.getIsi(), clickedKomplain.getKategori(),\r\n                clickedKomplain.getStatus(), clickedKomplain.getJml_lihat(), clickedKomplain.getJml_suka(),\r\n                clickedKomplain.getJml_balas(), clickedKomplain.getKey()};\r\n\r\n        openDetailKomplainKependudukan(komplainData);\r\n    }\r\n\r\n    private void showJumlahKomplain(){\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain IUMK\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainIUMK = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainIUMK = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Kependudukan\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainKependudukan = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainKependudukan = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain KTP\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainKTP = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainKTP = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Nikah\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainNikah = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainNikah = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain SPPT\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainSPPT = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainSPPT = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Tutup Jalan\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainTutupJalan = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainTutupJalan = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentKependudukan.java b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentKependudukan.java
--- a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentKependudukan.java	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentKependudukan.java	(date 1661794927024)
@@ -27,9 +27,12 @@
 import com.google.firebase.database.ValueEventListener;
 import com.google.firebase.storage.FirebaseStorage;
 import com.google.firebase.storage.StorageReference;
+import com.jatmika.admin_e_complaintrangkasbitung.API.API;
+import com.jatmika.admin_e_complaintrangkasbitung.API.APIUtility;
 import com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomplain;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.Komplain;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.PersentaseKomplain;
+import com.jatmika.admin_e_complaintrangkasbitung.SharePref.SharePref;
 
 import org.json.JSONException;
 import org.json.JSONObject;
@@ -37,6 +40,10 @@
 import java.util.ArrayList;
 import java.util.List;
 
+import retrofit2.Call;
+import retrofit2.Callback;
+import retrofit2.Response;
+
 
 /**
  * A simple {@link Fragment} subclass.
@@ -49,6 +56,8 @@
     private List<Komplain> mPengaduans;
     private TextView tvNoData;
     private Context context;
+    private SharePref sharePref;
+    private API apiService;
 
     private void openDetailKomplainKependudukan(String[] data){
         Intent intent = new Intent(getActivity(), DetailKependudukanActivity.class);
@@ -88,6 +97,8 @@
         View view = inflater.inflate(R.layout.fragment_kependudukan, container, false);
 
         context = getActivity().getApplicationContext();
+        apiService = APIUtility.getAPI();
+        sharePref = new SharePref(context);
 
         tvNoData = view.findViewById(R.id.tvNoData);
         RecyclerView mRecyclerView = view.findViewById(R.id.mRecyclerView);
@@ -102,42 +113,49 @@
         mStorage = FirebaseStorage.getInstance();
         mDatabaseRef = FirebaseDatabase.getInstance().getReference("data_komplain");
 
-        mDatabaseRef.addValueEventListener(new ValueEventListener() {
+            Log.i("token", sharePref.getTokenApi());
+        apiService.getComplain("Bearer "+sharePref.getTokenApi(), "Surat Permohonan Administrasi Kependudukan").enqueue(new Callback<List<Komplain>>() {
             @Override
-            public void onDataChange(DataSnapshot dataSnapshot) {
-
-                Query query = mDatabaseRef.orderByChild("kategori").equalTo("Komplain Kependudukan");
-                query.addListenerForSingleValueEvent(new ValueEventListener() {
-                    @Override
-                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
-                        if (dataSnapshot.exists()) {
-                            mPengaduans.clear();
-                            for (DataSnapshot komplainSnapshot : dataSnapshot.getChildren()) {
-                                Komplain upload = komplainSnapshot.getValue(Komplain.class);
-                                upload.setKey(komplainSnapshot.getKey());
-                                mPengaduans.add(upload);
-                            }
-                            mAdapter.notifyDataSetChanged();
-                            tvNoData.setVisibility(View.GONE);
-                        } else {
-                            tvNoData.setVisibility(View.VISIBLE);
-                            tvNoData.setText("Belum Ada Komplain");
-                        }
-                    }
+            public void onResponse(Call<List<Komplain>> call, Response<List<Komplain>> response) {
+                Log.i("response", response.body().toString());
+                for (Komplain komplain : response.body()){
+                    mPengaduans.add(komplain);
+                }
+                mAdapter.notifyDataSetChanged();
+                tvNoData.setVisibility(View.GONE);
+            }
 
-                    @Override
-                    public void onCancelled(@NonNull DatabaseError databaseError) {
-
-                    }
-                });
-            }
-
-            @Override
-            public void onCancelled(DatabaseError databaseError) {
-                Toast.makeText(getActivity(), databaseError.getMessage(), Toast.LENGTH_SHORT).show();
+            @Override
+            public void onFailure(Call<List<Komplain>> call, Throwable t) {
+                Log.i("responseError", t.toString());
             }
         });
-
+//            public void onDataChange(DataSnapshot dataSnapshot) {
+//
+//                Query query = mDatabaseRef.orderByChild("kategori").equalTo("Komplain Kependudukan");
+//                query.addListenerForSingleValueEvent(new ValueEventListener() {
+//                    @Override
+//                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
+//                        if (dataSnapshot.exists()) {
+//                            mPengaduans.clear();
+//                            for (DataSnapshot komplainSnapshot : dataSnapshot.getChildren()) {
+//                                Komplain upload = komplainSnapshot.getValue(Komplain.class);
+//                                upload.setKey(komplainSnapshot.getKey());
+//                                mPengaduans.add(upload);
+//                            }
+//                            mAdapter.notifyDataSetChanged();
+//                            tvNoData.setVisibility(View.GONE);
+//                        } else {
+//                            tvNoData.setVisibility(View.VISIBLE);
+//                            tvNoData.setText("Belum Ada Komplain");
+//                        }
+//                    }
+//
+//                    @Override
+//                    public void onCancelled(@NonNull DatabaseError databaseError) {
+//
+//                    }
+//                });
         return view;
     }
 
Index: app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailSPPTActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.jatmika.admin_e_complaintrangkasbitung;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.app.DownloadManager;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.view.animation.Animation;\r\nimport android.view.animation.AnimationUtils;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.ScrollView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.AuthFailureError;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.JsonObjectRequest;\r\nimport com.google.android.flexbox.FlexboxLayoutManager;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomentar;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterProses;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Komentar;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.MySingleton;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Proses;\r\nimport com.uncopt.android.widget.text.justify.JustifiedTextView;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport static android.os.Environment.DIRECTORY_DOWNLOADS;\r\nimport static android.text.TextUtils.isEmpty;\r\n\r\npublic class DetailSPPTActivity extends AppCompatActivity {\r\n\r\n    final private String serverKey = \"key=\" + \"AIzaSyDL3TGOXPGwfM7iIf_pX4zqD3IbTr-I45w\";\r\n    final private String contentType = \"application/json\";\r\n    final String TAG = \"NOTIFICATION TAG\";\r\n\r\n    String FCM_API = \"https://fcm.googleapis.com/fcm/send\";\r\n    String NOTIFICATION_TITLE;\r\n    String NOTIFICATION_MESSAGE;\r\n    String TOPIC;\r\n    String Penerima;\r\n    String prosesStatus;\r\n\r\n    TextView nomorDetailTextView, namaDetailTextView, emailDetailTextView, alamatDetailTextView,\r\n            tanggalDetailTextView, tvBalas, tvJudul, statusDetailTextView;\r\n    JustifiedTextView isiDetailTextView;\r\n    Button btnTambahKomentar, btnDokumen;\r\n    LinearLayout linear2, layout_kerangka, linearDokumen;\r\n    RelativeLayout relative1, btnBack;\r\n    FloatingActionButton fab;\r\n    Animation fromright;\r\n\r\n    RecyclerView mRecyclerView;\r\n    private RecyclerAdapterKomentar mAdapter;\r\n    private StorageReference mStorageRef;\r\n    FirebaseStorage mStorage;\r\n    DatabaseReference mDatabaseRef;\r\n    private List<Komentar> mKomentar;\r\n    ValueEventListener mDBListener;\r\n\r\n    FirebaseAuth mAuth;\r\n    FirebaseUser firebaseUser;\r\n\r\n    int satuan;\r\n\r\n    private void initializeWidgets(){\r\n        nomorDetailTextView = findViewById(R.id.nomorTextView);\r\n        namaDetailTextView = findViewById(R.id.namaTextView);\r\n        emailDetailTextView = findViewById(R.id.emailTextView);\r\n        alamatDetailTextView = findViewById(R.id.alamatTextView);\r\n        tanggalDetailTextView = findViewById(R.id.tanggalTextView);\r\n        isiDetailTextView = findViewById(R.id.isiTextView);\r\n        statusDetailTextView = findViewById(R.id.statusTextView);\r\n        btnDokumen = findViewById(R.id.btnDokumen);\r\n        linearDokumen = findViewById(R.id.linearLayout);\r\n        relative1 = findViewById(R.id.relative1);\r\n        btnTambahKomentar = findViewById(R.id.btnTambahKomentar);\r\n        linear2 = findViewById(R.id.linear2);\r\n        layout_kerangka = findViewById(R.id.layout_kerangka);\r\n        tvBalas = findViewById(R.id.tvBalas);\r\n        fab = findViewById(R.id.fab);\r\n        tvJudul = findViewById(R.id.tvJudul);\r\n        btnBack = findViewById(R.id.btnBack);\r\n    }\r\n\r\n    String image, berkas, nomor, nik, email, nama, alamat, tanggal, namalokasi, latitude, longitude, isi, kategori, status,\r\n            jml_lihat, jml_suka, jml_balas, getKey;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.app_bar_detail_sppt);\r\n\r\n        Intent i = this.getIntent();\r\n        image = i.getExtras().getString(\"IMAGE_KEY\");\r\n        berkas = i.getExtras().getString(\"BERKAS_KEY\");\r\n        nomor = i.getExtras().getString(\"NOMOR_KEY\");\r\n        nik = i.getExtras().getString(\"NIK_KEY\");\r\n        email = i.getExtras().getString(\"EMAIL_KEY\");\r\n        nama = i.getExtras().getString(\"NAMA_KEY\");\r\n        alamat = i.getExtras().getString(\"ALAMAT_KEY\");\r\n        tanggal = i.getExtras().getString(\"TANGGAL_KEY\");\r\n        namalokasi = i.getExtras().getString(\"NAMALOKASI_KEY\");\r\n        latitude = i.getExtras().getString(\"LATITUDE_KEY\");\r\n        longitude = i.getExtras().getString(\"LONGITUDE_KEY\");\r\n        isi = i.getExtras().getString(\"ISI_KEY\");\r\n        kategori = i.getExtras().getString(\"KATEGORI_KEY\");\r\n        status = i.getExtras().getString(\"STATUS_KEY\");\r\n        jml_lihat = i.getExtras().getString(\"JML_LIHAT_KEY\");\r\n        jml_suka = i.getExtras().getString(\"JML_SUKA_KEY\");\r\n        jml_balas = i.getExtras().getString(\"JML_BALAS_KEY\");\r\n        getKey = i.getExtras().getString(\"GETPRIMARY_KEY\");\r\n\r\n        initializeWidgets();\r\n        displayKomentar();\r\n\r\n        Toolbar toolbar = findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        firebaseUser = mAuth.getCurrentUser();\r\n\r\n        fromright = AnimationUtils.loadAnimation(this, R.anim.fromright);\r\n        tvJudul.startAnimation(fromright);\r\n        linear2.setVisibility(View.GONE);\r\n\r\n        if (berkas.equals(\"\")){\r\n            linearDokumen.setVisibility(View.GONE);\r\n        }\r\n\r\n        nomorDetailTextView.setText(nomor);\r\n        emailDetailTextView.setText(email);\r\n        namaDetailTextView.setText(nama);\r\n        alamatDetailTextView.setText(alamat);\r\n        tanggalDetailTextView.setText(tanggal);\r\n        isiDetailTextView.setText(\"''\"+isi+\"''\");\r\n        statusDetailTextView.setText(status);\r\n\r\n        satuan = 1;\r\n        int jml_lihatlama = Integer.parseInt(jml_lihat);\r\n        final int total = satuan + jml_lihatlama;\r\n        FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_lihat\").setValue(String.valueOf(total));\r\n\r\n        relative1.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if (status.equals(\"Menunggu Diproses\")){\r\n                    AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailSPPTActivity.this);\r\n                    View mView = getLayoutInflater().inflate(R.layout.show_menunggu, null);\r\n                    TextView btnClose = mView.findViewById(R.id.btnClose);\r\n                    TextView tvNomor = mView.findViewById(R.id.tvNomor);\r\n                    RelativeLayout relative1 = mView.findViewById(R.id.relative1);\r\n\r\n                    mBuilder.setView(mView);\r\n                    final AlertDialog mDialog = mBuilder.create();\r\n                    mDialog.show();\r\n\r\n                    tvNomor.setText(\"No : \"+nomor);\r\n                    btnClose.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n                        }\r\n                    });\r\n\r\n                    relative1.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n\r\n                            CharSequence[] item = {\"Dalam Proses\", \"Selesai\"};\r\n                            AlertDialog.Builder request = new AlertDialog.Builder(DetailSPPTActivity.this)\r\n                                    .setTitle(\"Pilih Status Komplain\")\r\n                                    .setItems(item, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialog, int i) {\r\n                                            switch (i){\r\n                                                case 0:\r\n                                                    prosesStatus = \"Dalam Proses\";\r\n                                                    Intent intent = new Intent(DetailSPPTActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle = new Bundle();\r\n                                                    bundle.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle.putString(\"status\", status);\r\n                                                    bundle.putString(\"getKey\", getKey);\r\n                                                    intent.putExtras(bundle);\r\n                                                    startActivity(intent);\r\n                                                    break;\r\n                                                case 1:\r\n                                                    prosesStatus = \"Selesai\";\r\n                                                    Intent intent2 = new Intent(DetailSPPTActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle2 = new Bundle();\r\n                                                    bundle2.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle2.putString(\"status\", status);\r\n                                                    bundle2.putString(\"getKey\", getKey);\r\n                                                    intent2.putExtras(bundle2);\r\n                                                    startActivity(intent2);\r\n                                                    break;\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            request.create();\r\n                            request.show();\r\n                        }\r\n                    });\r\n\r\n                } else {\r\n                    AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailSPPTActivity.this);\r\n                    View mView = getLayoutInflater().inflate(R.layout.show_proses, null);\r\n\r\n                    TextView btnClose = mView.findViewById(R.id.btnClose);\r\n                    TextView tvNomor = mView.findViewById(R.id.tvNomor);\r\n                    TextView tvStatus = mView.findViewById(R.id.tvStatus);\r\n                    RelativeLayout relative2 = mView.findViewById(R.id.relative1);\r\n                    RecyclerView mRecyclerView = mView.findViewById(R.id.mRecyclerView);\r\n                    final RecyclerAdapterProses mAdapter;\r\n                    DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"status_komplain\");\r\n                    final List<Proses> mProsess;\r\n\r\n                    mBuilder.setView(mView);\r\n                    final AlertDialog mDialog = mBuilder.create();\r\n                    mDialog.show();\r\n\r\n                    mRecyclerView.setHasFixedSize(true);\r\n                    mRecyclerView.setLayoutManager(new LinearLayoutManager(DetailSPPTActivity.this));\r\n\r\n                    mProsess = new ArrayList<>();\r\n                    mAdapter = new RecyclerAdapterProses(DetailSPPTActivity.this, mProsess);\r\n                    mRecyclerView.setAdapter(mAdapter);\r\n\r\n                    mDBListener = databaseReference.addValueEventListener(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                            mProsess.clear();\r\n                            for (DataSnapshot kandidatSnapshot : dataSnapshot.getChildren()) {\r\n                                Proses upload = kandidatSnapshot.getValue(Proses.class);\r\n                                upload.setKey(kandidatSnapshot.getKey());\r\n                                mProsess.add(upload);\r\n                            }\r\n                            mAdapter.notifyDataSetChanged();\r\n                        }\r\n\r\n                        @Override\r\n                        public void onCancelled(DatabaseError databaseError) {\r\n                            Toast.makeText(DetailSPPTActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n\r\n                    tvStatus.setText(status);\r\n                    tvNomor.setText(\"No : \"+nomor);\r\n                    btnClose.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n                        }\r\n                    });\r\n\r\n                    relative2.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n\r\n                            CharSequence[] item = {\"Dalam Proses\", \"Selesai\"};\r\n                            AlertDialog.Builder request = new AlertDialog.Builder(DetailSPPTActivity.this)\r\n                                    .setTitle(\"Pilih Status Komplain\")\r\n                                    .setItems(item, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialog, int i) {\r\n                                            switch (i){\r\n                                                case 0:\r\n                                                    prosesStatus = \"Dalam Proses\";\r\n                                                    Intent intent = new Intent(DetailSPPTActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle = new Bundle();\r\n                                                    bundle.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle.putString(\"status\", status);\r\n                                                    bundle.putString(\"getKey\", getKey);\r\n                                                    intent.putExtras(bundle);\r\n                                                    startActivity(intent);\r\n                                                    break;\r\n                                                case 1:\r\n                                                    prosesStatus = \"Selesai\";\r\n                                                    Intent intent2 = new Intent(DetailSPPTActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle2 = new Bundle();\r\n                                                    bundle2.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle2.putString(\"status\", status);\r\n                                                    bundle2.putString(\"getKey\", getKey);\r\n                                                    intent2.putExtras(bundle2);\r\n                                                    startActivity(intent2);\r\n                                                    break;\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            request.create();\r\n                            request.show();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        btnTambahKomentar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                final ScrollView scrollView = findViewById(R.id.scrollView);\r\n                btnTambahKomentar.setVisibility(View.GONE);\r\n                scrollView.postDelayed(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                        scrollView.isSmoothScrollingEnabled(); }\r\n                }, 200);\r\n                linear2.setVisibility(View.VISIBLE);\r\n            }\r\n        });\r\n\r\n        fab.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                final EditText input = findViewById(R.id.input);\r\n                final ScrollView scrollView = findViewById(R.id.scrollView);\r\n\r\n                AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailSPPTActivity.this);\r\n                View mView = getLayoutInflater().inflate(R.layout.show_loading, null);\r\n\r\n                mBuilder.setView(mView);\r\n                mBuilder.setCancelable(false);\r\n                final AlertDialog mDialog = mBuilder.create();\r\n                mDialog.show();\r\n\r\n                if (isEmpty(input.getText().toString())) {\r\n                    Toast.makeText(DetailSPPTActivity.this, \"Balasan tidak boleh kosong!\",\r\n                            Toast.LENGTH_SHORT).show();\r\n                    mDialog.dismiss();\r\n\r\n                } else {\r\n                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey)\r\n                            .child(\"balasan\").push().setValue(new Komentar(input.getText().toString(),\r\n                            namaDetailTextView.getText().toString(), firebaseUser.getEmail())).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) { FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"balasan\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                if (dataSnapshot.exists()) {\r\n                                    long totalBalas;\r\n                                    totalBalas = (dataSnapshot.getChildrenCount());\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_balas\").setValue(String.valueOf(totalBalas))\r\n                                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                @Override\r\n                                                public void onSuccess(Void aVoid) {\r\n                                                    Penerima = emailDetailTextView.getText().toString();\r\n                                                    Penerima = Penerima.replaceAll(\"[@.-]\", \"\");\r\n\r\n                                                    TOPIC = \"/topics/\"+Penerima;\r\n                                                    NOTIFICATION_TITLE = \"Balasan Komplain Dari Admin\";\r\n                                                    NOTIFICATION_MESSAGE = input.getText().toString();\r\n\r\n                                                    JSONObject notification = new JSONObject();\r\n                                                    JSONObject notifcationBody = new JSONObject();\r\n                                                    try {\r\n                                                        notifcationBody.put(\"title\", NOTIFICATION_TITLE);\r\n                                                        notifcationBody.put(\"message\", NOTIFICATION_MESSAGE);\r\n\r\n                                                        notification.put(\"to\", TOPIC);\r\n                                                        notification.put(\"data\", notifcationBody);\r\n                                                    } catch (JSONException e) {\r\n                                                        Log.e(TAG, \"onCreate: \" + e.getMessage() );\r\n                                                    }\r\n                                                    sendNotification(notification);\r\n\r\n                                                    linear2.setVisibility(View.GONE);\r\n                                                    input.setText(\"\");\r\n                                                    btnTambahKomentar.setVisibility(View.VISIBLE);\r\n                                                    mDialog.dismiss();\r\n\r\n                                                    scrollView.postDelayed(new Runnable() {\r\n                                                        @Override\r\n                                                        public void run() {\r\n                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                                                            scrollView.isSmoothScrollingEnabled();\r\n                                                        }\r\n                                                    }, 200);\r\n                                                }\r\n                                            });\r\n                                } else {\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_balas\").setValue(\"0\")\r\n                                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                @Override\r\n                                                public void onSuccess(Void aVoid) {\r\n                                                    Penerima = emailDetailTextView.getText().toString();\r\n                                                    Penerima = Penerima.replaceAll(\"[@.-]\", \"\");\r\n\r\n                                                    TOPIC = \"/topics/\"+Penerima;\r\n                                                    NOTIFICATION_TITLE = \"Balasan Komplain Dari Admin\";\r\n                                                    NOTIFICATION_MESSAGE = input.getText().toString();\r\n\r\n                                                    JSONObject notification = new JSONObject();\r\n                                                    JSONObject notifcationBody = new JSONObject();\r\n                                                    try {\r\n                                                        notifcationBody.put(\"title\", NOTIFICATION_TITLE);\r\n                                                        notifcationBody.put(\"message\", NOTIFICATION_MESSAGE);\r\n\r\n                                                        notification.put(\"to\", TOPIC);\r\n                                                        notification.put(\"data\", notifcationBody);\r\n                                                    } catch (JSONException e) {\r\n                                                        Log.e(TAG, \"onCreate: \" + e.getMessage() );\r\n                                                    }\r\n                                                    sendNotification(notification);\r\n\r\n                                                    linear2.setVisibility(View.GONE);\r\n                                                    input.setText(\"\");\r\n                                                    btnTambahKomentar.setVisibility(View.VISIBLE);\r\n                                                    mDialog.dismiss();\r\n\r\n                                                    scrollView.postDelayed(new Runnable() {\r\n                                                        @Override\r\n                                                        public void run() {\r\n                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                                                            scrollView.isSmoothScrollingEnabled();\r\n                                                        }\r\n                                                    }, 200);\r\n                                                }\r\n                                            });\r\n                                }\r\n                            }\r\n                            @Override\r\n                            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                            }\r\n                        });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        btnBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                finish();\r\n            }\r\n        });\r\n\r\n        btnDokumen.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                downloadFile(DetailSPPTActivity.this, \"dokumen-sppt-\"+nama, \".docx\", DIRECTORY_DOWNLOADS, berkas);\r\n            }\r\n        });\r\n    }\r\n\r\n    public void downloadFile(Context context, String fileName, String fileExtension, String downloadDirectory, String url){\r\n        DownloadManager downloadManager = (DownloadManager) context.getSystemService(Context.DOWNLOAD_SERVICE);\r\n        Uri uri = Uri.parse(url);\r\n        DownloadManager.Request request = new DownloadManager.Request(uri);\r\n\r\n        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\r\n        request.setVisibleInDownloadsUi(true);\r\n        request.setDestinationInExternalFilesDir(context, downloadDirectory, fileName + fileExtension);\r\n        downloadManager.enqueue(request);\r\n    }\r\n\r\n    private void sendNotification(JSONObject notification) {\r\n        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(FCM_API, notification,\r\n                new Response.Listener<JSONObject>() {\r\n                    @Override\r\n                    public void onResponse(JSONObject response) {\r\n                        Log.i(TAG, \"onResponse: \" + response.toString());\r\n                    }\r\n                },\r\n                new Response.ErrorListener() {\r\n                    @Override\r\n                    public void onErrorResponse(VolleyError error) {\r\n                        Toast.makeText(DetailSPPTActivity.this, \"Request error!\", Toast.LENGTH_LONG).show();\r\n                        Log.i(TAG, \"onErrorResponse: Didn't work\");\r\n                    }\r\n                }){\r\n            @Override\r\n            public Map<String, String> getHeaders() throws AuthFailureError {\r\n                Map<String, String> params = new HashMap<>();\r\n                params.put(\"Authorization\", serverKey);\r\n                params.put(\"Content-Type\", contentType);\r\n                return params;\r\n            }\r\n        };\r\n        MySingleton.getInstance(getApplicationContext()).addToRequestQueue(jsonObjectRequest);\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        finish();\r\n    }\r\n\r\n    private void displayKomentar() {\r\n        mRecyclerView = findViewById(R.id.list_of_komentar);\r\n        RecyclerView.LayoutManager layoutManager = new FlexboxLayoutManager(this);\r\n        mRecyclerView.setLayoutManager(layoutManager);\r\n\r\n        mKomentar = new ArrayList<>();\r\n        mAdapter = new RecyclerAdapterKomentar (DetailSPPTActivity.this, mKomentar);\r\n        mRecyclerView.setAdapter(mAdapter);\r\n\r\n        mStorage = FirebaseStorage.getInstance();\r\n        mStorageRef = FirebaseStorage.getInstance().getReference(\"foto_komentar\");\r\n        mDatabaseRef = FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"balasan\");\r\n        mDBListener = mDatabaseRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                if (dataSnapshot.exists()) {\r\n                    mKomentar.clear();\r\n\r\n                    for (DataSnapshot komentarSnapshot : dataSnapshot.getChildren()) {\r\n                        Komentar upload = komentarSnapshot.getValue(Komentar.class);\r\n                        upload.setKey(komentarSnapshot.getKey());\r\n                        mKomentar.add(upload);\r\n                    }\r\n                    mAdapter.notifyDataSetChanged();\r\n                    tvBalas.setText(\"Balasan Komplain\");\r\n                    layout_kerangka.setVisibility(View.VISIBLE);\r\n\r\n                } else{\r\n                    tvBalas.setText(\"Belum Ada Balasan\");\r\n                    layout_kerangka.setVisibility(View.VISIBLE);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError databaseError) {\r\n                Toast.makeText(DetailSPPTActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailSPPTActivity.java b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailSPPTActivity.java
--- a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailSPPTActivity.java	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailSPPTActivity.java	(date 1661833334954)
@@ -41,10 +41,13 @@
 import com.google.firebase.database.ValueEventListener;
 import com.google.firebase.storage.FirebaseStorage;
 import com.google.firebase.storage.StorageReference;
+import com.jatmika.admin_e_complaintrangkasbitung.API.API;
+import com.jatmika.admin_e_complaintrangkasbitung.API.APIUtility;
 import com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomentar;
 import com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterProses;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.Komentar;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.MySingleton;
+import com.jatmika.admin_e_complaintrangkasbitung.SharePref.SharePref;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.Proses;
 import com.uncopt.android.widget.text.justify.JustifiedTextView;
 
@@ -56,6 +59,9 @@
 import java.util.List;
 import java.util.Map;
 
+import retrofit2.Call;
+import retrofit2.Callback;
+
 import static android.os.Environment.DIRECTORY_DOWNLOADS;
 import static android.text.TextUtils.isEmpty;
 
@@ -91,6 +97,8 @@
 
     FirebaseAuth mAuth;
     FirebaseUser firebaseUser;
+    private API apiService;
+    private SharePref sharePref;
 
     int satuan;
 
@@ -142,6 +150,9 @@
         jml_balas = i.getExtras().getString("JML_BALAS_KEY");
         getKey = i.getExtras().getString("GETPRIMARY_KEY");
 
+        apiService = APIUtility.getAPI();
+        sharePref = new SharePref(this);
+
         initializeWidgets();
         displayKomentar();
 
@@ -168,9 +179,9 @@
         statusDetailTextView.setText(status);
 
         satuan = 1;
-        int jml_lihatlama = Integer.parseInt(jml_lihat);
+        int jml_lihatlama = 0;
         final int total = satuan + jml_lihatlama;
-        FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_lihat").setValue(String.valueOf(total));
+//        FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_lihat").setValue(String.valueOf(total));
 
         relative1.setOnClickListener(new View.OnClickListener() {
             @Override
@@ -257,26 +268,6 @@
                     mProsess = new ArrayList<>();
                     mAdapter = new RecyclerAdapterProses(DetailSPPTActivity.this, mProsess);
                     mRecyclerView.setAdapter(mAdapter);
-
-                    mDBListener = databaseReference.addValueEventListener(new ValueEventListener() {
-                        @Override
-                        public void onDataChange(DataSnapshot dataSnapshot) {
-
-                            mProsess.clear();
-                            for (DataSnapshot kandidatSnapshot : dataSnapshot.getChildren()) {
-                                Proses upload = kandidatSnapshot.getValue(Proses.class);
-                                upload.setKey(kandidatSnapshot.getKey());
-                                mProsess.add(upload);
-                            }
-                            mAdapter.notifyDataSetChanged();
-                        }
-
-                        @Override
-                        public void onCancelled(DatabaseError databaseError) {
-                            Toast.makeText(DetailSPPTActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();
-                        }
-                    });
-
                     tvStatus.setText(status);
                     tvNomor.setText("No : "+nomor);
                     btnClose.setOnClickListener(new View.OnClickListener() {
@@ -364,100 +355,28 @@
                     mDialog.dismiss();
 
                 } else {
-                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey)
-                            .child("balasan").push().setValue(new Komentar(input.getText().toString(),
-                            namaDetailTextView.getText().toString(), firebaseUser.getEmail())).addOnSuccessListener(new OnSuccessListener<Void>() {
+                    apiService.addComentar("Bearer "+sharePref.getTokenApi(), getKey, input.getText().toString()).enqueue(new Callback<Komentar>() {
                         @Override
-                        public void onSuccess(Void aVoid) { FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("balasan").addListenerForSingleValueEvent(new ValueEventListener() {
-                            @Override
-                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
-                                if (dataSnapshot.exists()) {
-                                    long totalBalas;
-                                    totalBalas = (dataSnapshot.getChildrenCount());
-                                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_balas").setValue(String.valueOf(totalBalas))
-                                            .addOnSuccessListener(new OnSuccessListener<Void>() {
-                                                @Override
-                                                public void onSuccess(Void aVoid) {
-                                                    Penerima = emailDetailTextView.getText().toString();
-                                                    Penerima = Penerima.replaceAll("[@.-]", "");
-
-                                                    TOPIC = "/topics/"+Penerima;
-                                                    NOTIFICATION_TITLE = "Balasan Komplain Dari Admin";
-                                                    NOTIFICATION_MESSAGE = input.getText().toString();
-
-                                                    JSONObject notification = new JSONObject();
-                                                    JSONObject notifcationBody = new JSONObject();
-                                                    try {
-                                                        notifcationBody.put("title", NOTIFICATION_TITLE);
-                                                        notifcationBody.put("message", NOTIFICATION_MESSAGE);
-
-                                                        notification.put("to", TOPIC);
-                                                        notification.put("data", notifcationBody);
-                                                    } catch (JSONException e) {
-                                                        Log.e(TAG, "onCreate: " + e.getMessage() );
-                                                    }
-                                                    sendNotification(notification);
-
-                                                    linear2.setVisibility(View.GONE);
-                                                    input.setText("");
-                                                    btnTambahKomentar.setVisibility(View.VISIBLE);
-                                                    mDialog.dismiss();
-
-                                                    scrollView.postDelayed(new Runnable() {
-                                                        @Override
-                                                        public void run() {
-                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);
-                                                            scrollView.isSmoothScrollingEnabled();
-                                                        }
-                                                    }, 200);
-                                                }
-                                            });
-                                } else {
-                                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_balas").setValue("0")
-                                            .addOnSuccessListener(new OnSuccessListener<Void>() {
-                                                @Override
-                                                public void onSuccess(Void aVoid) {
-                                                    Penerima = emailDetailTextView.getText().toString();
-                                                    Penerima = Penerima.replaceAll("[@.-]", "");
-
-                                                    TOPIC = "/topics/"+Penerima;
-                                                    NOTIFICATION_TITLE = "Balasan Komplain Dari Admin";
-                                                    NOTIFICATION_MESSAGE = input.getText().toString();
-
-                                                    JSONObject notification = new JSONObject();
-                                                    JSONObject notifcationBody = new JSONObject();
-                                                    try {
-                                                        notifcationBody.put("title", NOTIFICATION_TITLE);
-                                                        notifcationBody.put("message", NOTIFICATION_MESSAGE);
-
-                                                        notification.put("to", TOPIC);
-                                                        notification.put("data", notifcationBody);
-                                                    } catch (JSONException e) {
-                                                        Log.e(TAG, "onCreate: " + e.getMessage() );
-                                                    }
-                                                    sendNotification(notification);
-
-                                                    linear2.setVisibility(View.GONE);
-                                                    input.setText("");
-                                                    btnTambahKomentar.setVisibility(View.VISIBLE);
-                                                    mDialog.dismiss();
+                        public void onResponse(Call<Komentar> call, retrofit2.Response<Komentar> response) {
+                            Log.i("responseAPI", response.body().toString());
+                            linear2.setVisibility(View.GONE);
+                            input.setText("");
+                            btnTambahKomentar.setVisibility(View.VISIBLE);
+                            mDialog.dismiss();
 
-                                                    scrollView.postDelayed(new Runnable() {
-                                                        @Override
-                                                        public void run() {
-                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);
-                                                            scrollView.isSmoothScrollingEnabled();
-                                                        }
-                                                    }, 200);
-                                                }
-                                            });
-                                }
-                            }
-                            @Override
-                            public void onCancelled(@NonNull DatabaseError databaseError) {
-
-                            }
-                        });
+                            scrollView.postDelayed(new Runnable() {
+                                @Override
+                                public void run() {
+                                    scrollView.fullScroll(ScrollView.FOCUS_DOWN);
+                                    scrollView.isSmoothScrollingEnabled();
+                                }
+                            }, 200);
+                            displayKomentar();
+                        }
+
+                        @Override
+                        public void onFailure(Call<Komentar> call, Throwable t) {
+                            Log.i("responseAPI", t.toString());
                         }
                     });
                 }
@@ -530,20 +449,14 @@
         mAdapter = new RecyclerAdapterKomentar (DetailSPPTActivity.this, mKomentar);
         mRecyclerView.setAdapter(mAdapter);
 
-        mStorage = FirebaseStorage.getInstance();
-        mStorageRef = FirebaseStorage.getInstance().getReference("foto_komentar");
-        mDatabaseRef = FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("balasan");
-        mDBListener = mDatabaseRef.addValueEventListener(new ValueEventListener() {
+        Log.i("keyKomplain", getKey);
+        apiService.getComentar("Bearer "+sharePref.getTokenApi(), getKey).enqueue(new Callback<List<Komentar>>() {
             @Override
-            public void onDataChange(DataSnapshot dataSnapshot) {
-
-                if (dataSnapshot.exists()) {
-                    mKomentar.clear();
-
-                    for (DataSnapshot komentarSnapshot : dataSnapshot.getChildren()) {
-                        Komentar upload = komentarSnapshot.getValue(Komentar.class);
-                        upload.setKey(komentarSnapshot.getKey());
-                        mKomentar.add(upload);
+            public void onResponse(Call<List<Komentar>> call, retrofit2.Response<List<Komentar>> response) {
+                Log.i("response", "code"+response.code());
+                if(response.code() == 200){
+                    for (Komentar komentar : response.body()){
+                        mKomentar.add(komentar);
                     }
                     mAdapter.notifyDataSetChanged();
                     tvBalas.setText("Balasan Komplain");
@@ -556,8 +469,8 @@
             }
 
             @Override
-            public void onCancelled(DatabaseError databaseError) {
-                Toast.makeText(DetailSPPTActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();
+            public void onFailure(Call<List<Komentar>> call, Throwable t) {
+                Log.i("errorResponse", t.toString());
             }
         });
     }
Index: app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailKependudukanActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.jatmika.admin_e_complaintrangkasbitung;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.view.animation.Animation;\r\nimport android.view.animation.AnimationUtils;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.ScrollView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.AuthFailureError;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.JsonObjectRequest;\r\nimport com.bumptech.glide.Glide;\r\nimport com.google.android.flexbox.FlexboxLayoutManager;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomentar;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterProses;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Komentar;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.MySingleton;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Proses;\r\nimport com.uncopt.android.widget.text.justify.JustifiedTextView;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport static android.text.TextUtils.isEmpty;\r\n\r\npublic class DetailKependudukanActivity extends AppCompatActivity {\r\n\r\n    final private String serverKey = \"key=\" + \"AIzaSyDL3TGOXPGwfM7iIf_pX4zqD3IbTr-I45w\";\r\n    final private String contentType = \"application/json\";\r\n    final String TAG = \"NOTIFICATION TAG\";\r\n\r\n    String FCM_API = \"https://fcm.googleapis.com/fcm/send\";\r\n    String NOTIFICATION_TITLE;\r\n    String NOTIFICATION_MESSAGE;\r\n    String TOPIC;\r\n    String Penerima;\r\n    String prosesStatus;\r\n\r\n    TextView nomorDetailTextView, namaDetailTextView, emailDetailTextView, alamatDetailTextView,\r\n            tanggalDetailTextView, tvBalas, tvJudul, statusDetailtextView;\r\n    JustifiedTextView isiDetailTextView;\r\n    ImageView fotoDetailImageView;\r\n    Button btnTambahKomentar;\r\n    LinearLayout linear2, layout_kerangka;\r\n    RelativeLayout relative1, btnBack;\r\n    FloatingActionButton fab;\r\n    Animation fromright;\r\n\r\n    RecyclerView mRecyclerView;\r\n    private RecyclerAdapterKomentar mAdapter;\r\n    private StorageReference mStorageRef;\r\n    FirebaseStorage mStorage;\r\n    DatabaseReference mDatabaseRef, databaseReference;\r\n    private List<Komentar> mKomentar;\r\n    ValueEventListener mDBListener;\r\n\r\n    FirebaseAuth mAuth;\r\n    FirebaseUser firebaseUser;\r\n\r\n    int satuan;\r\n\r\n    private void initializeWidgets(){\r\n        nomorDetailTextView = findViewById(R.id.nomorTextView);\r\n        namaDetailTextView = findViewById(R.id.namaTextView);\r\n        emailDetailTextView = findViewById(R.id.emailTextView);\r\n        alamatDetailTextView = findViewById(R.id.alamatTextView);\r\n        tanggalDetailTextView = findViewById(R.id.tanggalTextView);\r\n        isiDetailTextView = findViewById(R.id.isiTextView);\r\n        statusDetailtextView = findViewById(R.id.statusTextView);\r\n        fotoDetailImageView = findViewById(R.id.fotoDetailImageView);\r\n        relative1 = findViewById(R.id.relative1);\r\n        btnTambahKomentar = findViewById(R.id.btnTambahKomentar);\r\n        linear2 = findViewById(R.id.linear2);\r\n        layout_kerangka = findViewById(R.id.layout_kerangka);\r\n        tvBalas = findViewById(R.id.tvBalas);\r\n        fab = findViewById(R.id.fab);\r\n        tvJudul = findViewById(R.id.tvJudul);\r\n        btnBack = findViewById(R.id.btnBack);\r\n    }\r\n\r\n    String image, berkas, nomor, nik, email, nama, alamat, tanggal, namalokasi, latitude, longitude, isi, kategori, status,\r\n            jml_lihat, jml_suka, jml_balas, getKey;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.app_bar_detail_kependudukan);\r\n\r\n        Intent i = this.getIntent();\r\n        image = i.getExtras().getString(\"IMAGE_KEY\");\r\n        berkas = i.getExtras().getString(\"BERKAS_KEY\");\r\n        nomor = i.getExtras().getString(\"NOMOR_KEY\");\r\n        nik = i.getExtras().getString(\"NIK_KEY\");\r\n        email = i.getExtras().getString(\"EMAIL_KEY\");\r\n        nama = i.getExtras().getString(\"NAMA_KEY\");\r\n        alamat = i.getExtras().getString(\"ALAMAT_KEY\");\r\n        tanggal = i.getExtras().getString(\"TANGGAL_KEY\");\r\n        namalokasi = i.getExtras().getString(\"NAMALOKASI_KEY\");\r\n        latitude = i.getExtras().getString(\"LATITUDE_KEY\");\r\n        longitude = i.getExtras().getString(\"LONGITUDE_KEY\");\r\n        isi = i.getExtras().getString(\"ISI_KEY\");\r\n        kategori = i.getExtras().getString(\"KATEGORI_KEY\");\r\n        status = i.getExtras().getString(\"STATUS_KEY\");\r\n        jml_lihat = i.getExtras().getString(\"JML_LIHAT_KEY\");\r\n        jml_suka = i.getExtras().getString(\"JML_SUKA_KEY\");\r\n        jml_balas = i.getExtras().getString(\"JML_BALAS_KEY\");\r\n        getKey = i.getExtras().getString(\"GETPRIMARY_KEY\");\r\n\r\n        initializeWidgets();\r\n        displayKomentar();\r\n\r\n        Toolbar toolbar = findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        firebaseUser = mAuth.getCurrentUser();\r\n\r\n        fromright = AnimationUtils.loadAnimation(this, R.anim.fromright);\r\n        tvJudul.startAnimation(fromright);\r\n        linear2.setVisibility(View.GONE);\r\n\r\n        nomorDetailTextView.setText(nomor);\r\n        emailDetailTextView.setText(email);\r\n        namaDetailTextView.setText(nama);\r\n        alamatDetailTextView.setText(alamat);\r\n        tanggalDetailTextView.setText(tanggal);\r\n        isiDetailTextView.setText(\"''\"+isi+\"''\");\r\n        statusDetailtextView.setText(status);\r\n        Glide.with(this)\r\n                .load(image)\r\n                .into(fotoDetailImageView);\r\n\r\n        fotoDetailImageView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailKependudukanActivity.this);\r\n                View mView = getLayoutInflater().inflate(R.layout.show_image, null);\r\n                ImageView imageView = mView.findViewById(R.id.imageView);\r\n                TextView btnClose = mView.findViewById(R.id.btnClose);\r\n\r\n                Glide.with(DetailKependudukanActivity.this)\r\n                        .load(image)\r\n                        .into(imageView);\r\n\r\n                mBuilder.setView(mView);\r\n                final AlertDialog mDialog = mBuilder.create();\r\n                mDialog.show();\r\n\r\n                btnClose.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        mDialog.dismiss();\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        satuan = 1;\r\n        int jml_lihatlama = Integer.parseInt(jml_lihat);\r\n        final int total = satuan + jml_lihatlama;\r\n        FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_lihat\").setValue(String.valueOf(total));\r\n\r\n        relative1.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if (status.equals(\"Menunggu Diproses\")){\r\n                    AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailKependudukanActivity.this);\r\n                    View mView = getLayoutInflater().inflate(R.layout.show_menunggu, null);\r\n                    TextView btnClose = mView.findViewById(R.id.btnClose);\r\n                    TextView tvNomor = mView.findViewById(R.id.tvNomor);\r\n                    RelativeLayout relative1 = mView.findViewById(R.id.relative1);\r\n\r\n                    mBuilder.setView(mView);\r\n                    final AlertDialog mDialog = mBuilder.create();\r\n                    mDialog.show();\r\n\r\n                    tvNomor.setText(\"No : \"+nomor);\r\n                    btnClose.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n                        }\r\n                    });\r\n\r\n                    relative1.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n\r\n                            CharSequence[] item = {\"Dalam Proses\", \"Selesai\"};\r\n                            AlertDialog.Builder request = new AlertDialog.Builder(DetailKependudukanActivity.this)\r\n                                    .setTitle(\"Pilih Status Komplain\")\r\n                                    .setItems(item, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialog, int i) {\r\n                                            switch (i){\r\n                                                case 0:\r\n                                                    prosesStatus = \"Dalam Proses\";\r\n                                                    Intent intent = new Intent(DetailKependudukanActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle = new Bundle();\r\n                                                    bundle.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle.putString(\"status\", status);\r\n                                                    bundle.putString(\"getKey\", getKey);\r\n                                                    intent.putExtras(bundle);\r\n                                                    startActivity(intent);\r\n                                                    break;\r\n                                                case 1:\r\n                                                    prosesStatus = \"Selesai\";\r\n                                                    Intent intent2 = new Intent(DetailKependudukanActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle2 = new Bundle();\r\n                                                    bundle2.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle2.putString(\"status\", status);\r\n                                                    bundle2.putString(\"getKey\", getKey);\r\n                                                    intent2.putExtras(bundle2);\r\n                                                    startActivity(intent2);\r\n                                                    break;\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            request.create();\r\n                            request.show();\r\n                        }\r\n                    });\r\n\r\n                } else {\r\n                    AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailKependudukanActivity.this);\r\n                    View mView = getLayoutInflater().inflate(R.layout.show_proses, null);\r\n\r\n                    TextView btnClose = mView.findViewById(R.id.btnClose);\r\n                    TextView tvNomor = mView.findViewById(R.id.tvNomor);\r\n                    TextView tvStatus = mView.findViewById(R.id.tvStatus);\r\n                    RelativeLayout relative2 = mView.findViewById(R.id.relative1);\r\n                    RecyclerView mRecyclerView = mView.findViewById(R.id.mRecyclerView);\r\n                    final RecyclerAdapterProses mAdapter;\r\n                    DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"status_komplain\");\r\n                    final List<Proses> mProsess;\r\n\r\n                    mBuilder.setView(mView);\r\n                    final AlertDialog mDialog = mBuilder.create();\r\n                    mDialog.show();\r\n\r\n                    mRecyclerView.setHasFixedSize(true);\r\n                    mRecyclerView.setLayoutManager(new LinearLayoutManager(DetailKependudukanActivity.this));\r\n\r\n                    mProsess = new ArrayList<>();\r\n                    mAdapter = new RecyclerAdapterProses(DetailKependudukanActivity.this, mProsess);\r\n                    mRecyclerView.setAdapter(mAdapter);\r\n\r\n                    mDBListener = databaseReference.addValueEventListener(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                            mProsess.clear();\r\n                            for (DataSnapshot kandidatSnapshot : dataSnapshot.getChildren()) {\r\n                                Proses upload = kandidatSnapshot.getValue(Proses.class);\r\n                                upload.setKey(kandidatSnapshot.getKey());\r\n                                mProsess.add(upload);\r\n                            }\r\n                            mAdapter.notifyDataSetChanged();\r\n                        }\r\n\r\n                        @Override\r\n                        public void onCancelled(DatabaseError databaseError) {\r\n                            Toast.makeText(DetailKependudukanActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n\r\n                    tvStatus.setText(status);\r\n                    tvNomor.setText(\"No : \"+nomor);\r\n                    btnClose.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n                        }\r\n                    });\r\n\r\n                    relative2.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n\r\n                            CharSequence[] item = {\"Dalam Proses\", \"Selesai\"};\r\n                            AlertDialog.Builder request = new AlertDialog.Builder(DetailKependudukanActivity.this)\r\n                                    .setTitle(\"Pilih Status Komplain\")\r\n                                    .setItems(item, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialog, int i) {\r\n                                            switch (i){\r\n                                                case 0:\r\n                                                    prosesStatus = \"Dalam Proses\";\r\n                                                    Intent intent = new Intent(DetailKependudukanActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle = new Bundle();\r\n                                                    bundle.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle.putString(\"status\", status);\r\n                                                    bundle.putString(\"getKey\", getKey);\r\n                                                    intent.putExtras(bundle);\r\n                                                    startActivity(intent);\r\n                                                    break;\r\n                                                case 1:\r\n                                                    prosesStatus = \"Selesai\";\r\n                                                    Intent intent2 = new Intent(DetailKependudukanActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle2 = new Bundle();\r\n                                                    bundle2.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle2.putString(\"status\", status);\r\n                                                    bundle2.putString(\"getKey\", getKey);\r\n                                                    intent2.putExtras(bundle2);\r\n                                                    startActivity(intent2);\r\n                                                    break;\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            request.create();\r\n                            request.show();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        btnTambahKomentar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                final ScrollView scrollView = findViewById(R.id.scrollView);\r\n                btnTambahKomentar.setVisibility(View.GONE);\r\n                scrollView.postDelayed(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                        scrollView.isSmoothScrollingEnabled(); }\r\n                }, 200);\r\n                linear2.setVisibility(View.VISIBLE);\r\n            }\r\n        });\r\n\r\n        fab.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                final EditText input = findViewById(R.id.input);\r\n                final ScrollView scrollView = findViewById(R.id.scrollView);\r\n\r\n                AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailKependudukanActivity.this);\r\n                View mView = getLayoutInflater().inflate(R.layout.show_loading, null);\r\n\r\n                mBuilder.setView(mView);\r\n                mBuilder.setCancelable(false);\r\n                final AlertDialog mDialog = mBuilder.create();\r\n                mDialog.show();\r\n\r\n                if (isEmpty(input.getText().toString())) {\r\n                    Toast.makeText(DetailKependudukanActivity.this, \"Balasan tidak boleh kosong!\",\r\n                            Toast.LENGTH_SHORT).show();\r\n                    mDialog.dismiss();\r\n\r\n                } else {\r\n                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey)\r\n                            .child(\"balasan\").push().setValue(new Komentar(input.getText().toString(),\r\n                            namaDetailTextView.getText().toString(), firebaseUser.getEmail())).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) { FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"balasan\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                if (dataSnapshot.exists()) {\r\n                                    long totalBalas;\r\n                                    totalBalas = (dataSnapshot.getChildrenCount());\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_balas\").setValue(String.valueOf(totalBalas))\r\n                                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                @Override\r\n                                                public void onSuccess(Void aVoid) {\r\n                                                    Penerima = emailDetailTextView.getText().toString();\r\n                                                    Penerima = Penerima.replaceAll(\"[@.-]\", \"\");\r\n\r\n                                                    TOPIC = \"/topics/\"+Penerima;\r\n                                                    NOTIFICATION_TITLE = \"Balasan Komplain Dari Admin\";\r\n                                                    NOTIFICATION_MESSAGE = input.getText().toString();\r\n\r\n                                                    JSONObject notification = new JSONObject();\r\n                                                    JSONObject notifcationBody = new JSONObject();\r\n                                                    try {\r\n                                                        notifcationBody.put(\"title\", NOTIFICATION_TITLE);\r\n                                                        notifcationBody.put(\"message\", NOTIFICATION_MESSAGE);\r\n\r\n                                                        notification.put(\"to\", TOPIC);\r\n                                                        notification.put(\"data\", notifcationBody);\r\n                                                    } catch (JSONException e) {\r\n                                                        Log.e(TAG, \"onCreate: \" + e.getMessage() );\r\n                                                    }\r\n                                                    sendNotification(notification);\r\n\r\n                                                    linear2.setVisibility(View.GONE);\r\n                                                    input.setText(\"\");\r\n                                                    btnTambahKomentar.setVisibility(View.VISIBLE);\r\n                                                    mDialog.dismiss();\r\n\r\n                                                    scrollView.postDelayed(new Runnable() {\r\n                                                        @Override\r\n                                                        public void run() {\r\n                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                                                            scrollView.isSmoothScrollingEnabled();\r\n                                                        }\r\n                                                    }, 200);\r\n                                                }\r\n                                            });\r\n                                } else {\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_balas\").setValue(\"0\")\r\n                                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                @Override\r\n                                                public void onSuccess(Void aVoid) {\r\n                                                    Penerima = emailDetailTextView.getText().toString();\r\n                                                    Penerima = Penerima.replaceAll(\"[@.-]\", \"\");\r\n\r\n                                                    TOPIC = \"/topics/\"+Penerima;\r\n                                                    NOTIFICATION_TITLE = \"Balasan Komplain Dari Admin\";\r\n                                                    NOTIFICATION_MESSAGE = input.getText().toString();\r\n\r\n                                                    JSONObject notification = new JSONObject();\r\n                                                    JSONObject notifcationBody = new JSONObject();\r\n                                                    try {\r\n                                                        notifcationBody.put(\"title\", NOTIFICATION_TITLE);\r\n                                                        notifcationBody.put(\"message\", NOTIFICATION_MESSAGE);\r\n\r\n                                                        notification.put(\"to\", TOPIC);\r\n                                                        notification.put(\"data\", notifcationBody);\r\n                                                    } catch (JSONException e) {\r\n                                                        Log.e(TAG, \"onCreate: \" + e.getMessage() );\r\n                                                    }\r\n                                                    sendNotification(notification);\r\n\r\n                                                    linear2.setVisibility(View.GONE);\r\n                                                    input.setText(\"\");\r\n                                                    btnTambahKomentar.setVisibility(View.VISIBLE);\r\n                                                    mDialog.dismiss();\r\n\r\n                                                    scrollView.postDelayed(new Runnable() {\r\n                                                        @Override\r\n                                                        public void run() {\r\n                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                                                            scrollView.isSmoothScrollingEnabled();\r\n                                                        }\r\n                                                    }, 200);\r\n                                                }\r\n                                            });\r\n                                }\r\n                            }\r\n                            @Override\r\n                            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                            }\r\n                        });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        btnBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void sendNotification(JSONObject notification) {\r\n        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(FCM_API, notification,\r\n                new Response.Listener<JSONObject>() {\r\n                    @Override\r\n                    public void onResponse(JSONObject response) {\r\n                        Log.i(TAG, \"onResponse: \" + response.toString());\r\n                    }\r\n                },\r\n                new Response.ErrorListener() {\r\n                    @Override\r\n                    public void onErrorResponse(VolleyError error) {\r\n                        Toast.makeText(DetailKependudukanActivity.this, \"Request error!\", Toast.LENGTH_LONG).show();\r\n                        Log.i(TAG, \"onErrorResponse: Didn't work\");\r\n                    }\r\n                }){\r\n            @Override\r\n            public Map<String, String> getHeaders() throws AuthFailureError {\r\n                Map<String, String> params = new HashMap<>();\r\n                params.put(\"Authorization\", serverKey);\r\n                params.put(\"Content-Type\", contentType);\r\n                return params;\r\n            }\r\n        };\r\n        MySingleton.getInstance(getApplicationContext()).addToRequestQueue(jsonObjectRequest);\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        finish();\r\n    }\r\n\r\n    private void displayKomentar() {\r\n        mRecyclerView = findViewById(R.id.list_of_komentar);\r\n        RecyclerView.LayoutManager layoutManager = new FlexboxLayoutManager(this);\r\n        mRecyclerView.setLayoutManager(layoutManager);\r\n\r\n        mKomentar = new ArrayList<>();\r\n        mAdapter = new RecyclerAdapterKomentar (DetailKependudukanActivity.this, mKomentar);\r\n        mRecyclerView.setAdapter(mAdapter);\r\n\r\n        mStorage = FirebaseStorage.getInstance();\r\n        mStorageRef = FirebaseStorage.getInstance().getReference(\"foto_komentar\");\r\n        mDatabaseRef = FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"balasan\");\r\n        mDBListener = mDatabaseRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                if (dataSnapshot.exists()) {\r\n                    mKomentar.clear();\r\n\r\n                    for (DataSnapshot komentarSnapshot : dataSnapshot.getChildren()) {\r\n                        Komentar upload = komentarSnapshot.getValue(Komentar.class);\r\n                        upload.setKey(komentarSnapshot.getKey());\r\n                        mKomentar.add(upload);\r\n                    }\r\n                    mAdapter.notifyDataSetChanged();\r\n                    tvBalas.setText(\"Balasan Komplain\");\r\n                    layout_kerangka.setVisibility(View.VISIBLE);\r\n\r\n                } else{\r\n                    tvBalas.setText(\"Belum Ada Balasan\");\r\n                    layout_kerangka.setVisibility(View.VISIBLE);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError databaseError) {\r\n                Toast.makeText(DetailKependudukanActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailKependudukanActivity.java b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailKependudukanActivity.java
--- a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailKependudukanActivity.java	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailKependudukanActivity.java	(date 1661796361565)
@@ -40,11 +40,14 @@
 import com.google.firebase.database.ValueEventListener;
 import com.google.firebase.storage.FirebaseStorage;
 import com.google.firebase.storage.StorageReference;
+import com.jatmika.admin_e_complaintrangkasbitung.API.API;
+import com.jatmika.admin_e_complaintrangkasbitung.API.APIUtility;
 import com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomentar;
 import com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterProses;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.Komentar;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.MySingleton;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.Proses;
+import com.jatmika.admin_e_complaintrangkasbitung.SharePref.SharePref;
 import com.uncopt.android.widget.text.justify.JustifiedTextView;
 
 import org.json.JSONException;
@@ -57,6 +60,9 @@
 
 import static android.text.TextUtils.isEmpty;
 
+import retrofit2.Call;
+import retrofit2.Callback;
+
 public class DetailKependudukanActivity extends AppCompatActivity {
 
     final private String serverKey = "key=" + "AIzaSyDL3TGOXPGwfM7iIf_pX4zqD3IbTr-I45w";
@@ -90,6 +96,8 @@
 
     FirebaseAuth mAuth;
     FirebaseUser firebaseUser;
+    private API apiService;
+    private SharePref sharePref;
 
     int satuan;
 
@@ -140,6 +148,9 @@
         jml_balas = i.getExtras().getString("JML_BALAS_KEY");
         getKey = i.getExtras().getString("GETPRIMARY_KEY");
 
+        apiService = APIUtility.getAPI();
+        sharePref = new SharePref(this);
+
         initializeWidgets();
         displayKomentar();
 
@@ -190,9 +201,9 @@
         });
 
         satuan = 1;
-        int jml_lihatlama = Integer.parseInt(jml_lihat);
+        int jml_lihatlama = 0;
         final int total = satuan + jml_lihatlama;
-        FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_lihat").setValue(String.valueOf(total));
+//        FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_lihat").setValue(String.valueOf(total));
 
         relative1.setOnClickListener(new View.OnClickListener() {
             @Override
@@ -386,100 +397,111 @@
                     mDialog.dismiss();
 
                 } else {
-                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey)
-                            .child("balasan").push().setValue(new Komentar(input.getText().toString(),
-                            namaDetailTextView.getText().toString(), firebaseUser.getEmail())).addOnSuccessListener(new OnSuccessListener<Void>() {
+                    apiService.addComentar("Bearer "+sharePref.getTokenApi(), getKey, input.getText().toString()).enqueue(new Callback<Komentar>() {
                         @Override
-                        public void onSuccess(Void aVoid) { FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("balasan").addListenerForSingleValueEvent(new ValueEventListener() {
-                            @Override
-                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
-                                if (dataSnapshot.exists()) {
-                                    long totalBalas;
-                                    totalBalas = (dataSnapshot.getChildrenCount());
-                                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_balas").setValue(String.valueOf(totalBalas))
-                                            .addOnSuccessListener(new OnSuccessListener<Void>() {
-                                                @Override
-                                                public void onSuccess(Void aVoid) {
-                                                    Penerima = emailDetailTextView.getText().toString();
-                                                    Penerima = Penerima.replaceAll("[@.-]", "");
-
-                                                    TOPIC = "/topics/"+Penerima;
-                                                    NOTIFICATION_TITLE = "Balasan Komplain Dari Admin";
-                                                    NOTIFICATION_MESSAGE = input.getText().toString();
-
-                                                    JSONObject notification = new JSONObject();
-                                                    JSONObject notifcationBody = new JSONObject();
-                                                    try {
-                                                        notifcationBody.put("title", NOTIFICATION_TITLE);
-                                                        notifcationBody.put("message", NOTIFICATION_MESSAGE);
-
-                                                        notification.put("to", TOPIC);
-                                                        notification.put("data", notifcationBody);
-                                                    } catch (JSONException e) {
-                                                        Log.e(TAG, "onCreate: " + e.getMessage() );
-                                                    }
-                                                    sendNotification(notification);
-
-                                                    linear2.setVisibility(View.GONE);
-                                                    input.setText("");
-                                                    btnTambahKomentar.setVisibility(View.VISIBLE);
-                                                    mDialog.dismiss();
-
-                                                    scrollView.postDelayed(new Runnable() {
-                                                        @Override
-                                                        public void run() {
-                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);
-                                                            scrollView.isSmoothScrollingEnabled();
-                                                        }
-                                                    }, 200);
-                                                }
-                                            });
-                                } else {
-                                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_balas").setValue("0")
-                                            .addOnSuccessListener(new OnSuccessListener<Void>() {
-                                                @Override
-                                                public void onSuccess(Void aVoid) {
-                                                    Penerima = emailDetailTextView.getText().toString();
-                                                    Penerima = Penerima.replaceAll("[@.-]", "");
-
-                                                    TOPIC = "/topics/"+Penerima;
-                                                    NOTIFICATION_TITLE = "Balasan Komplain Dari Admin";
-                                                    NOTIFICATION_MESSAGE = input.getText().toString();
-
-                                                    JSONObject notification = new JSONObject();
-                                                    JSONObject notifcationBody = new JSONObject();
-                                                    try {
-                                                        notifcationBody.put("title", NOTIFICATION_TITLE);
-                                                        notifcationBody.put("message", NOTIFICATION_MESSAGE);
-
-                                                        notification.put("to", TOPIC);
-                                                        notification.put("data", notifcationBody);
-                                                    } catch (JSONException e) {
-                                                        Log.e(TAG, "onCreate: " + e.getMessage() );
-                                                    }
-                                                    sendNotification(notification);
-
-                                                    linear2.setVisibility(View.GONE);
-                                                    input.setText("");
-                                                    btnTambahKomentar.setVisibility(View.VISIBLE);
-                                                    mDialog.dismiss();
+//                        public void onSuccess(Void aVoid) { FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("balasan").addListenerForSingleValueEvent(new ValueEventListener() {
+//                            @Override
+//                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
+//                                if (dataSnapshot.exists()) {
+//                                    long totalBalas;
+//                                    totalBalas = (dataSnapshot.getChildrenCount());
+//                                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_balas").setValue(String.valueOf(totalBalas))
+//                                            .addOnSuccessListener(new OnSuccessListener<Void>() {
+//                                                @Override
+//                                                public void onSuccess(Void aVoid) {
+//                                                    Penerima = emailDetailTextView.getText().toString();
+//                                                    Penerima = Penerima.replaceAll("[@.-]", "");
+//
+//                                                    TOPIC = "/topics/"+Penerima;
+//                                                    NOTIFICATION_TITLE = "Balasan Komplain Dari Admin";
+//                                                    NOTIFICATION_MESSAGE = input.getText().toString();
+//
+//                                                    JSONObject notification = new JSONObject();
+//                                                    JSONObject notifcationBody = new JSONObject();
+//                                                    try {
+//                                                        notifcationBody.put("title", NOTIFICATION_TITLE);
+//                                                        notifcationBody.put("message", NOTIFICATION_MESSAGE);
+//
+//                                                        notification.put("to", TOPIC);
+//                                                        notification.put("data", notifcationBody);
+//                                                    } catch (JSONException e) {
+//                                                        Log.e(TAG, "onCreate: " + e.getMessage() );
+//                                                    }
+//                                                    sendNotification(notification);
+//
+//                                                    linear2.setVisibility(View.GONE);
+//                                                    input.setText("");
+//                                                    btnTambahKomentar.setVisibility(View.VISIBLE);
+//                                                    mDialog.dismiss();
+//
+//                                                    scrollView.postDelayed(new Runnable() {
+//                                                        @Override
+//                                                        public void run() {
+//                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);
+//                                                            scrollView.isSmoothScrollingEnabled();
+//                                                        }
+//                                                    }, 200);
+//                                                }
+//                                            });
+//                                } else {
+//                                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_balas").setValue("0")
+//                                            .addOnSuccessListener(new OnSuccessListener<Void>() {
+//                                                @Override
+//                                                public void onSuccess(Void aVoid) {
+//                                                    Penerima = emailDetailTextView.getText().toString();
+//                                                    Penerima = Penerima.replaceAll("[@.-]", "");
+//
+//                                                    TOPIC = "/topics/"+Penerima;
+//                                                    NOTIFICATION_TITLE = "Balasan Komplain Dari Admin";
+//                                                    NOTIFICATION_MESSAGE = input.getText().toString();
+//
+//                                                    JSONObject notification = new JSONObject();
+//                                                    JSONObject notifcationBody = new JSONObject();
+//                                                    try {
+//                                                        notifcationBody.put("title", NOTIFICATION_TITLE);
+//                                                        notifcationBody.put("message", NOTIFICATION_MESSAGE);
+//
+//                                                        notification.put("to", TOPIC);
+//                                                        notification.put("data", notifcationBody);
+//                                                    } catch (JSONException e) {
+//                                                        Log.e(TAG, "onCreate: " + e.getMessage() );
+//                                                    }
+//                                                    sendNotification(notification);
+//
+//                                                    linear2.setVisibility(View.GONE);
+//                                                    input.setText("");
+//                                                    btnTambahKomentar.setVisibility(View.VISIBLE);
+//                                                    mDialog.dismiss();
+//
+//                                                    scrollView.postDelayed(new Runnable() {
+//                                                        @Override
+//                                                        public void run() {
+//                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);
+//                                                            scrollView.isSmoothScrollingEnabled();
+//                                                        }
+//                                                    }, 200);
+//                                                }
+//                                            });
+                        public void onResponse(Call<Komentar> call, retrofit2.Response<Komentar> response) {
+                            Log.i("responseAPI", response.body().toString());
+                            linear2.setVisibility(View.GONE);
+                            input.setText("");
+                            btnTambahKomentar.setVisibility(View.VISIBLE);
+                            mDialog.dismiss();
 
-                                                    scrollView.postDelayed(new Runnable() {
-                                                        @Override
-                                                        public void run() {
-                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);
-                                                            scrollView.isSmoothScrollingEnabled();
-                                                        }
-                                                    }, 200);
-                                                }
-                                            });
-                                }
-                            }
-                            @Override
-                            public void onCancelled(@NonNull DatabaseError databaseError) {
+                            scrollView.postDelayed(new Runnable() {
+                                @Override
+                                public void run() {
+                                    scrollView.fullScroll(ScrollView.FOCUS_DOWN);
+                                    scrollView.isSmoothScrollingEnabled();
+                                }
+                            }, 200);
+                            displayKomentar();
+                        }
+                        @Override
+                        public void onFailure(Call<Komentar> call, Throwable t) {
+                            Log.i("responseAPI", t.toString());
 
-                            }
-                        });
                         }
                     });
                 }
@@ -534,20 +556,14 @@
         mAdapter = new RecyclerAdapterKomentar (DetailKependudukanActivity.this, mKomentar);
         mRecyclerView.setAdapter(mAdapter);
 
-        mStorage = FirebaseStorage.getInstance();
-        mStorageRef = FirebaseStorage.getInstance().getReference("foto_komentar");
-        mDatabaseRef = FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("balasan");
-        mDBListener = mDatabaseRef.addValueEventListener(new ValueEventListener() {
+        Log.i("keyKomplain", getKey);
+        apiService.getComentar("Bearer "+sharePref.getTokenApi(), getKey).enqueue(new Callback<List<Komentar>>() {
             @Override
-            public void onDataChange(DataSnapshot dataSnapshot) {
-
-                if (dataSnapshot.exists()) {
-                    mKomentar.clear();
-
-                    for (DataSnapshot komentarSnapshot : dataSnapshot.getChildren()) {
-                        Komentar upload = komentarSnapshot.getValue(Komentar.class);
-                        upload.setKey(komentarSnapshot.getKey());
-                        mKomentar.add(upload);
+            public void onResponse(Call<List<Komentar>> call, retrofit2.Response<List<Komentar>> response) {
+                Log.i("response", "code"+response.code());
+                if(response.code() == 200){
+                    for (Komentar komentar : response.body()){
+                        mKomentar.add(komentar);
                     }
                     mAdapter.notifyDataSetChanged();
                     tvBalas.setText("Balasan Komplain");
@@ -560,8 +576,8 @@
             }
 
             @Override
-            public void onCancelled(DatabaseError databaseError) {
-                Toast.makeText(DetailKependudukanActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();
+            public void onFailure(Call<List<Komentar>> call, Throwable t) {
+                Log.i("errorResponse", t.toString());
             }
         });
     }
Index: app/src/main/res/layout/fragment_complaint.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    tools:context=\".FragmentComplaint\">\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <com.google.android.material.tabs.TabLayout\r\n            android:id=\"@+id/tab_layout\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@color/colorPrimary\"\r\n            app:tabTextColor=\"#7C4DFF\"\r\n            app:tabMode=\"fixed\"\r\n            app:tabSelectedTextColor=\"#FFFFFF\"\r\n            app:tabIndicatorColor=\"#FFFFFF\">\r\n\r\n            <com.google.android.material.tabs.TabItem\r\n                android:id=\"@+id/tab_ktp\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:icon=\"@drawable/k2\"/>\r\n\r\n            <com.google.android.material.tabs.TabItem\r\n                android:id=\"@+id/tab_iumk\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:icon=\"@drawable/k3\"/>\r\n\r\n            <com.google.android.material.tabs.TabItem\r\n                android:id=\"@+id/tab_kependudukan\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:icon=\"@drawable/k4\"/>\r\n\r\n            <com.google.android.material.tabs.TabItem\r\n                android:id=\"@+id/tab_nikah\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:icon=\"@drawable/k5\"/>\r\n\r\n            <com.google.android.material.tabs.TabItem\r\n                android:id=\"@+id/tab_sppt\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:icon=\"@drawable/k6\"/>\r\n\r\n            <com.google.android.material.tabs.TabItem\r\n                android:id=\"@+id/tab_tutup_jalan\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:icon=\"@drawable/k7\"/>\r\n\r\n        </com.google.android.material.tabs.TabLayout>\r\n\r\n        <androidx.viewpager.widget.ViewPager\r\n            android:id=\"@+id/viewPager\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@+id/tab_layout\"/>\r\n\r\n    </RelativeLayout>\r\n\r\n</FrameLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_complaint.xml b/app/src/main/res/layout/fragment_complaint.xml
--- a/app/src/main/res/layout/fragment_complaint.xml	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/res/layout/fragment_complaint.xml	(date 1661793743136)
@@ -15,46 +15,46 @@
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:background="@color/colorPrimary"
-            app:tabTextColor="#7C4DFF"
+            app:tabIndicatorColor="#FFFFFF"
             app:tabMode="fixed"
             app:tabSelectedTextColor="#FFFFFF"
-            app:tabIndicatorColor="#FFFFFF">
+            app:tabTextColor="#7C4DFF">
 
             <com.google.android.material.tabs.TabItem
                 android:id="@+id/tab_ktp"
                 android:layout_width="match_parent"
                 android:layout_height="match_parent"
-                android:icon="@drawable/k2"/>
+                android:icon="@drawable/k2" />
 
             <com.google.android.material.tabs.TabItem
                 android:id="@+id/tab_iumk"
                 android:layout_width="match_parent"
                 android:layout_height="match_parent"
-                android:icon="@drawable/k3"/>
+                android:icon="@drawable/k3" />
 
             <com.google.android.material.tabs.TabItem
                 android:id="@+id/tab_kependudukan"
                 android:layout_width="match_parent"
                 android:layout_height="match_parent"
-                android:icon="@drawable/k4"/>
+                android:icon="@drawable/k4" />
 
             <com.google.android.material.tabs.TabItem
                 android:id="@+id/tab_nikah"
                 android:layout_width="match_parent"
                 android:layout_height="match_parent"
-                android:icon="@drawable/k5"/>
+                android:icon="@drawable/k5" />
 
             <com.google.android.material.tabs.TabItem
                 android:id="@+id/tab_sppt"
                 android:layout_width="match_parent"
                 android:layout_height="match_parent"
-                android:icon="@drawable/k6"/>
+                android:icon="@drawable/k6" />
 
             <com.google.android.material.tabs.TabItem
                 android:id="@+id/tab_tutup_jalan"
                 android:layout_width="match_parent"
                 android:layout_height="match_parent"
-                android:icon="@drawable/k7"/>
+                android:icon="@drawable/k7" />
 
         </com.google.android.material.tabs.TabLayout>
 
Index: app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailIUMKActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.jatmika.admin_e_complaintrangkasbitung;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.app.DownloadManager;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.view.animation.Animation;\r\nimport android.view.animation.AnimationUtils;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.ScrollView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.AuthFailureError;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.JsonObjectRequest;\r\nimport com.google.android.flexbox.FlexboxLayoutManager;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomentar;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterProses;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Komentar;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.MySingleton;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Proses;\r\nimport com.uncopt.android.widget.text.justify.JustifiedTextView;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport static android.os.Environment.DIRECTORY_DOWNLOADS;\r\nimport static android.text.TextUtils.isEmpty;\r\n\r\npublic class DetailIUMKActivity extends AppCompatActivity {\r\n\r\n    final private String serverKey = \"key=\" + \"AIzaSyDL3TGOXPGwfM7iIf_pX4zqD3IbTr-I45w\";\r\n    final private String contentType = \"application/json\";\r\n    final String TAG = \"NOTIFICATION TAG\";\r\n\r\n    String FCM_API = \"https://fcm.googleapis.com/fcm/send\";\r\n    String NOTIFICATION_TITLE;\r\n    String NOTIFICATION_MESSAGE;\r\n    String TOPIC;\r\n    String Penerima;\r\n    String prosesStatus;\r\n\r\n    TextView nomorDetailTextView, namaDetailTextView, emailDetailTextView, alamatDetailTextView,\r\n            tanggalDetailTextView, tvBalas, tvJudul, statusDetailTextView;\r\n    JustifiedTextView isiDetailTextView;\r\n    Button btnTambahKomentar, btnDokumen;\r\n    LinearLayout linear2, layout_kerangka, linearDokumen;\r\n    RelativeLayout relative1, btnBack;\r\n    FloatingActionButton fab;\r\n    Animation fromright;\r\n\r\n    RecyclerView mRecyclerView;\r\n    private RecyclerAdapterKomentar mAdapter;\r\n    private StorageReference mStorageRef;\r\n    FirebaseStorage mStorage;\r\n    DatabaseReference mDatabaseRef;\r\n    private List<Komentar> mKomentar;\r\n    ValueEventListener mDBListener;\r\n\r\n    FirebaseAuth mAuth;\r\n    FirebaseUser firebaseUser;\r\n\r\n    int satuan;\r\n\r\n    private void initializeWidgets(){\r\n        nomorDetailTextView = findViewById(R.id.nomorTextView);\r\n        namaDetailTextView = findViewById(R.id.namaTextView);\r\n        emailDetailTextView = findViewById(R.id.emailTextView);\r\n        alamatDetailTextView = findViewById(R.id.alamatTextView);\r\n        tanggalDetailTextView = findViewById(R.id.tanggalTextView);\r\n        isiDetailTextView = findViewById(R.id.isiTextView);\r\n        statusDetailTextView = findViewById(R.id.statusTextView);\r\n        btnDokumen = findViewById(R.id.btnDokumen);\r\n        linearDokumen = findViewById(R.id.linearLayout);\r\n        relative1 = findViewById(R.id.relative1);\r\n        btnTambahKomentar = findViewById(R.id.btnTambahKomentar);\r\n        linear2 = findViewById(R.id.linear2);\r\n        layout_kerangka = findViewById(R.id.layout_kerangka);\r\n        tvBalas = findViewById(R.id.tvBalas);\r\n        fab = findViewById(R.id.fab);\r\n        tvJudul = findViewById(R.id.tvJudul);\r\n        btnBack = findViewById(R.id.btnBack);\r\n    }\r\n\r\n    String image, berkas, nomor, nik, email, nama, alamat, tanggal, namalokasi, latitude, longitude, isi, kategori, status,\r\n            jml_lihat, jml_suka, jml_balas, getKey;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.app_bar_detail_iumk);\r\n\r\n        Intent i = this.getIntent();\r\n        image = i.getExtras().getString(\"IMAGE_KEY\");\r\n        berkas = i.getExtras().getString(\"BERKAS_KEY\");\r\n        nomor = i.getExtras().getString(\"NOMOR_KEY\");\r\n        nik = i.getExtras().getString(\"NIK_KEY\");\r\n        email = i.getExtras().getString(\"EMAIL_KEY\");\r\n        nama = i.getExtras().getString(\"NAMA_KEY\");\r\n        alamat = i.getExtras().getString(\"ALAMAT_KEY\");\r\n        tanggal = i.getExtras().getString(\"TANGGAL_KEY\");\r\n        namalokasi = i.getExtras().getString(\"NAMALOKASI_KEY\");\r\n        latitude = i.getExtras().getString(\"LATITUDE_KEY\");\r\n        longitude = i.getExtras().getString(\"LONGITUDE_KEY\");\r\n        isi = i.getExtras().getString(\"ISI_KEY\");\r\n        kategori = i.getExtras().getString(\"KATEGORI_KEY\");\r\n        status = i.getExtras().getString(\"STATUS_KEY\");\r\n        jml_lihat = i.getExtras().getString(\"JML_LIHAT_KEY\");\r\n        jml_suka = i.getExtras().getString(\"JML_SUKA_KEY\");\r\n        jml_balas = i.getExtras().getString(\"JML_BALAS_KEY\");\r\n        getKey = i.getExtras().getString(\"GETPRIMARY_KEY\");\r\n\r\n        initializeWidgets();\r\n        displayKomentar();\r\n\r\n        Toolbar toolbar = findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        firebaseUser = mAuth.getCurrentUser();\r\n\r\n        fromright = AnimationUtils.loadAnimation(this, R.anim.fromright);\r\n        tvJudul.startAnimation(fromright);\r\n        linear2.setVisibility(View.GONE);\r\n\r\n        if (berkas.equals(\"\")){\r\n            linearDokumen.setVisibility(View.GONE);\r\n        }\r\n\r\n        nomorDetailTextView.setText(nomor);\r\n        emailDetailTextView.setText(email);\r\n        namaDetailTextView.setText(nama);\r\n        alamatDetailTextView.setText(alamat);\r\n        tanggalDetailTextView.setText(tanggal);\r\n        isiDetailTextView.setText(\"''\"+isi+\"''\");\r\n        statusDetailTextView.setText(status);\r\n\r\n        satuan = 1;\r\n        int jml_lihatlama = Integer.parseInt(jml_lihat);\r\n        final int total = satuan + jml_lihatlama;\r\n        FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_lihat\").setValue(String.valueOf(total));\r\n\r\n        relative1.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if (status.equals(\"Menunggu Diproses\")){\r\n                    AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailIUMKActivity.this);\r\n                    View mView = getLayoutInflater().inflate(R.layout.show_menunggu, null);\r\n                    TextView btnClose = mView.findViewById(R.id.btnClose);\r\n                    TextView tvNomor = mView.findViewById(R.id.tvNomor);\r\n                    RelativeLayout relative1 = mView.findViewById(R.id.relative1);\r\n\r\n                    mBuilder.setView(mView);\r\n                    final AlertDialog mDialog = mBuilder.create();\r\n                    mDialog.show();\r\n\r\n                    tvNomor.setText(\"No : \"+nomor);\r\n                    btnClose.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n                        }\r\n                    });\r\n\r\n                    relative1.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n\r\n                            CharSequence[] item = {\"Dalam Proses\", \"Selesai\"};\r\n                            AlertDialog.Builder request = new AlertDialog.Builder(DetailIUMKActivity.this)\r\n                                    .setTitle(\"Pilih Status Komplain\")\r\n                                    .setItems(item, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialog, int i) {\r\n                                            switch (i){\r\n                                                case 0:\r\n                                                    prosesStatus = \"Dalam Proses\";\r\n                                                    Intent intent = new Intent(DetailIUMKActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle = new Bundle();\r\n                                                    bundle.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle.putString(\"status\", status);\r\n                                                    bundle.putString(\"getKey\", getKey);\r\n                                                    intent.putExtras(bundle);\r\n                                                    startActivity(intent);\r\n                                                    break;\r\n                                                case 1:\r\n                                                    prosesStatus = \"Selesai\";\r\n                                                    Intent intent2 = new Intent(DetailIUMKActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle2 = new Bundle();\r\n                                                    bundle2.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle2.putString(\"status\", status);\r\n                                                    bundle2.putString(\"getKey\", getKey);\r\n                                                    intent2.putExtras(bundle2);\r\n                                                    startActivity(intent2);\r\n                                                    break;\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            request.create();\r\n                            request.show();\r\n                        }\r\n                    });\r\n\r\n                } else {\r\n                    AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailIUMKActivity.this);\r\n                    View mView = getLayoutInflater().inflate(R.layout.show_proses, null);\r\n\r\n                    TextView btnClose = mView.findViewById(R.id.btnClose);\r\n                    TextView tvNomor = mView.findViewById(R.id.tvNomor);\r\n                    TextView tvStatus = mView.findViewById(R.id.tvStatus);\r\n                    RelativeLayout relative2 = mView.findViewById(R.id.relative1);\r\n                    RecyclerView mRecyclerView = mView.findViewById(R.id.mRecyclerView);\r\n                    final RecyclerAdapterProses mAdapter;\r\n                    DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"status_komplain\");\r\n                    final List<Proses> mProsess;\r\n\r\n                    mBuilder.setView(mView);\r\n                    final AlertDialog mDialog = mBuilder.create();\r\n                    mDialog.show();\r\n\r\n                    mRecyclerView.setHasFixedSize(true);\r\n                    mRecyclerView.setLayoutManager(new LinearLayoutManager(DetailIUMKActivity.this));\r\n\r\n                    mProsess = new ArrayList<>();\r\n                    mAdapter = new RecyclerAdapterProses(DetailIUMKActivity.this, mProsess);\r\n                    mRecyclerView.setAdapter(mAdapter);\r\n\r\n                    mDBListener = databaseReference.addValueEventListener(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                            mProsess.clear();\r\n                            for (DataSnapshot kandidatSnapshot : dataSnapshot.getChildren()) {\r\n                                Proses upload = kandidatSnapshot.getValue(Proses.class);\r\n                                upload.setKey(kandidatSnapshot.getKey());\r\n                                mProsess.add(upload);\r\n                            }\r\n                            mAdapter.notifyDataSetChanged();\r\n                        }\r\n\r\n                        @Override\r\n                        public void onCancelled(DatabaseError databaseError) {\r\n                            Toast.makeText(DetailIUMKActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n\r\n                    tvStatus.setText(status);\r\n                    tvNomor.setText(\"No : \"+nomor);\r\n                    btnClose.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n                        }\r\n                    });\r\n\r\n                    relative2.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n\r\n                            CharSequence[] item = {\"Dalam Proses\", \"Selesai\"};\r\n                            AlertDialog.Builder request = new AlertDialog.Builder(DetailIUMKActivity.this)\r\n                                    .setTitle(\"Pilih Status Komplain\")\r\n                                    .setItems(item, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialog, int i) {\r\n                                            switch (i){\r\n                                                case 0:\r\n                                                    prosesStatus = \"Dalam Proses\";\r\n                                                    Intent intent = new Intent(DetailIUMKActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle = new Bundle();\r\n                                                    bundle.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle.putString(\"status\", status);\r\n                                                    bundle.putString(\"getKey\", getKey);\r\n                                                    intent.putExtras(bundle);\r\n                                                    startActivity(intent);\r\n                                                    break;\r\n                                                case 1:\r\n                                                    prosesStatus = \"Selesai\";\r\n                                                    Intent intent2 = new Intent(DetailIUMKActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle2 = new Bundle();\r\n                                                    bundle2.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle2.putString(\"status\", status);\r\n                                                    bundle2.putString(\"getKey\", getKey);\r\n                                                    intent2.putExtras(bundle2);\r\n                                                    startActivity(intent2);\r\n                                                    break;\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            request.create();\r\n                            request.show();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        btnTambahKomentar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                final ScrollView scrollView = findViewById(R.id.scrollView);\r\n                btnTambahKomentar.setVisibility(View.GONE);\r\n                scrollView.postDelayed(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                        scrollView.isSmoothScrollingEnabled(); }\r\n                }, 200);\r\n                linear2.setVisibility(View.VISIBLE);\r\n            }\r\n        });\r\n\r\n        fab.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                final EditText input = findViewById(R.id.input);\r\n                final ScrollView scrollView = findViewById(R.id.scrollView);\r\n\r\n                AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailIUMKActivity.this);\r\n                View mView = getLayoutInflater().inflate(R.layout.show_loading, null);\r\n\r\n                mBuilder.setView(mView);\r\n                mBuilder.setCancelable(false);\r\n                final AlertDialog mDialog = mBuilder.create();\r\n                mDialog.show();\r\n\r\n                if (isEmpty(input.getText().toString())) {\r\n                    Toast.makeText(DetailIUMKActivity.this, \"Balasan tidak boleh kosong!\",\r\n                            Toast.LENGTH_SHORT).show();\r\n                    mDialog.dismiss();\r\n\r\n                } else {\r\n                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey)\r\n                            .child(\"balasan\").push().setValue(new Komentar(input.getText().toString(),\r\n                            \"Admin\", \"\")).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) { FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"balasan\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                if (dataSnapshot.exists()) {\r\n                                    long totalBalas;\r\n                                    totalBalas = (dataSnapshot.getChildrenCount());\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_balas\").setValue(String.valueOf(totalBalas))\r\n                                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                @Override\r\n                                                public void onSuccess(Void aVoid) {\r\n                                                    Penerima = emailDetailTextView.getText().toString();\r\n                                                    Penerima = Penerima.replaceAll(\"[@.-]\", \"\");\r\n\r\n                                                    TOPIC = \"/topics/\"+Penerima;\r\n                                                    NOTIFICATION_TITLE = \"Balasan Komplain Dari Admin\";\r\n                                                    NOTIFICATION_MESSAGE = input.getText().toString();\r\n\r\n                                                    JSONObject notification = new JSONObject();\r\n                                                    JSONObject notifcationBody = new JSONObject();\r\n                                                    try {\r\n                                                        notifcationBody.put(\"title\", NOTIFICATION_TITLE);\r\n                                                        notifcationBody.put(\"message\", NOTIFICATION_MESSAGE);\r\n\r\n                                                        notification.put(\"to\", TOPIC);\r\n                                                        notification.put(\"data\", notifcationBody);\r\n                                                    } catch (JSONException e) {\r\n                                                        Log.e(TAG, \"onCreate: \" + e.getMessage() );\r\n                                                    }\r\n                                                    sendNotification(notification);\r\n\r\n                                                    linear2.setVisibility(View.GONE);\r\n                                                    input.setText(\"\");\r\n                                                    btnTambahKomentar.setVisibility(View.VISIBLE);\r\n                                                    mDialog.dismiss();\r\n\r\n                                                    scrollView.postDelayed(new Runnable() {\r\n                                                        @Override\r\n                                                        public void run() {\r\n                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                                                            scrollView.isSmoothScrollingEnabled();\r\n                                                        }\r\n                                                    }, 200);\r\n                                                }\r\n                                            });\r\n                                } else {\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_balas\").setValue(\"0\")\r\n                                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                @Override\r\n                                                public void onSuccess(Void aVoid) {\r\n                                                    Penerima = emailDetailTextView.getText().toString();\r\n                                                    Penerima = Penerima.replaceAll(\"[@.-]\", \"\");\r\n\r\n                                                    TOPIC = \"/topics/\"+Penerima;\r\n                                                    NOTIFICATION_TITLE = \"Balasan Komplain Dari Admin\";\r\n                                                    NOTIFICATION_MESSAGE = input.getText().toString();\r\n\r\n                                                    JSONObject notification = new JSONObject();\r\n                                                    JSONObject notifcationBody = new JSONObject();\r\n                                                    try {\r\n                                                        notifcationBody.put(\"title\", NOTIFICATION_TITLE);\r\n                                                        notifcationBody.put(\"message\", NOTIFICATION_MESSAGE);\r\n\r\n                                                        notification.put(\"to\", TOPIC);\r\n                                                        notification.put(\"data\", notifcationBody);\r\n                                                    } catch (JSONException e) {\r\n                                                        Log.e(TAG, \"onCreate: \" + e.getMessage() );\r\n                                                    }\r\n                                                    sendNotification(notification);\r\n\r\n                                                    linear2.setVisibility(View.GONE);\r\n                                                    input.setText(\"\");\r\n                                                    btnTambahKomentar.setVisibility(View.VISIBLE);\r\n                                                    mDialog.dismiss();\r\n\r\n                                                    scrollView.postDelayed(new Runnable() {\r\n                                                        @Override\r\n                                                        public void run() {\r\n                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                                                            scrollView.isSmoothScrollingEnabled();\r\n                                                        }\r\n                                                    }, 200);\r\n                                                }\r\n                                            });\r\n                                }\r\n                            }\r\n                            @Override\r\n                            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                            }\r\n                        });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        btnBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                finish();\r\n            }\r\n        });\r\n\r\n        btnDokumen.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                downloadFile(DetailIUMKActivity.this, \"dokumen-iumk-\"+nama, \".docx\", DIRECTORY_DOWNLOADS, berkas);\r\n            }\r\n        });\r\n    }\r\n\r\n    public void downloadFile(Context context, String fileName, String fileExtension, String downloadDirectory, String url){\r\n        DownloadManager downloadManager = (DownloadManager) context.getSystemService(Context.DOWNLOAD_SERVICE);\r\n        Uri uri = Uri.parse(url);\r\n        DownloadManager.Request request = new DownloadManager.Request(uri);\r\n\r\n        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\r\n        request.setVisibleInDownloadsUi(true);\r\n        request.setDestinationInExternalFilesDir(context, downloadDirectory, fileName + fileExtension);\r\n        downloadManager.enqueue(request);\r\n    }\r\n\r\n    private void sendNotification(JSONObject notification) {\r\n        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(FCM_API, notification,\r\n                new Response.Listener<JSONObject>() {\r\n                    @Override\r\n                    public void onResponse(JSONObject response) {\r\n                        Log.i(TAG, \"onResponse: \" + response.toString());\r\n                    }\r\n                },\r\n                new Response.ErrorListener() {\r\n                    @Override\r\n                    public void onErrorResponse(VolleyError error) {\r\n                        Toast.makeText(DetailIUMKActivity.this, \"Request error!\", Toast.LENGTH_LONG).show();\r\n                        Log.i(TAG, \"onErrorResponse: Didn't work\");\r\n                    }\r\n                }){\r\n            @Override\r\n            public Map<String, String> getHeaders() throws AuthFailureError {\r\n                Map<String, String> params = new HashMap<>();\r\n                params.put(\"Authorization\", serverKey);\r\n                params.put(\"Content-Type\", contentType);\r\n                return params;\r\n            }\r\n        };\r\n        MySingleton.getInstance(getApplicationContext()).addToRequestQueue(jsonObjectRequest);\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        finish();\r\n    }\r\n\r\n    private void displayKomentar() {\r\n        mRecyclerView = findViewById(R.id.list_of_komentar);\r\n        RecyclerView.LayoutManager layoutManager = new FlexboxLayoutManager(this);\r\n        mRecyclerView.setLayoutManager(layoutManager);\r\n\r\n        mKomentar = new ArrayList<>();\r\n        mAdapter = new RecyclerAdapterKomentar (DetailIUMKActivity.this, mKomentar);\r\n        mRecyclerView.setAdapter(mAdapter);\r\n\r\n        mStorage = FirebaseStorage.getInstance();\r\n        mStorageRef = FirebaseStorage.getInstance().getReference(\"foto_komentar\");\r\n        mDatabaseRef = FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"balasan\");\r\n        mDBListener = mDatabaseRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                if (dataSnapshot.exists()) {\r\n                    mKomentar.clear();\r\n\r\n                    for (DataSnapshot komentarSnapshot : dataSnapshot.getChildren()) {\r\n                        Komentar upload = komentarSnapshot.getValue(Komentar.class);\r\n                        upload.setKey(komentarSnapshot.getKey());\r\n                        mKomentar.add(upload);\r\n                    }\r\n                    mAdapter.notifyDataSetChanged();\r\n                    tvBalas.setText(\"Balasan Komplain\");\r\n                    layout_kerangka.setVisibility(View.VISIBLE);\r\n\r\n                } else{\r\n                    tvBalas.setText(\"Belum Ada Balasan\");\r\n                    layout_kerangka.setVisibility(View.VISIBLE);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError databaseError) {\r\n                Toast.makeText(DetailIUMKActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailIUMKActivity.java b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailIUMKActivity.java
--- a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailIUMKActivity.java	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailIUMKActivity.java	(date 1661791724812)
@@ -1,11 +1,7 @@
 package com.jatmika.admin_e_complaintrangkasbitung;
 
-import androidx.annotation.NonNull;
-import androidx.appcompat.app.AlertDialog;
-import androidx.appcompat.app.AppCompatActivity;
-import androidx.appcompat.widget.Toolbar;
-import androidx.recyclerview.widget.LinearLayoutManager;
-import androidx.recyclerview.widget.RecyclerView;
+import static android.os.Environment.DIRECTORY_DOWNLOADS;
+import static android.text.TextUtils.isEmpty;
 
 import android.app.DownloadManager;
 import android.content.Context;
@@ -26,10 +22,18 @@
 import android.widget.TextView;
 import android.widget.Toast;
 
+import androidx.annotation.NonNull;
+import androidx.appcompat.app.AlertDialog;
+import androidx.appcompat.app.AppCompatActivity;
+import androidx.appcompat.widget.Toolbar;
+import androidx.recyclerview.widget.LinearLayoutManager;
+import androidx.recyclerview.widget.RecyclerView;
+
 import com.android.volley.AuthFailureError;
 import com.android.volley.Response;
 import com.android.volley.VolleyError;
 import com.android.volley.toolbox.JsonObjectRequest;
+import com.bumptech.glide.Glide;
 import com.google.android.flexbox.FlexboxLayoutManager;
 import com.google.android.gms.tasks.OnSuccessListener;
 import com.google.android.material.floatingactionbutton.FloatingActionButton;
@@ -42,11 +46,14 @@
 import com.google.firebase.database.ValueEventListener;
 import com.google.firebase.storage.FirebaseStorage;
 import com.google.firebase.storage.StorageReference;
+import com.jatmika.admin_e_complaintrangkasbitung.API.API;
+import com.jatmika.admin_e_complaintrangkasbitung.API.APIUtility;
 import com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomentar;
 import com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterProses;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.Komentar;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.MySingleton;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.Proses;
+import com.jatmika.admin_e_complaintrangkasbitung.SharePref.SharePref;
 import com.uncopt.android.widget.text.justify.JustifiedTextView;
 
 import org.json.JSONException;
@@ -57,9 +64,11 @@
 import java.util.List;
 import java.util.Map;
 
-import static android.os.Environment.DIRECTORY_DOWNLOADS;
 import static android.text.TextUtils.isEmpty;
 
+import retrofit2.Call;
+import retrofit2.Callback;
+
 public class DetailIUMKActivity extends AppCompatActivity {
 
     final private String serverKey = "key=" + "AIzaSyDL3TGOXPGwfM7iIf_pX4zqD3IbTr-I45w";
@@ -76,6 +85,7 @@
     TextView nomorDetailTextView, namaDetailTextView, emailDetailTextView, alamatDetailTextView,
             tanggalDetailTextView, tvBalas, tvJudul, statusDetailTextView;
     JustifiedTextView isiDetailTextView;
+    ImageView fotoDetailImageView;
     Button btnTambahKomentar, btnDokumen;
     LinearLayout linear2, layout_kerangka, linearDokumen;
     RelativeLayout relative1, btnBack;
@@ -92,6 +102,8 @@
 
     FirebaseAuth mAuth;
     FirebaseUser firebaseUser;
+    private API apiService;
+    private SharePref sharePref;
 
     int satuan;
 
@@ -103,6 +115,7 @@
         tanggalDetailTextView = findViewById(R.id.tanggalTextView);
         isiDetailTextView = findViewById(R.id.isiTextView);
         statusDetailTextView = findViewById(R.id.statusTextView);
+        fotoDetailImageView = findViewById(R.id.fotoDetailImageView);
         btnDokumen = findViewById(R.id.btnDokumen);
         linearDokumen = findViewById(R.id.linearLayout);
         relative1 = findViewById(R.id.relative1);
@@ -143,6 +156,9 @@
         jml_balas = i.getExtras().getString("JML_BALAS_KEY");
         getKey = i.getExtras().getString("GETPRIMARY_KEY");
 
+        apiService = APIUtility.getAPI();
+        sharePref = new SharePref(this);
+
         initializeWidgets();
         displayKomentar();
 
@@ -168,10 +184,11 @@
         isiDetailTextView.setText("''"+isi+"''");
         statusDetailTextView.setText(status);
 
+
         satuan = 1;
-        int jml_lihatlama = Integer.parseInt(jml_lihat);
+        int jml_lihatlama = 0;
         final int total = satuan + jml_lihatlama;
-        FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_lihat").setValue(String.valueOf(total));
+//        FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_lihat").setValue(String.valueOf(total));
 
         relative1.setOnClickListener(new View.OnClickListener() {
             @Override
@@ -365,100 +382,28 @@
                     mDialog.dismiss();
 
                 } else {
-                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey)
-                            .child("balasan").push().setValue(new Komentar(input.getText().toString(),
-                            "Admin", "")).addOnSuccessListener(new OnSuccessListener<Void>() {
+                    apiService.addComentar("Bearer "+sharePref.getTokenApi(), getKey, input.getText().toString()).enqueue(new Callback<Komentar>() {
                         @Override
-                        public void onSuccess(Void aVoid) { FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("balasan").addListenerForSingleValueEvent(new ValueEventListener() {
-                            @Override
-                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
-                                if (dataSnapshot.exists()) {
-                                    long totalBalas;
-                                    totalBalas = (dataSnapshot.getChildrenCount());
-                                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_balas").setValue(String.valueOf(totalBalas))
-                                            .addOnSuccessListener(new OnSuccessListener<Void>() {
-                                                @Override
-                                                public void onSuccess(Void aVoid) {
-                                                    Penerima = emailDetailTextView.getText().toString();
-                                                    Penerima = Penerima.replaceAll("[@.-]", "");
-
-                                                    TOPIC = "/topics/"+Penerima;
-                                                    NOTIFICATION_TITLE = "Balasan Komplain Dari Admin";
-                                                    NOTIFICATION_MESSAGE = input.getText().toString();
-
-                                                    JSONObject notification = new JSONObject();
-                                                    JSONObject notifcationBody = new JSONObject();
-                                                    try {
-                                                        notifcationBody.put("title", NOTIFICATION_TITLE);
-                                                        notifcationBody.put("message", NOTIFICATION_MESSAGE);
-
-                                                        notification.put("to", TOPIC);
-                                                        notification.put("data", notifcationBody);
-                                                    } catch (JSONException e) {
-                                                        Log.e(TAG, "onCreate: " + e.getMessage() );
-                                                    }
-                                                    sendNotification(notification);
-
-                                                    linear2.setVisibility(View.GONE);
-                                                    input.setText("");
-                                                    btnTambahKomentar.setVisibility(View.VISIBLE);
-                                                    mDialog.dismiss();
+                        public void onResponse(Call<Komentar> call, retrofit2.Response<Komentar> response) {
+                            Log.i("responseAPI", response.body().toString());
+                            linear2.setVisibility(View.GONE);
+                            input.setText("");
+                            btnTambahKomentar.setVisibility(View.VISIBLE);
+                            mDialog.dismiss();
 
-                                                    scrollView.postDelayed(new Runnable() {
-                                                        @Override
-                                                        public void run() {
-                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);
-                                                            scrollView.isSmoothScrollingEnabled();
-                                                        }
-                                                    }, 200);
-                                                }
-                                            });
-                                } else {
-                                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_balas").setValue("0")
-                                            .addOnSuccessListener(new OnSuccessListener<Void>() {
-                                                @Override
-                                                public void onSuccess(Void aVoid) {
-                                                    Penerima = emailDetailTextView.getText().toString();
-                                                    Penerima = Penerima.replaceAll("[@.-]", "");
-
-                                                    TOPIC = "/topics/"+Penerima;
-                                                    NOTIFICATION_TITLE = "Balasan Komplain Dari Admin";
-                                                    NOTIFICATION_MESSAGE = input.getText().toString();
-
-                                                    JSONObject notification = new JSONObject();
-                                                    JSONObject notifcationBody = new JSONObject();
-                                                    try {
-                                                        notifcationBody.put("title", NOTIFICATION_TITLE);
-                                                        notifcationBody.put("message", NOTIFICATION_MESSAGE);
-
-                                                        notification.put("to", TOPIC);
-                                                        notification.put("data", notifcationBody);
-                                                    } catch (JSONException e) {
-                                                        Log.e(TAG, "onCreate: " + e.getMessage() );
-                                                    }
-                                                    sendNotification(notification);
-
-                                                    linear2.setVisibility(View.GONE);
-                                                    input.setText("");
-                                                    btnTambahKomentar.setVisibility(View.VISIBLE);
-                                                    mDialog.dismiss();
-
-                                                    scrollView.postDelayed(new Runnable() {
-                                                        @Override
-                                                        public void run() {
-                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);
-                                                            scrollView.isSmoothScrollingEnabled();
-                                                        }
-                                                    }, 200);
-                                                }
-                                            });
-                                }
-                            }
-                            @Override
-                            public void onCancelled(@NonNull DatabaseError databaseError) {
-
-                            }
-                        });
+                            scrollView.postDelayed(new Runnable() {
+                                @Override
+                                public void run() {
+                                    scrollView.fullScroll(ScrollView.FOCUS_DOWN);
+                                    scrollView.isSmoothScrollingEnabled();
+                                }
+                            }, 200);
+                            displayKomentar();
+                        }
+
+                        @Override
+                        public void onFailure(Call<Komentar> call, Throwable t) {
+                            Log.i("responseAPI", t.toString());
                         }
                     });
                 }
@@ -471,24 +416,6 @@
                 finish();
             }
         });
-
-        btnDokumen.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                downloadFile(DetailIUMKActivity.this, "dokumen-iumk-"+nama, ".docx", DIRECTORY_DOWNLOADS, berkas);
-            }
-        });
-    }
-
-    public void downloadFile(Context context, String fileName, String fileExtension, String downloadDirectory, String url){
-        DownloadManager downloadManager = (DownloadManager) context.getSystemService(Context.DOWNLOAD_SERVICE);
-        Uri uri = Uri.parse(url);
-        DownloadManager.Request request = new DownloadManager.Request(uri);
-
-        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
-        request.setVisibleInDownloadsUi(true);
-        request.setDestinationInExternalFilesDir(context, downloadDirectory, fileName + fileExtension);
-        downloadManager.enqueue(request);
     }
 
     private void sendNotification(JSONObject notification) {
@@ -528,38 +455,240 @@
         mRecyclerView.setLayoutManager(layoutManager);
 
         mKomentar = new ArrayList<>();
-        mAdapter = new RecyclerAdapterKomentar (DetailIUMKActivity.this, mKomentar);
+        mAdapter = new RecyclerAdapterKomentar(DetailIUMKActivity.this, mKomentar);
         mRecyclerView.setAdapter(mAdapter);
-
-        mStorage = FirebaseStorage.getInstance();
-        mStorageRef = FirebaseStorage.getInstance().getReference("foto_komentar");
-        mDatabaseRef = FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("balasan");
-        mDBListener = mDatabaseRef.addValueEventListener(new ValueEventListener() {
+        Log.i("keyKomplain", getKey);
+        apiService.getComentar("Bearer " + sharePref.getTokenApi(), getKey).enqueue(new Callback<List<Komentar>>() {
             @Override
-            public void onDataChange(DataSnapshot dataSnapshot) {
-
-                if (dataSnapshot.exists()) {
-                    mKomentar.clear();
-
-                    for (DataSnapshot komentarSnapshot : dataSnapshot.getChildren()) {
-                        Komentar upload = komentarSnapshot.getValue(Komentar.class);
-                        upload.setKey(komentarSnapshot.getKey());
-                        mKomentar.add(upload);
+            public void onResponse(Call<List<Komentar>> call, retrofit2.Response<List<Komentar>> response) {
+                Log.i("response", "code" + response.code());
+                if (response.code() == 200) {
+                    for (Komentar komentar : response.body()) {
+                        mKomentar.add(komentar);
                     }
                     mAdapter.notifyDataSetChanged();
                     tvBalas.setText("Balasan Komplain");
                     layout_kerangka.setVisibility(View.VISIBLE);
-
-                } else{
+                } else {
                     tvBalas.setText("Belum Ada Balasan");
                     layout_kerangka.setVisibility(View.VISIBLE);
                 }
             }
 
             @Override
-            public void onCancelled(DatabaseError databaseError) {
-                Toast.makeText(DetailIUMKActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();
+            public void onFailure(Call<List<Komentar>> call, Throwable t) {
+                Log.i("errorResponse", t.toString());
             }
         });
     }
 }
+
+
+//                        @Override
+//
+//                        public void onSuccess(Void aVoid) { FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("balasan").addListenerForSingleValueEvent(new ValueEventListener() {
+//                            @Override
+//                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
+//                                if (dataSnapshot.exists()) {
+//                                    long totalBalas;
+//                                    totalBalas = (dataSnapshot.getChildrenCount());
+//                                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_balas").setValue(String.valueOf(totalBalas))
+//                                            .addOnSuccessListener(new OnSuccessListener<Void>() {
+//                                                @Override
+//                                                public void onSuccess(Void aVoid) {
+//                                                    Penerima = emailDetailTextView.getText().toString();
+//                                                    Penerima = Penerima.replaceAll("[@.-]", "");
+//
+//                                                    TOPIC = "/topics/"+Penerima;
+//                                                    NOTIFICATION_TITLE = "Balasan Komplain Dari Admin";
+//                                                    NOTIFICATION_MESSAGE = input.getText().toString();
+//
+//                                                    JSONObject notification = new JSONObject();
+//                                                    JSONObject notifcationBody = new JSONObject();
+//                                                    try {
+//                                                        notifcationBody.put("title", NOTIFICATION_TITLE);
+//                                                        notifcationBody.put("message", NOTIFICATION_MESSAGE);
+//
+//                                                        notification.put("to", TOPIC);
+//                                                        notification.put("data", notifcationBody);
+//                                                    } catch (JSONException e) {
+//                                                        Log.e(TAG, "onCreate: " + e.getMessage() );
+//                                                    }
+//                                                    sendNotification(notification);
+//
+//                                                    linear2.setVisibility(View.GONE);
+//                                                    input.setText("");
+//                                                    btnTambahKomentar.setVisibility(View.VISIBLE);
+//                                                    mDialog.dismiss();
+//
+//                                                    scrollView.postDelayed(new Runnable() {
+//                                                        @Override
+//                                                        public void run() {
+//                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);
+//                                                            scrollView.isSmoothScrollingEnabled();
+//                                                        }
+//                                                    }, 200);
+//                                                }
+//                                            });
+//                                } else {
+//                                    FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_balas").setValue("0")
+//                                            .addOnSuccessListener(new OnSuccessListener<Void>() {
+//                                                @Override
+//                                                public void onSuccess(Void aVoid) {
+//                                                    Penerima = emailDetailTextView.getText().toString();
+//                                                    Penerima = Penerima.replaceAll("[@.-]", "");
+//
+//                                                    TOPIC = "/topics/"+Penerima;
+//                                                    NOTIFICATION_TITLE = "Balasan Komplain Dari Admin";
+//                                                    NOTIFICATION_MESSAGE = input.getText().toString();
+//
+//                                                    JSONObject notification = new JSONObject();
+//                                                    JSONObject notifcationBody = new JSONObject();
+//                                                    try {
+//                                                        notifcationBody.put("title", NOTIFICATION_TITLE);
+//                                                        notifcationBody.put("message", NOTIFICATION_MESSAGE);
+//
+//                                                        notification.put("to", TOPIC);
+//                                                        notification.put("data", notifcationBody);
+//                                                    } catch (JSONException e) {
+//                                                        Log.e(TAG, "onCreate: " + e.getMessage() );
+//                                                    }
+//                                                    sendNotification(notification);
+//
+//                                                    linear2.setVisibility(View.GONE);
+//                                                    input.setText("");
+//                                                    btnTambahKomentar.setVisibility(View.VISIBLE);
+//                                                    mDialog.dismiss();
+//
+//                                                    scrollView.postDelayed(new Runnable() {
+//                                                        @Override
+//                                                        public void run() {
+//                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);
+//                                                            scrollView.isSmoothScrollingEnabled();
+//                                                        }
+//                                                    }, 200);
+//                                                }
+//                                            });
+//                                    public void onResponse(Call<Komentar> call, retrofit2.Response<Komentar> response) {
+//                                        Log.i("responseAPI", response.body().toString());
+//                                        linear2.setVisibility(View.GONE);
+//                                        input.setText("");
+//                                        btnTambahKomentar.setVisibility(View.VISIBLE);
+//                                        mDialog.dismiss();
+//
+//                                        scrollView.postDelayed(new Runnable() {
+//                                            @Override
+//                                            public void run() {
+//                                                scrollView.fullScroll(ScrollView.FOCUS_DOWN);
+//                                                scrollView.isSmoothScrollingEnabled();
+//                                }
+//                                        }, 200);
+//                                        displayKomentar();
+//                                    }
+//
+//                            }
+//                        });
+//                        }
+//                    });
+//                }
+//            }
+//        });
+//
+//        btnBack.setOnClickListener(new View.OnClickListener() {
+//            @Override
+//            public void onClick(View v) {
+//                finish();
+//            }
+//        });
+//
+//        btnDokumen.setOnClickListener(new View.OnClickListener() {
+//            @Override
+//            public void onClick(View v) {
+//                downloadFile(DetailIUMKActivity.this, "dokumen-iumk-"+nama, ".docx", DIRECTORY_DOWNLOADS, berkas);
+//            }
+//        });
+//    }
+//
+//    public void downloadFile(Context context, String fileName, String fileExtension, String downloadDirectory, String url){
+//        DownloadManager downloadManager = (DownloadManager) context.getSystemService(Context.DOWNLOAD_SERVICE);
+//        Uri uri = Uri.parse(url);
+//        DownloadManager.Request request = new DownloadManager.Request(uri);
+//
+//        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
+//        request.setVisibleInDownloadsUi(true);
+//        request.setDestinationInExternalFilesDir(context, downloadDirectory, fileName + fileExtension);
+//        downloadManager.enqueue(request);
+//    }
+//
+//    private void sendNotification(JSONObject notification) {
+//        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(FCM_API, notification,
+//                new Response.Listener<JSONObject>() {
+//                    @Override
+//                    public void onResponse(JSONObject response) {
+//                        Log.i(TAG, "onResponse: " + response.toString());
+//                    }
+//                },
+//                new Response.ErrorListener() {
+//                    @Override
+//                    public void onErrorResponse(VolleyError error) {
+//                        Toast.makeText(DetailIUMKActivity.this, "Request error!", Toast.LENGTH_LONG).show();
+//                        Log.i(TAG, "onErrorResponse: Didn't work");
+//                    }
+//                }){
+//            @Override
+//            public Map<String, String> getHeaders() throws AuthFailureError {
+//                Map<String, String> params = new HashMap<>();
+//                params.put("Authorization", serverKey);
+//                params.put("Content-Type", contentType);
+//                return params;
+//            }
+//        };
+//        MySingleton.getInstance(getApplicationContext()).addToRequestQueue(jsonObjectRequest);
+//    }
+//
+//    @Override
+//    public void onBackPressed() {
+//        finish();
+//    }
+//
+//    private void displayKomentar() {
+//        mRecyclerView = findViewById(R.id.list_of_komentar);
+//        RecyclerView.LayoutManager layoutManager = new FlexboxLayoutManager(this);
+//        mRecyclerView.setLayoutManager(layoutManager);
+//
+//        mKomentar = new ArrayList<>();
+//        mAdapter = new RecyclerAdapterKomentar (DetailIUMKActivity.this, mKomentar);
+//        mRecyclerView.setAdapter(mAdapter);
+//
+//        mStorage = FirebaseStorage.getInstance();
+//        mStorageRef = FirebaseStorage.getInstance().getReference("foto_komentar");
+//        mDatabaseRef = FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("balasan");
+//        mDBListener = mDatabaseRef.addValueEventListener(new ValueEventListener() {
+//            @Override
+//            public void onDataChange(DataSnapshot dataSnapshot) {
+//
+//                if (dataSnapshot.exists()) {
+//                    mKomentar.clear();
+//
+//                    for (DataSnapshot komentarSnapshot : dataSnapshot.getChildren()) {
+//                        Komentar upload = komentarSnapshot.getValue(Komentar.class);
+//                        upload.setKey(komentarSnapshot.getKey());
+//                        mKomentar.add(upload);
+//                    }
+//                    mAdapter.notifyDataSetChanged();
+//                    tvBalas.setText("Balasan Komplain");
+//                    layout_kerangka.setVisibility(View.VISIBLE);
+//
+//                } else{
+//                    tvBalas.setText("Belum Ada Balasan");
+//                    layout_kerangka.setVisibility(View.VISIBLE);
+//                }
+//            }
+//
+//            @Override
+//            public void onCancelled(DatabaseError databaseError) {
+//                Toast.makeText(DetailIUMKActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();
+//            }
+//        });
+//    }
+//}
Index: app/src/main/res/xml/network_security_config.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<network-security-config>\r\n    <domain-config cleartextTrafficPermitted=\"true\">\r\n        <domain includeSubdomains=\"true\">192.168.216.94</domain>\r\n    </domain-config>\r\n</network-security-config>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/xml/network_security_config.xml b/app/src/main/res/xml/network_security_config.xml
--- a/app/src/main/res/xml/network_security_config.xml	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/res/xml/network_security_config.xml	(date 1661785398364)
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="utf-8"?>
 <network-security-config>
     <domain-config cleartextTrafficPermitted="true">
-        <domain includeSubdomains="true">192.168.216.94</domain>
+        <domain includeSubdomains="true">192.168.1.14</domain>
     </domain-config>
 </network-security-config>
Index: app/src/main/res/layout/activity_detail_kependudukan.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#69F0AE\"\r\n    tools:context=\".DetailKependudukanActivity\"\r\n    app:layout_behavior=\"@string/appbar_scrolling_view_behavior\"\r\n    tools:showIn=\"@layout/app_bar_detail_kependudukan\">\r\n\r\n    <TextView\r\n        android:id=\"@+id/emailTextView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:alpha=\"0\"/>\r\n\r\n    <ScrollView\r\n        android:id=\"@+id/scrollView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:paddingTop=\"5dp\"\r\n            android:paddingBottom=\"5dp\"\r\n            android:paddingLeft=\"5dp\"\r\n            android:paddingRight=\"5dp\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <RelativeLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:padding=\"1dp\"\r\n                android:background=\"@drawable/rounded_uploadberita\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/fotoDetailImageView\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"220dp\"\r\n                    android:src=\"@mipmap/ic_launcher\"\r\n                    android:scaleType=\"centerCrop\"\r\n                    android:adjustViewBounds=\"true\"/>\r\n            </RelativeLayout>\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Tap gambar untuk melihat gambar dalam ukuran penuh\"\r\n                android:textSize=\"10sp\"\r\n                android:gravity=\"center\"\r\n                android:padding=\"3dp\"\r\n                android:background=\"#ffffff\"/>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:background=\"#FFFFFF\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <TableLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\">\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\"\r\n                        android:background=\"#FFFFFF\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"No. Daftar Komplain\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/nomorTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"411.3/01/Rangkasbitung/2020\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\"\r\n                        android:background=\"#F0E9E9\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Pengirim\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/namaTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"Jatmika Muhammad\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Alamat\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/alamatTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"Kp. Selahaur\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\"\r\n                        android:background=\"#F0E9E9\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Tanggal Kirim\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/tanggalTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"25 November 2019\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n                </TableLayout>\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:paddingTop=\"10dp\"\r\n                    android:paddingLeft=\"10dp\"\r\n                    android:paddingRight=\"10dp\"\r\n                    android:text=\"Isi Komplain\"\r\n                    android:textSize=\"12sp\"\r\n                    android:textColor=\"#000000\"\r\n                    android:background=\"#FFFFFF\"/>\r\n\r\n                <View\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"1dp\"\r\n                    android:background=\"#000000\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_marginRight=\"10dp\"\r\n                    android:layout_marginTop=\"5dp\"/>\r\n\r\n                <com.uncopt.android.widget.text.justify.JustifiedTextView\r\n                    android:id=\"@+id/isiTextView\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:paddingTop=\"5dp\"\r\n                    android:paddingBottom=\"10dp\"\r\n                    android:paddingLeft=\"10dp\"\r\n                    android:paddingRight=\"10dp\"\r\n                    android:background=\"#ffffff\"\r\n                    android:text=\"Isi Komplain\"\r\n                    android:textColor=\"#5117B6\"\r\n                    android:textSize=\"14sp\"\r\n                    android:lineSpacingExtra=\"3dp\"/>\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:paddingTop=\"10dp\"\r\n                    android:paddingLeft=\"10dp\"\r\n                    android:paddingRight=\"10dp\"\r\n                    android:text=\"Status Komplain\"\r\n                    android:textSize=\"12sp\"\r\n                    android:textColor=\"#000000\"\r\n                    android:background=\"#FFFFFF\"/>\r\n\r\n                <View\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"1dp\"\r\n                    android:background=\"#000000\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_marginRight=\"10dp\"\r\n                    android:layout_marginTop=\"5dp\"/>\r\n\r\n                <RelativeLayout\r\n                    android:id=\"@+id/relative1\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"50dp\"\r\n                    android:layout_marginTop=\"7dp\"\r\n                    android:layout_marginBottom=\"10dp\"\r\n                    android:layout_marginStart=\"10dp\"\r\n                    android:layout_marginEnd=\"10dp\"\r\n                    android:gravity=\"center\"\r\n                    android:background=\"#235f7e\">\r\n                    <TextView\r\n                        android:id=\"@+id/statusTextView\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_centerVertical=\"true\"\r\n                        android:paddingLeft=\"10dp\"\r\n                        android:paddingRight=\"10dp\"\r\n                        android:text=\"Menunggu Diproses\"\r\n                        android:textColor=\"#FFFFFF\"\r\n                        android:textSize=\"14sp\"\r\n                        android:textStyle=\"bold\"\r\n                        android:gravity=\"center\"/>\r\n                </RelativeLayout>\r\n\r\n            </LinearLayout>\r\n\r\n            <TextView\r\n                android:id=\"@+id/tvBalas\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:text=\"Balas\"\r\n                android:textStyle=\"bold\"\r\n                android:textSize=\"18sp\"\r\n                android:textColor=\"#235f7e\"/>\r\n\r\n            <View\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"2dp\"\r\n                android:layout_marginBottom=\"10dp\"\r\n                android:background=\"#235f7e\"/>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/layout_kerangka\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:orientation=\"vertical\"\r\n                android:background=\"@drawable/rounded_komentar\">\r\n\r\n                <androidx.core.widget.NestedScrollView\r\n                    android:id=\"@+id/nestedScroll\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:fillViewport=\"true\"\r\n                    android:scrollbars=\"none\">\r\n\r\n                    <androidx.recyclerview.widget.RecyclerView\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginBottom=\"10dp\"\r\n                        android:nestedScrollingEnabled=\"false\"\r\n                        android:id=\"@+id/list_of_komentar\" />\r\n\r\n                </androidx.core.widget.NestedScrollView>\r\n\r\n                <Button\r\n                    android:id=\"@+id/btnTambahKomentar\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginBottom=\"10dp\"\r\n                    android:text=\"Tambah Balasan\"\r\n                    android:textColor=\"#ffffff\"\r\n                    android:textStyle=\"bold\"\r\n                    android:padding=\"15dp\"\r\n                    android:background=\"@drawable/rounded_buttonkomentar\" />\r\n\r\n                <LinearLayout\r\n                    android:id=\"@+id/linear2\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginBottom=\"10dp\"\r\n                    android:focusable=\"true\"\r\n                    android:focusableInTouchMode=\"true\"\r\n                    android:orientation=\"horizontal\"\r\n                    android:padding=\"5dp\"\r\n                    android:background=\"#ffffff\">\r\n\r\n                    <com.google.android.material.textfield.TextInputLayout\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_weight=\"0.9\">\r\n\r\n                        <EditText\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:hint=\"Tulis Balasan\"\r\n                            android:id=\"@+id/input\" />\r\n                    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n                    <com.google.android.material.floatingactionbutton.FloatingActionButton\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginEnd=\"5dp\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:clickable=\"true\"\r\n                        android:src=\"@drawable/ic_send_black_24dp\"\r\n                        android:id=\"@+id/fab\"\r\n                        android:tint=\"@android:color/white\"\r\n                        app:fabSize=\"mini\"/>\r\n\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n        </LinearLayout>\r\n    </ScrollView>\r\n\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_detail_kependudukan.xml b/app/src/main/res/layout/activity_detail_kependudukan.xml
--- a/app/src/main/res/layout/activity_detail_kependudukan.xml	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/res/layout/activity_detail_kependudukan.xml	(date 1661795202128)
@@ -39,9 +39,9 @@
                     android:id="@+id/fotoDetailImageView"
                     android:layout_width="match_parent"
                     android:layout_height="220dp"
-                    android:src="@mipmap/ic_launcher"
+                    android:adjustViewBounds="true"
                     android:scaleType="centerCrop"
-                    android:adjustViewBounds="true"/>
+                    android:src="@mipmap/ic_launcher" />
             </RelativeLayout>
 
             <TextView
@@ -85,7 +85,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="411.3/01/Rangkasbitung/2020"
+                            android:text="411.3/01/Rancabango/2022"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
@@ -111,7 +111,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="Jatmika Muhammad"
+                            android:text="Rohmatullah"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
@@ -136,7 +136,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="Kp. Selahaur"
+                            android:text="Kp. Ampel"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
@@ -162,7 +162,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="25 November 2019"
+                            android:text="25 Agustus 2022"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
Index: app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentTutupJalan.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.jatmika.admin_e_complaintrangkasbitung;\r\n\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomplain;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Komplain;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.PersentaseKomplain;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n */\r\npublic class FragmentTutupJalan extends Fragment implements RecyclerAdapterKomplain.OnItemClickListener {\r\n\r\n    private RecyclerAdapterKomplain mAdapter;\r\n    private FirebaseStorage mStorage;\r\n    private DatabaseReference mDatabaseRef;\r\n    private List<Komplain> mPengaduans;\r\n    private TextView tvNoData;\r\n    private Context context;\r\n\r\n    private void openDetailKomplainTutupJalan(String[] data){\r\n        Intent intent = new Intent(getActivity(), DetailTutupJalanActivity.class);\r\n        intent.putExtra(\"IMAGE_KEY\",data[0]);\r\n        intent.putExtra(\"BERKAS_KEY\",data[1]);\r\n        intent.putExtra(\"NOMOR_KEY\",data[2]);\r\n        intent.putExtra(\"NIK_KEY\",data[3]);\r\n        intent.putExtra(\"EMAIL_KEY\",data[4]);\r\n        intent.putExtra(\"NAMA_KEY\",data[5]);\r\n        intent.putExtra(\"ALAMAT_KEY\",data[6]);\r\n        intent.putExtra(\"TANGGAL_KEY\",data[7]);\r\n        intent.putExtra(\"NAMALOKASI_KEY\",data[8]);\r\n        intent.putExtra(\"LATITUDE_KEY\",data[9]);\r\n        intent.putExtra(\"LONGITUDE_KEY\",data[10]);\r\n        intent.putExtra(\"ISI_KEY\",data[11]);\r\n        intent.putExtra(\"KATEGORI_KEY\",data[12]);\r\n        intent.putExtra(\"STATUS_KEY\",data[13]);\r\n        intent.putExtra(\"JML_LIHAT_KEY\",data[14]);\r\n        intent.putExtra(\"JML_SUKA_KEY\",data[15]);\r\n        intent.putExtra(\"JML_BALAS_KEY\",data[16]);\r\n        intent.putExtra(\"GETPRIMARY_KEY\",data[17]);\r\n        startActivity(intent);\r\n    }\r\n\r\n    private String jumlahKomplainIUMK, jumlahKomplainKependudukan, jumlahKomplainKTP,\r\n            jumlahKomplainNikah, jumlahKomplainSPPT, jumlahKomplainTutupJalan;\r\n\r\n    public FragmentTutupJalan() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View view = inflater.inflate(R.layout.fragment_tutup_jalan, container, false);\r\n\r\n        context = getActivity().getApplicationContext();\r\n\r\n        tvNoData = view.findViewById(R.id.tvNoData);\r\n        RecyclerView mRecyclerView = view.findViewById(R.id.mRecyclerView);\r\n        mRecyclerView.setHasFixedSize(true);\r\n        mRecyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));\r\n\r\n        mPengaduans = new ArrayList<>();\r\n        mAdapter = new RecyclerAdapterKomplain(getActivity(), mPengaduans);\r\n        mRecyclerView.setAdapter(mAdapter);\r\n        mAdapter.setOnItemClickListener(this);\r\n\r\n        mStorage = FirebaseStorage.getInstance();\r\n        mDatabaseRef = FirebaseDatabase.getInstance().getReference(\"data_komplain\");\r\n\r\n        mDatabaseRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                Query query = mDatabaseRef.orderByChild(\"kategori\").equalTo(\"Komplain Tutup Jalan\");\r\n                query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()) {\r\n                            mPengaduans.clear();\r\n                            for (DataSnapshot komplainSnapshot : dataSnapshot.getChildren()) {\r\n                                Komplain upload = komplainSnapshot.getValue(Komplain.class);\r\n                                upload.setKey(komplainSnapshot.getKey());\r\n                                mPengaduans.add(upload);\r\n                            }\r\n                            mAdapter.notifyDataSetChanged();\r\n                            tvNoData.setVisibility(View.GONE);\r\n                        } else {\r\n                            tvNoData.setVisibility(View.VISIBLE);\r\n                            tvNoData.setText(\"Belum Ada Komplain\");\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError databaseError) {\r\n                Toast.makeText(getActivity(), databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        return view;\r\n    }\r\n\r\n    @Override\r\n    public void onDeleteItemClick(int position) {\r\n        showJumlahKomplain();\r\n\r\n        Komplain selectedItem = mPengaduans.get(position);\r\n        final String selectedKey = selectedItem.getKey();\r\n\r\n        AlertDialog.Builder mBuilder = new AlertDialog.Builder(getActivity());\r\n        View mView = getLayoutInflater().inflate(R.layout.show_loading, null);\r\n\r\n        mBuilder.setView(mView);\r\n        mBuilder.setCancelable(false);\r\n        final AlertDialog mDialog = mBuilder.create();\r\n        mDialog.show();\r\n\r\n        StorageReference imageRef = mStorage.getReferenceFromUrl(selectedItem.getFoto());\r\n        imageRef.delete().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n            @Override\r\n            public void onSuccess(Void aVoid) {\r\n                mDatabaseRef.child(selectedKey).removeValue().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                    @Override\r\n                    public void onSuccess(Void aVoid) {\r\n                        FirebaseDatabase.getInstance().getReference(\"data_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Tutup Jalan\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                if (dataSnapshot.exists()){\r\n                                    long totalData = dataSnapshot.getChildrenCount();\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"jumlah_komplain\").setValue(String.valueOf(totalData));\r\n                                    showJumlahKomplain();\r\n\r\n                                    double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);\r\n                                    double komplainKependudukan = Double.parseDouble(jumlahKomplainKependudukan);\r\n                                    double komplainKTP = Double.parseDouble(jumlahKomplainKTP);\r\n                                    double komplainNikah = Double.parseDouble(jumlahKomplainNikah);\r\n                                    double komplainSPPT = Double.parseDouble(jumlahKomplainSPPT);\r\n                                    double komplainTutupJalan = Double.parseDouble(String.valueOf(totalData));\r\n                                    double TotalPersen2 = (komplainIUMK / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                    double TotalPersen3 = (komplainKependudukan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                    double TotalPersen4 = (komplainKTP / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                    double TotalPersen5 = (komplainNikah / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                    double TotalPersen6 = (komplainSPPT / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                    double TotalPersen7 = (komplainTutupJalan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain IUMK\").child(\"persen\").setValue(String.valueOf(TotalPersen2));\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"persen\").setValue(String.valueOf(TotalPersen3));\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain KTP\").child(\"persen\").setValue(String.valueOf(TotalPersen4));\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"persen\").setValue(String.valueOf(TotalPersen5));\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"persen\").setValue(String.valueOf(TotalPersen6));\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"persen\").setValue(String.valueOf(TotalPersen7));\r\n\r\n                                    mDialog.dismiss();\r\n                                    Toast.makeText(FragmentTutupJalan.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n\r\n                                } else {\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"jumlah_komplain\").setValue(\"0\")\r\n                                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                @Override\r\n                                                public void onSuccess(Void aVoid) {\r\n                                                    showJumlahKomplain();\r\n\r\n                                                    double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);\r\n                                                    double komplainKependudukan = Double.parseDouble(jumlahKomplainKependudukan);\r\n                                                    double komplainKTP = Double.parseDouble(jumlahKomplainKTP);\r\n                                                    double komplainNikah = Double.parseDouble(jumlahKomplainNikah);\r\n                                                    double komplainSPPT = Double.parseDouble(jumlahKomplainSPPT);\r\n                                                    double komplainTutupJalan = 0;\r\n\r\n                                                    if (komplainIUMK == 0 && komplainKependudukan == 0 && komplainKTP == 0\r\n                                                            && komplainNikah == 0 && komplainSPPT == 0){\r\n                                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"persen\").setValue(\"0.0\");\r\n                                                        mDialog.dismiss();\r\n                                                        Toast.makeText(FragmentTutupJalan.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n\r\n                                                    } else {\r\n                                                        double TotalPersen2 = (komplainIUMK / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                        double TotalPersen3 = (komplainKependudukan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                        double TotalPersen4 = (komplainKTP / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                        double TotalPersen5 = (komplainNikah / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                        double TotalPersen6 = (komplainSPPT / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                        double TotalPersen7 = (komplainTutupJalan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n\r\n                                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain IUMK\").child(\"persen\").setValue(String.valueOf(TotalPersen2));\r\n                                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"persen\").setValue(String.valueOf(TotalPersen3));\r\n                                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain KTP\").child(\"persen\").setValue(String.valueOf(TotalPersen4));\r\n                                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"persen\").setValue(String.valueOf(TotalPersen5));\r\n                                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"persen\").setValue(String.valueOf(TotalPersen6));\r\n                                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"persen\").setValue(String.valueOf(TotalPersen7));\r\n\r\n                                                        mDialog.dismiss();\r\n                                                        Toast.makeText(FragmentTutupJalan.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n                                                    }\r\n                                                }\r\n                                            });\r\n                                }\r\n                            }\r\n\r\n                            @Override\r\n                            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onItemClick(int position) {\r\n        Komplain clickedKomplain = mPengaduans.get(position);\r\n        String[] komplainData = {clickedKomplain.getFoto(), clickedKomplain.getBerkas(), clickedKomplain.getNomor(),\r\n                clickedKomplain.getNik(), clickedKomplain.getEmail(), clickedKomplain.getNama(), clickedKomplain.getAlamat(),\r\n                clickedKomplain.getTanggal(), clickedKomplain.getNamalokasi(), String.valueOf(clickedKomplain.getLatitude()),\r\n                String.valueOf(clickedKomplain.getLongitude()), clickedKomplain.getIsi(), clickedKomplain.getKategori(),\r\n                clickedKomplain.getStatus(), clickedKomplain.getJml_lihat(), clickedKomplain.getJml_suka(),\r\n                clickedKomplain.getJml_balas(), clickedKomplain.getKey()};\r\n\r\n        openDetailKomplainTutupJalan(komplainData);\r\n    }\r\n\r\n    private void showJumlahKomplain(){\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain IUMK\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainIUMK = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainIUMK = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Kependudukan\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainKependudukan = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainKependudukan = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain KTP\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainKTP = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainKTP = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Nikah\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainNikah = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainNikah = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain SPPT\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainSPPT = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainSPPT = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Tutup Jalan\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainTutupJalan = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainTutupJalan = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentTutupJalan.java b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentTutupJalan.java
--- a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentTutupJalan.java	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentTutupJalan.java	(date 1661854985811)
@@ -27,16 +27,21 @@
 import com.google.firebase.database.ValueEventListener;
 import com.google.firebase.storage.FirebaseStorage;
 import com.google.firebase.storage.StorageReference;
+import com.jatmika.admin_e_complaintrangkasbitung.API.API;
+import com.jatmika.admin_e_complaintrangkasbitung.API.APIUtility;
 import com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomplain;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.Komplain;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.PersentaseKomplain;
+import com.jatmika.admin_e_complaintrangkasbitung.SharePref.SharePref;
 
 import org.json.JSONException;
 import org.json.JSONObject;
 
 import java.util.ArrayList;
 import java.util.List;
-
+import retrofit2.Call;
+import retrofit2.Callback;
+import retrofit2.Response;
 
 /**
  * A simple {@link Fragment} subclass.
@@ -49,6 +54,8 @@
     private List<Komplain> mPengaduans;
     private TextView tvNoData;
     private Context context;
+    private SharePref sharePref;
+    private API apiService;
 
     private void openDetailKomplainTutupJalan(String[] data){
         Intent intent = new Intent(getActivity(), DetailTutupJalanActivity.class);
@@ -88,6 +95,8 @@
         View view = inflater.inflate(R.layout.fragment_tutup_jalan, container, false);
 
         context = getActivity().getApplicationContext();
+        apiService = APIUtility.getAPI();
+        sharePref = new SharePref(context);
 
         tvNoData = view.findViewById(R.id.tvNoData);
         RecyclerView mRecyclerView = view.findViewById(R.id.mRecyclerView);
@@ -101,40 +110,21 @@
 
         mStorage = FirebaseStorage.getInstance();
         mDatabaseRef = FirebaseDatabase.getInstance().getReference("data_komplain");
-
-        mDatabaseRef.addValueEventListener(new ValueEventListener() {
+        Log.i("token", sharePref.getTokenApi());
+        apiService.getComplain("Bearer "+sharePref.getTokenApi(), "Penutupan Jalan").enqueue(new Callback<List<Komplain>>() {
             @Override
-            public void onDataChange(DataSnapshot dataSnapshot) {
-
-                Query query = mDatabaseRef.orderByChild("kategori").equalTo("Komplain Tutup Jalan");
-                query.addListenerForSingleValueEvent(new ValueEventListener() {
-                    @Override
-                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
-                        if (dataSnapshot.exists()) {
-                            mPengaduans.clear();
-                            for (DataSnapshot komplainSnapshot : dataSnapshot.getChildren()) {
-                                Komplain upload = komplainSnapshot.getValue(Komplain.class);
-                                upload.setKey(komplainSnapshot.getKey());
-                                mPengaduans.add(upload);
-                            }
-                            mAdapter.notifyDataSetChanged();
-                            tvNoData.setVisibility(View.GONE);
-                        } else {
-                            tvNoData.setVisibility(View.VISIBLE);
-                            tvNoData.setText("Belum Ada Komplain");
-                        }
-                    }
+            public void onResponse(Call<List<Komplain>> call, Response<List<Komplain>> response) {
+                Log.i("response", response.body().toString());
+                for (Komplain komplain : response.body()){
+                    mPengaduans.add(komplain);
+                }
+                mAdapter.notifyDataSetChanged();
+                tvNoData.setVisibility(View.GONE);
+            }
 
-                    @Override
-                    public void onCancelled(@NonNull DatabaseError databaseError) {
-
-                    }
-                });
-            }
-
             @Override
-            public void onCancelled(DatabaseError databaseError) {
-                Toast.makeText(getActivity(), databaseError.getMessage(), Toast.LENGTH_SHORT).show();
+            public void onFailure(Call<List<Komplain>> call, Throwable t) {
+                Log.i("responseError", t.toString());
             }
         });
 
Index: app/src/main/res/layout/activity_detail_nikah.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#E040FB\"\r\n    tools:context=\".DetailNikahActivity\"\r\n    app:layout_behavior=\"@string/appbar_scrolling_view_behavior\"\r\n    tools:showIn=\"@layout/app_bar_detail_nikah\">\r\n\r\n    <TextView\r\n        android:id=\"@+id/emailTextView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:alpha=\"0\"/>\r\n\r\n    <ScrollView\r\n        android:id=\"@+id/scrollView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:paddingTop=\"5dp\"\r\n            android:paddingBottom=\"5dp\"\r\n            android:paddingLeft=\"5dp\"\r\n            android:paddingRight=\"5dp\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:background=\"#FFFFFF\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <TableLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\">\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\"\r\n                        android:background=\"#FFFFFF\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"No. Daftar Komplain\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/nomorTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"411.3/01/Rangkasbitung/2020\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\"\r\n                        android:background=\"#F0E9E9\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Pengirim\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/namaTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"Jatmika Muhammad\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Alamat\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/alamatTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"Kp. Selahaur\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\"\r\n                        android:background=\"#F0E9E9\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Tanggal Kirim\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/tanggalTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"25 November 2019\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n                </TableLayout>\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:paddingTop=\"10dp\"\r\n                    android:paddingLeft=\"10dp\"\r\n                    android:paddingRight=\"10dp\"\r\n                    android:text=\"Isi Komplain\"\r\n                    android:textSize=\"12sp\"\r\n                    android:textColor=\"#000000\"\r\n                    android:background=\"#FFFFFF\"/>\r\n\r\n                <View\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"1dp\"\r\n                    android:background=\"#000000\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_marginRight=\"10dp\"\r\n                    android:layout_marginTop=\"5dp\"/>\r\n\r\n                <com.uncopt.android.widget.text.justify.JustifiedTextView\r\n                    android:id=\"@+id/isiTextView\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:paddingTop=\"5dp\"\r\n                    android:paddingBottom=\"10dp\"\r\n                    android:paddingLeft=\"10dp\"\r\n                    android:paddingRight=\"10dp\"\r\n                    android:background=\"#ffffff\"\r\n                    android:text=\"Isi Komplain\"\r\n                    android:textColor=\"#5117B6\"\r\n                    android:textSize=\"12sp\"\r\n                    android:lineSpacingExtra=\"3dp\"/>\r\n\r\n                <LinearLayout\r\n                    android:id=\"@+id/linearLayout\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_marginBottom=\"5dp\"\r\n                    android:orientation=\"vertical\">\r\n                    <TextView\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:paddingLeft=\"10dp\"\r\n                        android:paddingRight=\"10dp\"\r\n                        android:text=\"Komplain Ini Disertai Dokumen\"\r\n                        android:textSize=\"12sp\"\r\n                        android:textColor=\"#000000\"\r\n                        android:background=\"#FFFFFF\"/>\r\n\r\n                    <View\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"1dp\"\r\n                        android:background=\"#000000\"\r\n                        android:layout_marginLeft=\"10dp\"\r\n                        android:layout_marginRight=\"10dp\"\r\n                        android:layout_marginTop=\"5dp\"/>\r\n\r\n                    <Button\r\n                        android:id=\"@+id/btnDokumen\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"40dp\"\r\n                        android:layout_marginTop=\"7dp\"\r\n                        android:layout_marginStart=\"10dp\"\r\n                        android:drawableStart=\"@drawable/ic_download\"\r\n                        android:background=\"@drawable/rounded_button4\"\r\n                        android:text=\"Unduh Berkas\"\r\n                        android:textColor=\"#FFFFFF\"\r\n                        android:textSize=\"12sp\"\r\n                        android:textStyle=\"bold\"\r\n                        android:paddingEnd=\"15dp\"/>\r\n                </LinearLayout>\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:paddingTop=\"10dp\"\r\n                    android:paddingLeft=\"10dp\"\r\n                    android:paddingRight=\"10dp\"\r\n                    android:text=\"Status Komplain\"\r\n                    android:textSize=\"12sp\"\r\n                    android:textColor=\"#000000\"\r\n                    android:background=\"#FFFFFF\"/>\r\n\r\n                <View\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"1dp\"\r\n                    android:background=\"#000000\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_marginRight=\"10dp\"\r\n                    android:layout_marginTop=\"5dp\"/>\r\n\r\n                <RelativeLayout\r\n                    android:id=\"@+id/relative1\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"50dp\"\r\n                    android:layout_marginTop=\"7dp\"\r\n                    android:layout_marginBottom=\"10dp\"\r\n                    android:layout_marginStart=\"10dp\"\r\n                    android:layout_marginEnd=\"10dp\"\r\n                    android:gravity=\"center\"\r\n                    android:background=\"#235f7e\">\r\n                    <TextView\r\n                        android:id=\"@+id/statusTextView\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_centerVertical=\"true\"\r\n                        android:paddingLeft=\"10dp\"\r\n                        android:paddingRight=\"10dp\"\r\n                        android:text=\"Menunggu Diproses\"\r\n                        android:textColor=\"#FFFFFF\"\r\n                        android:textSize=\"14sp\"\r\n                        android:textStyle=\"bold\"\r\n                        android:gravity=\"center\"/>\r\n                </RelativeLayout>\r\n\r\n            </LinearLayout>\r\n\r\n            <TextView\r\n                android:id=\"@+id/tvBalas\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:text=\"Balas\"\r\n                android:textStyle=\"bold\"\r\n                android:textSize=\"18sp\"\r\n                android:textColor=\"#FFFFFF\"/>\r\n\r\n            <View\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"2dp\"\r\n                android:layout_marginBottom=\"10dp\"\r\n                android:background=\"#FFFFFF\"/>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/layout_kerangka\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:orientation=\"vertical\"\r\n                android:background=\"@drawable/rounded_komentar\">\r\n\r\n                <androidx.core.widget.NestedScrollView\r\n                    android:id=\"@+id/nestedScroll\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:fillViewport=\"true\"\r\n                    android:scrollbars=\"none\">\r\n\r\n                    <androidx.recyclerview.widget.RecyclerView\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginBottom=\"10dp\"\r\n                        android:nestedScrollingEnabled=\"false\"\r\n                        android:id=\"@+id/list_of_komentar\" />\r\n\r\n                </androidx.core.widget.NestedScrollView>\r\n\r\n                <Button\r\n                    android:id=\"@+id/btnTambahKomentar\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginBottom=\"10dp\"\r\n                    android:text=\"Tambah Balasan\"\r\n                    android:textColor=\"#ffffff\"\r\n                    android:textStyle=\"bold\"\r\n                    android:padding=\"15dp\"\r\n                    android:background=\"@drawable/rounded_buttonkomentar\" />\r\n\r\n                <LinearLayout\r\n                    android:id=\"@+id/linear2\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginBottom=\"10dp\"\r\n                    android:focusable=\"true\"\r\n                    android:focusableInTouchMode=\"true\"\r\n                    android:orientation=\"horizontal\"\r\n                    android:padding=\"5dp\"\r\n                    android:background=\"#ffffff\">\r\n\r\n                    <com.google.android.material.textfield.TextInputLayout\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_weight=\"0.9\">\r\n\r\n                        <EditText\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:hint=\"Tulis Balasan\"\r\n                            android:id=\"@+id/input\" />\r\n                    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n                    <com.google.android.material.floatingactionbutton.FloatingActionButton\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginEnd=\"5dp\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:clickable=\"true\"\r\n                        android:src=\"@drawable/ic_send_black_24dp\"\r\n                        android:id=\"@+id/fab\"\r\n                        android:tint=\"@android:color/white\"\r\n                        app:fabSize=\"mini\"/>\r\n\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n        </LinearLayout>\r\n    </ScrollView>\r\n\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_detail_nikah.xml b/app/src/main/res/layout/activity_detail_nikah.xml
--- a/app/src/main/res/layout/activity_detail_nikah.xml	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/res/layout/activity_detail_nikah.xml	(date 1661793743306)
@@ -60,7 +60,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="411.3/01/Rangkasbitung/2020"
+                            android:text="411.3/01/Rancabango/2022"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
@@ -86,7 +86,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="Jatmika Muhammad"
+                            android:text="Rohmatullah"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
@@ -111,7 +111,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="Kp. Selahaur"
+                            android:text="Kp. Ampel"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
@@ -137,7 +137,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="25 November 2019"
+                            android:text="25 Agustus 2022"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
Index: app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/API/APIUtility.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.jatmika.admin_e_complaintrangkasbitung.API;\r\n\r\npublic class APIUtility {\r\n    public static final String base_url = \"http://192.168.216.94:8000\";\r\n\r\n    public static API getAPI(){\r\n        return RetrofitClient.getClient(base_url).create(API.class);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/API/APIUtility.java b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/API/APIUtility.java
--- a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/API/APIUtility.java	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/API/APIUtility.java	(date 1661785398395)
@@ -1,7 +1,7 @@
 package com.jatmika.admin_e_complaintrangkasbitung.API;
 
 public class APIUtility {
-    public static final String base_url = "http://192.168.216.94:8000";
+    public static final String base_url = "http://192.168.1.14:8000";
 
     public static API getAPI(){
         return RetrofitClient.getClient(base_url).create(API.class);
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/drawable/back_arrow.xml\" value=\"0.2265\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/drawable/background_close.xml\" value=\"0.2265\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/drawable/ic_email.xml\" value=\"0.2265\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/drawable/ic_forum_black_24dp.xml\" value=\"0.2265\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/drawable/ic_lihat.xml\" value=\"0.2265\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/drawable/ic_persentase.xml\" value=\"0.2065\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/drawable/rounded_uploadberita.xml\" value=\"0.2265\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/drawable/state_list.xml\" value=\"0.2265\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/drawable/status_menunggu.xml\" value=\"0.2265\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/drawable/status_proses.xml\" value=\"0.2265\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/drawable/status_selesai.xml\" value=\"0.2265\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_detail_berita.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_detail_data_user.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_detail_infrastruktur.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_detail_iumk.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_detail_kependudukan.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_detail_ktp.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_detail_nikah.xml\" value=\"0.2\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_detail_tutup_jalan.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_developer.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_input_penduduk.xml\" value=\"0.2\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_kecamatan.xml\" value=\"0.1\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_login.xml\" value=\"0.2\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_main.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_persentase_komplain.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_splash.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_tambah_berita.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_ubah_status.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_data_penduduk.xml\" value=\"0.176\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_detail_berita.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_detail_data_user.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_detail_infrastruktur.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_detail_iumk.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_detail_kependudukan.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_detail_ktp.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_detail_nikah.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_detail_sppt.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_detail_tutup_jalan.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_developer.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_input_penduduk.xml\" value=\"0.23007246376811594\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_kecamatan.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_main.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_persentase.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_status.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/app_bar_tambah_berita.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/content_main.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/data_penduduk.xml\" value=\"0.2\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_berita.xml\" value=\"0.16\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_data_user.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_infrastruktur.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_kependudukan.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_ktp.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_map.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_nikah.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_sppt.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_tbhpenduduk.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_tutup_jalan.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/item_berita.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/item_data_user.xml\" value=\"0.2\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/item_komplain.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/item_proses.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/nav_header_main.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/show_image.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/show_loading.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/show_menunggu.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/show_proses.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/menu/activity_main_drawer.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/menu/main.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/menu/navigation.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml\" value=\"0.2265\" />\r\n        <entry key=\"app/src/main/res/layout/activity_ubah_status.xml\" value=\"0.1\" />\r\n        <entry key=\"app/src/main/res/xml/network_security_config.xml\" value=\"0.1\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"11\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/.idea/misc.xml	(date 1661793743770)
@@ -21,6 +21,7 @@
         <entry key="..\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_detail_kependudukan.xml" value="0.22826086956521738" />
         <entry key="..\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_detail_ktp.xml" value="0.22826086956521738" />
         <entry key="..\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_detail_nikah.xml" value="0.2" />
+        <entry key="..\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_detail_sppt.xml" value="0.23007246376811594" />
         <entry key="..\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_detail_tutup_jalan.xml" value="0.264" />
         <entry key="..\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_developer.xml" value="0.22826086956521738" />
         <entry key="..\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/activity_input_penduduk.xml" value="0.2" />
@@ -51,6 +52,7 @@
         <entry key="..\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/content_main.xml" value="0.22826086956521738" />
         <entry key="..\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/data_penduduk.xml" value="0.2" />
         <entry key="..\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_berita.xml" value="0.16" />
+        <entry key="..\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_complaint.xml" value="0.23007246376811594" />
         <entry key="..\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_data_user.xml" value="0.22826086956521738" />
         <entry key="..\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_infrastruktur.xml" value="0.22826086956521738" />
         <entry key="..\:/Users/Rohmat/Documents/Skirpsi/MKB App - Admin/MKB App - Admin/app/src/main/res/layout/fragment_kependudukan.xml" value="0.22826086956521738" />
Index: app/src/main/res/layout/activity_detail_infrastruktur.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#448AFF\"\r\n    tools:context=\".DetailInfrastrukturActivity\"\r\n    app:layout_behavior=\"@string/appbar_scrolling_view_behavior\"\r\n    tools:showIn=\"@layout/app_bar_detail_infrastruktur\">\r\n\r\n    <TextView\r\n        android:id=\"@+id/emailTextView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:alpha=\"0\"/>\r\n\r\n    <ScrollView\r\n        android:id=\"@+id/scrollView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"5dp\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <RelativeLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:padding=\"1dp\"\r\n                android:background=\"@drawable/rounded_uploadberita\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/fotoDetailImageView\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"220dp\"\r\n                    android:src=\"@mipmap/ic_launcher\"\r\n                    android:scaleType=\"centerCrop\"\r\n                    android:adjustViewBounds=\"true\"/>\r\n            </RelativeLayout>\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Tap gambar untuk melihat gambar dalam ukuran penuh\"\r\n                android:textSize=\"10sp\"\r\n                android:gravity=\"center\"\r\n                android:padding=\"3dp\"\r\n                android:background=\"#ffffff\"/>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:background=\"#FFFFFF\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <TableLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\">\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\"\r\n                        android:background=\"#FFFFFF\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"No. Daftar Komplain\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/nomorTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"411.3/01/Rangkasbitung/2020\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\"\r\n                        android:background=\"#F0E9E9\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Pengirim\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/namaTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"Jatmika Muhammad\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Alamat\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/alamatTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"Jl. Bakti Manunggal, Kp. Selahaur, Kel. Cijoro Lebak\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\"\r\n                        android:background=\"#F0E9E9\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Tanggal Kirim\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/tanggalTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"25 November 2019\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n                </TableLayout>\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:paddingTop=\"10dp\"\r\n                    android:paddingLeft=\"10dp\"\r\n                    android:paddingRight=\"10dp\"\r\n                    android:text=\"Isi Komplain\"\r\n                    android:textSize=\"12sp\"\r\n                    android:textColor=\"#000000\"\r\n                    android:background=\"#FFFFFF\"/>\r\n\r\n                <View\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"1dp\"\r\n                    android:background=\"#000000\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_marginRight=\"10dp\"\r\n                    android:layout_marginTop=\"5dp\"/>\r\n\r\n                <com.uncopt.android.widget.text.justify.JustifiedTextView\r\n                    android:id=\"@+id/isiTextView\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:paddingTop=\"5dp\"\r\n                    android:paddingBottom=\"10dp\"\r\n                    android:paddingLeft=\"10dp\"\r\n                    android:paddingRight=\"10dp\"\r\n                    android:background=\"#ffffff\"\r\n                    android:text=\"Isi Komplain\"\r\n                    android:textColor=\"#5117B6\"\r\n                    android:textSize=\"14sp\"\r\n                    android:lineSpacingExtra=\"2dp\"/>\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:paddingTop=\"10dp\"\r\n                    android:paddingLeft=\"10dp\"\r\n                    android:paddingRight=\"10dp\"\r\n                    android:text=\"Status Komplain\"\r\n                    android:textSize=\"12sp\"\r\n                    android:textColor=\"#000000\"\r\n                    android:background=\"#FFFFFF\"/>\r\n\r\n                <View\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"1dp\"\r\n                    android:background=\"#000000\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_marginRight=\"10dp\"\r\n                    android:layout_marginTop=\"5dp\"/>\r\n\r\n                <RelativeLayout\r\n                    android:id=\"@+id/relative1\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"50dp\"\r\n                    android:layout_marginTop=\"7dp\"\r\n                    android:layout_marginStart=\"10dp\"\r\n                    android:layout_marginEnd=\"10dp\"\r\n                    android:gravity=\"center\"\r\n                    android:background=\"#235f7e\">\r\n                    <TextView\r\n                        android:id=\"@+id/statusTextView\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_centerVertical=\"true\"\r\n                        android:paddingLeft=\"10dp\"\r\n                        android:paddingRight=\"10dp\"\r\n                        android:text=\"Menunggu Diproses\"\r\n                        android:textColor=\"#FFFFFF\"\r\n                        android:textSize=\"14sp\"\r\n                        android:textStyle=\"bold\"\r\n                        android:gravity=\"center\"/>\r\n                </RelativeLayout>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/lokasi\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:paddingTop=\"10dp\"\r\n                    android:paddingLeft=\"10dp\"\r\n                    android:paddingRight=\"10dp\"\r\n                    android:text=\"Lokasi Kejadian\"\r\n                    android:textSize=\"12sp\"\r\n                    android:textColor=\"#000000\"\r\n                    android:background=\"#FFFFFF\"/>\r\n\r\n                <View\r\n                    android:id=\"@+id/pembatas\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"1dp\"\r\n                    android:background=\"#000000\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_marginRight=\"10dp\"\r\n                    android:layout_marginTop=\"5dp\"/>\r\n\r\n                <FrameLayout\r\n                    android:id=\"@+id/content_frame\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"220dp\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    android:layout_marginStart=\"10dp\"\r\n                    android:layout_marginEnd=\"10dp\"\r\n                    android:layout_marginBottom=\"10dp\"\r\n                    android:background=\"@drawable/rounded_map\"\r\n                    android:padding=\"1dp\">\r\n                </FrameLayout>\r\n            </LinearLayout>\r\n\r\n            <TextView\r\n                android:id=\"@+id/tvBalas\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:text=\"Balas\"\r\n                android:textStyle=\"bold\"\r\n                android:textSize=\"18sp\"\r\n                android:textColor=\"#FFFFFF\"/>\r\n\r\n            <View\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"2dp\"\r\n                android:layout_marginBottom=\"10dp\"\r\n                android:background=\"#FFFFFF\"/>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/layout_kerangka\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:orientation=\"vertical\"\r\n                android:background=\"@drawable/rounded_komentar\">\r\n\r\n                <androidx.core.widget.NestedScrollView\r\n                    android:id=\"@+id/nestedScroll\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:fillViewport=\"true\"\r\n                    android:scrollbars=\"none\">\r\n\r\n                    <androidx.recyclerview.widget.RecyclerView\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginBottom=\"10dp\"\r\n                        android:nestedScrollingEnabled=\"false\"\r\n                        android:id=\"@+id/list_of_komentar\" />\r\n\r\n                </androidx.core.widget.NestedScrollView>\r\n\r\n                <Button\r\n                    android:id=\"@+id/btnTambahKomentar\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginBottom=\"10dp\"\r\n                    android:text=\"Tambah Balasan\"\r\n                    android:textColor=\"#ffffff\"\r\n                    android:textStyle=\"bold\"\r\n                    android:padding=\"15dp\"\r\n                    android:background=\"@drawable/rounded_buttonkomentar\" />\r\n\r\n                <LinearLayout\r\n                    android:id=\"@+id/linear2\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginBottom=\"10dp\"\r\n                    android:focusable=\"true\"\r\n                    android:focusableInTouchMode=\"true\"\r\n                    android:orientation=\"horizontal\"\r\n                    android:padding=\"5dp\"\r\n                    android:background=\"#ffffff\">\r\n\r\n                    <com.google.android.material.textfield.TextInputLayout\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_weight=\"0.9\">\r\n\r\n                        <EditText\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:hint=\"Tulis Balasan\"\r\n                            android:id=\"@+id/input\" />\r\n                    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n                    <com.google.android.material.floatingactionbutton.FloatingActionButton\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginEnd=\"5dp\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:src=\"@drawable/ic_send_black_24dp\"\r\n                        android:id=\"@+id/fab\"\r\n                        android:tint=\"@android:color/white\"\r\n                        app:fabSize=\"mini\"/>\r\n\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n        </LinearLayout>\r\n    </ScrollView>\r\n\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_detail_infrastruktur.xml b/app/src/main/res/layout/activity_detail_infrastruktur.xml
--- a/app/src/main/res/layout/activity_detail_infrastruktur.xml	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/res/layout/activity_detail_infrastruktur.xml	(date 1661793107496)
@@ -82,7 +82,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="411.3/01/Rangkasbitung/2020"
+                            android:text="411.3/01/Rancabango/2022"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
@@ -108,7 +108,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="Jatmika Muhammad"
+                            android:text="Rohmatullah"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
@@ -133,7 +133,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="Jl. Bakti Manunggal, Kp. Selahaur, Kel. Cijoro Lebak"
+                            android:text="Jl. Syeh Nawawi, Kp. Ampel, Kel. Rancabango"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
@@ -159,7 +159,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="25 November 2019"
+                            android:text="25 Agustus 2022"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
Index: app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailNikahActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.jatmika.admin_e_complaintrangkasbitung;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.app.DownloadManager;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.view.animation.Animation;\r\nimport android.view.animation.AnimationUtils;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.ScrollView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.AuthFailureError;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.JsonObjectRequest;\r\nimport com.google.android.flexbox.FlexboxLayoutManager;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomentar;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterProses;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Komentar;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.MySingleton;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Proses;\r\nimport com.uncopt.android.widget.text.justify.JustifiedTextView;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport static android.os.Environment.DIRECTORY_DOWNLOADS;\r\nimport static android.text.TextUtils.isEmpty;\r\n\r\npublic class DetailNikahActivity extends AppCompatActivity {\r\n\r\n    final private String serverKey = \"key=\" + \"AIzaSyDL3TGOXPGwfM7iIf_pX4zqD3IbTr-I45w\";\r\n    final private String contentType = \"application/json\";\r\n    final String TAG = \"NOTIFICATION TAG\";\r\n\r\n    String FCM_API = \"https://fcm.googleapis.com/fcm/send\";\r\n    String NOTIFICATION_TITLE;\r\n    String NOTIFICATION_MESSAGE;\r\n    String TOPIC;\r\n    String Penerima;\r\n    String prosesStatus;\r\n\r\n    TextView nomorDetailTextView, namaDetailTextView, emailDetailTextView, alamatDetailTextView,\r\n            tanggalDetailTextView, tvBalas, tvJudul, statusDetailTextView;\r\n    JustifiedTextView isiDetailTextView;\r\n    Button btnTambahKomentar, btnDokumen;\r\n    LinearLayout linear2, layout_kerangka, linearDokumen;\r\n    RelativeLayout relative1, btnBack;\r\n    FloatingActionButton fab;\r\n    Animation fromright;\r\n\r\n    RecyclerView mRecyclerView;\r\n    private RecyclerAdapterKomentar mAdapter;\r\n    private StorageReference mStorageRef;\r\n    FirebaseStorage mStorage;\r\n    DatabaseReference mDatabaseRef;\r\n    private List<Komentar> mKomentar;\r\n    ValueEventListener mDBListener;\r\n\r\n    FirebaseAuth mAuth;\r\n    FirebaseUser firebaseUser;\r\n\r\n    int satuan;\r\n\r\n    private void initializeWidgets(){\r\n        nomorDetailTextView = findViewById(R.id.nomorTextView);\r\n        namaDetailTextView = findViewById(R.id.namaTextView);\r\n        emailDetailTextView = findViewById(R.id.emailTextView);\r\n        alamatDetailTextView = findViewById(R.id.alamatTextView);\r\n        tanggalDetailTextView = findViewById(R.id.tanggalTextView);\r\n        isiDetailTextView = findViewById(R.id.isiTextView);\r\n        statusDetailTextView = findViewById(R.id.statusTextView);\r\n        btnDokumen = findViewById(R.id.btnDokumen);\r\n        linearDokumen = findViewById(R.id.linearLayout);\r\n        relative1 = findViewById(R.id.relative1);\r\n        btnTambahKomentar = findViewById(R.id.btnTambahKomentar);\r\n        linear2 = findViewById(R.id.linear2);\r\n        layout_kerangka = findViewById(R.id.layout_kerangka);\r\n        tvBalas = findViewById(R.id.tvBalas);\r\n        fab = findViewById(R.id.fab);\r\n        tvJudul = findViewById(R.id.tvJudul);\r\n        btnBack = findViewById(R.id.btnBack);\r\n    }\r\n\r\n    String image, berkas, nomor, nik, email, nama, alamat, tanggal, namalokasi, latitude, longitude, isi, kategori, status,\r\n            jml_lihat, jml_suka, jml_balas, getKey;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.app_bar_detail_nikah);\r\n\r\n        Intent i = this.getIntent();\r\n        image = i.getExtras().getString(\"IMAGE_KEY\");\r\n        berkas = i.getExtras().getString(\"BERKAS_KEY\");\r\n        nomor = i.getExtras().getString(\"NOMOR_KEY\");\r\n        nik = i.getExtras().getString(\"NIK_KEY\");\r\n        email = i.getExtras().getString(\"EMAIL_KEY\");\r\n        nama = i.getExtras().getString(\"NAMA_KEY\");\r\n        alamat = i.getExtras().getString(\"ALAMAT_KEY\");\r\n        tanggal = i.getExtras().getString(\"TANGGAL_KEY\");\r\n        namalokasi = i.getExtras().getString(\"NAMALOKASI_KEY\");\r\n        latitude = i.getExtras().getString(\"LATITUDE_KEY\");\r\n        longitude = i.getExtras().getString(\"LONGITUDE_KEY\");\r\n        isi = i.getExtras().getString(\"ISI_KEY\");\r\n        kategori = i.getExtras().getString(\"KATEGORI_KEY\");\r\n        status = i.getExtras().getString(\"STATUS_KEY\");\r\n        jml_lihat = i.getExtras().getString(\"JML_LIHAT_KEY\");\r\n        jml_suka = i.getExtras().getString(\"JML_SUKA_KEY\");\r\n        jml_balas = i.getExtras().getString(\"JML_BALAS_KEY\");\r\n        getKey = i.getExtras().getString(\"GETPRIMARY_KEY\");\r\n\r\n        initializeWidgets();\r\n        displayKomentar();\r\n\r\n        Toolbar toolbar = findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        firebaseUser = mAuth.getCurrentUser();\r\n\r\n        fromright = AnimationUtils.loadAnimation(this, R.anim.fromright);\r\n        tvJudul.startAnimation(fromright);\r\n        linear2.setVisibility(View.GONE);\r\n\r\n        if (berkas.equals(\"\")){\r\n            linearDokumen.setVisibility(View.GONE);\r\n        }\r\n\r\n        nomorDetailTextView.setText(nomor);\r\n        emailDetailTextView.setText(email);\r\n        namaDetailTextView.setText(nama);\r\n        alamatDetailTextView.setText(alamat);\r\n        tanggalDetailTextView.setText(tanggal);\r\n        isiDetailTextView.setText(\"''\"+isi+\"''\");\r\n        statusDetailTextView.setText(status);\r\n\r\n        satuan = 1;\r\n        int jml_lihatlama = Integer.parseInt(jml_lihat);\r\n        final int total = satuan + jml_lihatlama;\r\n        FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_lihat\").setValue(String.valueOf(total));\r\n\r\n        relative1.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if (status.equals(\"Menunggu Diproses\")){\r\n                    AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailNikahActivity.this);\r\n                    View mView = getLayoutInflater().inflate(R.layout.show_menunggu, null);\r\n                    TextView btnClose = mView.findViewById(R.id.btnClose);\r\n                    TextView tvNomor = mView.findViewById(R.id.tvNomor);\r\n                    RelativeLayout relative1 = mView.findViewById(R.id.relative1);\r\n\r\n                    mBuilder.setView(mView);\r\n                    final AlertDialog mDialog = mBuilder.create();\r\n                    mDialog.show();\r\n\r\n                    tvNomor.setText(\"No : \"+nomor);\r\n                    btnClose.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n                        }\r\n                    });\r\n\r\n                    relative1.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n\r\n                            CharSequence[] item = {\"Dalam Proses\", \"Selesai\"};\r\n                            AlertDialog.Builder request = new AlertDialog.Builder(DetailNikahActivity.this)\r\n                                    .setTitle(\"Pilih Status Komplain\")\r\n                                    .setItems(item, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialog, int i) {\r\n                                            switch (i){\r\n                                                case 0:\r\n                                                    prosesStatus = \"Dalam Proses\";\r\n                                                    Intent intent = new Intent(DetailNikahActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle = new Bundle();\r\n                                                    bundle.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle.putString(\"status\", status);\r\n                                                    bundle.putString(\"getKey\", getKey);\r\n                                                    intent.putExtras(bundle);\r\n                                                    startActivity(intent);\r\n                                                    break;\r\n                                                case 1:\r\n                                                    prosesStatus = \"Selesai\";\r\n                                                    Intent intent2 = new Intent(DetailNikahActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle2 = new Bundle();\r\n                                                    bundle2.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle2.putString(\"status\", status);\r\n                                                    bundle2.putString(\"getKey\", getKey);\r\n                                                    intent2.putExtras(bundle2);\r\n                                                    startActivity(intent2);\r\n                                                    break;\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            request.create();\r\n                            request.show();\r\n                        }\r\n                    });\r\n\r\n                } else {\r\n                    AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailNikahActivity.this);\r\n                    View mView = getLayoutInflater().inflate(R.layout.show_proses, null);\r\n\r\n                    TextView btnClose = mView.findViewById(R.id.btnClose);\r\n                    TextView tvNomor = mView.findViewById(R.id.tvNomor);\r\n                    TextView tvStatus = mView.findViewById(R.id.tvStatus);\r\n                    RelativeLayout relative2 = mView.findViewById(R.id.relative1);\r\n                    RecyclerView mRecyclerView = mView.findViewById(R.id.mRecyclerView);\r\n                    final RecyclerAdapterProses mAdapter;\r\n                    DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"status_komplain\");\r\n                    final List<Proses> mProsess;\r\n\r\n                    mBuilder.setView(mView);\r\n                    final AlertDialog mDialog = mBuilder.create();\r\n                    mDialog.show();\r\n\r\n                    mRecyclerView.setHasFixedSize(true);\r\n                    mRecyclerView.setLayoutManager(new LinearLayoutManager(DetailNikahActivity.this));\r\n\r\n                    mProsess = new ArrayList<>();\r\n                    mAdapter = new RecyclerAdapterProses(DetailNikahActivity.this, mProsess);\r\n                    mRecyclerView.setAdapter(mAdapter);\r\n\r\n                    mDBListener = databaseReference.addValueEventListener(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                            mProsess.clear();\r\n                            for (DataSnapshot kandidatSnapshot : dataSnapshot.getChildren()) {\r\n                                Proses upload = kandidatSnapshot.getValue(Proses.class);\r\n                                upload.setKey(kandidatSnapshot.getKey());\r\n                                mProsess.add(upload);\r\n                            }\r\n                            mAdapter.notifyDataSetChanged();\r\n                        }\r\n\r\n                        @Override\r\n                        public void onCancelled(DatabaseError databaseError) {\r\n                            Toast.makeText(DetailNikahActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n\r\n                    tvStatus.setText(status);\r\n                    tvNomor.setText(\"No : \"+nomor);\r\n                    btnClose.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n                        }\r\n                    });\r\n\r\n                    relative2.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            mDialog.dismiss();\r\n\r\n                            CharSequence[] item = {\"Dalam Proses\", \"Selesai\"};\r\n                            AlertDialog.Builder request = new AlertDialog.Builder(DetailNikahActivity.this)\r\n                                    .setTitle(\"Pilih Status Komplain\")\r\n                                    .setItems(item, new DialogInterface.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(DialogInterface dialog, int i) {\r\n                                            switch (i){\r\n                                                case 0:\r\n                                                    prosesStatus = \"Dalam Proses\";\r\n                                                    Intent intent = new Intent(DetailNikahActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle = new Bundle();\r\n                                                    bundle.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle.putString(\"status\", status);\r\n                                                    bundle.putString(\"getKey\", getKey);\r\n                                                    intent.putExtras(bundle);\r\n                                                    startActivity(intent);\r\n                                                    break;\r\n                                                case 1:\r\n                                                    prosesStatus = \"Selesai\";\r\n                                                    Intent intent2 = new Intent(DetailNikahActivity.this, UbahStatusActivity.class);\r\n                                                    Bundle bundle2 = new Bundle();\r\n                                                    bundle2.putString(\"prosesStatus\", prosesStatus);\r\n                                                    bundle2.putString(\"status\", status);\r\n                                                    bundle2.putString(\"getKey\", getKey);\r\n                                                    intent2.putExtras(bundle2);\r\n                                                    startActivity(intent2);\r\n                                                    break;\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            request.create();\r\n                            request.show();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        btnTambahKomentar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                final ScrollView scrollView = findViewById(R.id.scrollView);\r\n                btnTambahKomentar.setVisibility(View.GONE);\r\n                scrollView.postDelayed(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                        scrollView.isSmoothScrollingEnabled(); }\r\n                }, 200);\r\n                linear2.setVisibility(View.VISIBLE);\r\n            }\r\n        });\r\n\r\n        fab.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                final EditText input = findViewById(R.id.input);\r\n                final ScrollView scrollView = findViewById(R.id.scrollView);\r\n\r\n                AlertDialog.Builder mBuilder = new AlertDialog.Builder(DetailNikahActivity.this);\r\n                View mView = getLayoutInflater().inflate(R.layout.show_loading, null);\r\n\r\n                mBuilder.setView(mView);\r\n                mBuilder.setCancelable(false);\r\n                final AlertDialog mDialog = mBuilder.create();\r\n                mDialog.show();\r\n\r\n                if (isEmpty(input.getText().toString())) {\r\n                    Toast.makeText(DetailNikahActivity.this, \"Balasan tidak boleh kosong!\",\r\n                            Toast.LENGTH_SHORT).show();\r\n                    mDialog.dismiss();\r\n\r\n                } else {\r\n                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey)\r\n                            .child(\"balasan\").push().setValue(new Komentar(input.getText().toString(),\r\n                            namaDetailTextView.getText().toString(), firebaseUser.getEmail())).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) { FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"balasan\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                if (dataSnapshot.exists()) {\r\n                                    long totalBalas;\r\n                                    totalBalas = (dataSnapshot.getChildrenCount());\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_balas\").setValue(String.valueOf(totalBalas))\r\n                                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                @Override\r\n                                                public void onSuccess(Void aVoid) {\r\n                                                    Penerima = emailDetailTextView.getText().toString();\r\n                                                    Penerima = Penerima.replaceAll(\"[@.-]\", \"\");\r\n\r\n                                                    TOPIC = \"/topics/\"+Penerima;\r\n                                                    NOTIFICATION_TITLE = \"Balasan Komplain Dari Admin\";\r\n                                                    NOTIFICATION_MESSAGE = input.getText().toString();\r\n\r\n                                                    JSONObject notification = new JSONObject();\r\n                                                    JSONObject notifcationBody = new JSONObject();\r\n                                                    try {\r\n                                                        notifcationBody.put(\"title\", NOTIFICATION_TITLE);\r\n                                                        notifcationBody.put(\"message\", NOTIFICATION_MESSAGE);\r\n\r\n                                                        notification.put(\"to\", TOPIC);\r\n                                                        notification.put(\"data\", notifcationBody);\r\n                                                    } catch (JSONException e) {\r\n                                                        Log.e(TAG, \"onCreate: \" + e.getMessage() );\r\n                                                    }\r\n                                                    sendNotification(notification);\r\n\r\n                                                    linear2.setVisibility(View.GONE);\r\n                                                    input.setText(\"\");\r\n                                                    btnTambahKomentar.setVisibility(View.VISIBLE);\r\n                                                    mDialog.dismiss();\r\n\r\n                                                    scrollView.postDelayed(new Runnable() {\r\n                                                        @Override\r\n                                                        public void run() {\r\n                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                                                            scrollView.isSmoothScrollingEnabled();\r\n                                                        }\r\n                                                    }, 200);\r\n                                                }\r\n                                            });\r\n                                } else {\r\n                                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"jml_balas\").setValue(\"0\")\r\n                                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                @Override\r\n                                                public void onSuccess(Void aVoid) {\r\n                                                    Penerima = emailDetailTextView.getText().toString();\r\n                                                    Penerima = Penerima.replaceAll(\"[@.-]\", \"\");\r\n\r\n                                                    TOPIC = \"/topics/\"+Penerima;\r\n                                                    NOTIFICATION_TITLE = \"Balasan Komplain Dari Admin\";\r\n                                                    NOTIFICATION_MESSAGE = input.getText().toString();\r\n\r\n                                                    JSONObject notification = new JSONObject();\r\n                                                    JSONObject notifcationBody = new JSONObject();\r\n                                                    try {\r\n                                                        notifcationBody.put(\"title\", NOTIFICATION_TITLE);\r\n                                                        notifcationBody.put(\"message\", NOTIFICATION_MESSAGE);\r\n\r\n                                                        notification.put(\"to\", TOPIC);\r\n                                                        notification.put(\"data\", notifcationBody);\r\n                                                    } catch (JSONException e) {\r\n                                                        Log.e(TAG, \"onCreate: \" + e.getMessage() );\r\n                                                    }\r\n                                                    sendNotification(notification);\r\n\r\n                                                    linear2.setVisibility(View.GONE);\r\n                                                    input.setText(\"\");\r\n                                                    btnTambahKomentar.setVisibility(View.VISIBLE);\r\n                                                    mDialog.dismiss();\r\n\r\n                                                    scrollView.postDelayed(new Runnable() {\r\n                                                        @Override\r\n                                                        public void run() {\r\n                                                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);\r\n                                                            scrollView.isSmoothScrollingEnabled();\r\n                                                        }\r\n                                                    }, 200);\r\n                                                }\r\n                                            });\r\n                                }\r\n                            }\r\n                            @Override\r\n                            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                            }\r\n                        });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        btnBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                finish();\r\n            }\r\n        });\r\n\r\n        btnDokumen.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                downloadFile(DetailNikahActivity.this, \"dokumen-nikah-\"+nama, \".docx\", DIRECTORY_DOWNLOADS, berkas);\r\n            }\r\n        });\r\n    }\r\n\r\n    public void downloadFile(Context context, String fileName, String fileExtension, String downloadDirectory, String url){\r\n        DownloadManager downloadManager = (DownloadManager) context.getSystemService(Context.DOWNLOAD_SERVICE);\r\n        Uri uri = Uri.parse(url);\r\n        DownloadManager.Request request = new DownloadManager.Request(uri);\r\n\r\n        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\r\n        request.setVisibleInDownloadsUi(true);\r\n        request.setDestinationInExternalFilesDir(context, downloadDirectory, fileName + fileExtension);\r\n        downloadManager.enqueue(request);\r\n    }\r\n\r\n    private void sendNotification(JSONObject notification) {\r\n        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(FCM_API, notification,\r\n                new Response.Listener<JSONObject>() {\r\n                    @Override\r\n                    public void onResponse(JSONObject response) {\r\n                        Log.i(TAG, \"onResponse: \" + response.toString());\r\n                    }\r\n                },\r\n                new Response.ErrorListener() {\r\n                    @Override\r\n                    public void onErrorResponse(VolleyError error) {\r\n                        Toast.makeText(DetailNikahActivity.this, \"Request error!\", Toast.LENGTH_LONG).show();\r\n                        Log.i(TAG, \"onErrorResponse: Didn't work\");\r\n                    }\r\n                }){\r\n            @Override\r\n            public Map<String, String> getHeaders() throws AuthFailureError {\r\n                Map<String, String> params = new HashMap<>();\r\n                params.put(\"Authorization\", serverKey);\r\n                params.put(\"Content-Type\", contentType);\r\n                return params;\r\n            }\r\n        };\r\n        MySingleton.getInstance(getApplicationContext()).addToRequestQueue(jsonObjectRequest);\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        finish();\r\n    }\r\n\r\n    private void displayKomentar() {\r\n        mRecyclerView = findViewById(R.id.list_of_komentar);\r\n        RecyclerView.LayoutManager layoutManager = new FlexboxLayoutManager(this);\r\n        mRecyclerView.setLayoutManager(layoutManager);\r\n\r\n        mKomentar = new ArrayList<>();\r\n        mAdapter = new RecyclerAdapterKomentar (DetailNikahActivity.this, mKomentar);\r\n        mRecyclerView.setAdapter(mAdapter);\r\n\r\n        mStorage = FirebaseStorage.getInstance();\r\n        mStorageRef = FirebaseStorage.getInstance().getReference(\"foto_komentar\");\r\n        mDatabaseRef = FirebaseDatabase.getInstance().getReference(\"data_komplain\").child(getKey).child(\"balasan\");\r\n        mDBListener = mDatabaseRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                if (dataSnapshot.exists()) {\r\n                    mKomentar.clear();\r\n\r\n                    for (DataSnapshot komentarSnapshot : dataSnapshot.getChildren()) {\r\n                        Komentar upload = komentarSnapshot.getValue(Komentar.class);\r\n                        upload.setKey(komentarSnapshot.getKey());\r\n                        mKomentar.add(upload);\r\n                    }\r\n                    mAdapter.notifyDataSetChanged();\r\n                    tvBalas.setText(\"Balasan Komplain\");\r\n                    layout_kerangka.setVisibility(View.VISIBLE);\r\n\r\n                } else{\r\n                    tvBalas.setText(\"Belum Ada Balasan\");\r\n                    layout_kerangka.setVisibility(View.VISIBLE);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError databaseError) {\r\n                Toast.makeText(DetailNikahActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailNikahActivity.java b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailNikahActivity.java
--- a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailNikahActivity.java	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/DetailNikahActivity.java	(date 1661695523457)
@@ -41,11 +41,14 @@
 import com.google.firebase.database.ValueEventListener;
 import com.google.firebase.storage.FirebaseStorage;
 import com.google.firebase.storage.StorageReference;
+import com.jatmika.admin_e_complaintrangkasbitung.API.API;
+import com.jatmika.admin_e_complaintrangkasbitung.API.APIUtility;
 import com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomentar;
 import com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterProses;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.Komentar;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.MySingleton;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.Proses;
+import com.jatmika.admin_e_complaintrangkasbitung.SharePref.SharePref;
 import com.uncopt.android.widget.text.justify.JustifiedTextView;
 
 import org.json.JSONException;
@@ -58,7 +61,8 @@
 
 import static android.os.Environment.DIRECTORY_DOWNLOADS;
 import static android.text.TextUtils.isEmpty;
-
+import retrofit2.Call;
+import retrofit2.Callback;
 public class DetailNikahActivity extends AppCompatActivity {
 
     final private String serverKey = "key=" + "AIzaSyDL3TGOXPGwfM7iIf_pX4zqD3IbTr-I45w";
@@ -91,7 +95,8 @@
 
     FirebaseAuth mAuth;
     FirebaseUser firebaseUser;
-
+    private API apiService;
+    private SharePref sharePref;
     int satuan;
 
     private void initializeWidgets(){
@@ -141,6 +146,8 @@
         jml_suka = i.getExtras().getString("JML_SUKA_KEY");
         jml_balas = i.getExtras().getString("JML_BALAS_KEY");
         getKey = i.getExtras().getString("GETPRIMARY_KEY");
+        apiService = APIUtility.getAPI();
+        sharePref = new SharePref(this);
 
         initializeWidgets();
         displayKomentar();
@@ -168,9 +175,9 @@
         statusDetailTextView.setText(status);
 
         satuan = 1;
-        int jml_lihatlama = Integer.parseInt(jml_lihat);
+        int jml_lihatlama = 0;
         final int total = satuan + jml_lihatlama;
-        FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_lihat").setValue(String.valueOf(total));
+        //FirebaseDatabase.getInstance().getReference("data_komplain").child(getKey).child("jml_lihat").setValue(String.valueOf(total));
 
         relative1.setOnClickListener(new View.OnClickListener() {
             @Override
Index: app/src/main/res/layout/activity_detail_sppt.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#FFD600\"\r\n    tools:context=\".DetailSPPTActivity\"\r\n    app:layout_behavior=\"@string/appbar_scrolling_view_behavior\"\r\n    tools:showIn=\"@layout/app_bar_detail_sppt\">\r\n\r\n    <TextView\r\n        android:id=\"@+id/emailTextView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:alpha=\"0\"/>\r\n\r\n    <ScrollView\r\n        android:id=\"@+id/scrollView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:paddingTop=\"5dp\"\r\n            android:paddingBottom=\"5dp\"\r\n            android:paddingLeft=\"5dp\"\r\n            android:paddingRight=\"5dp\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:background=\"#FFFFFF\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <TableLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\">\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\"\r\n                        android:background=\"#FFFFFF\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"No. Daftar Komplain\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/nomorTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"411.3/01/Rangkasbitung/2020\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\"\r\n                        android:background=\"#F0E9E9\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Pengirim\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/namaTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"Jatmika Muhammad\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Alamat\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/alamatTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"Kp. Selahaur\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n\r\n                    <TableRow\r\n                        android:padding=\"10dp\"\r\n                        android:background=\"#F0E9E9\">\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Tanggal Kirim\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\":\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#000000\"/>\r\n                        <TextView\r\n                            android:id=\"@+id/tanggalTextView\"\r\n                            android:layout_width=\"210dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"5dp\"\r\n                            android:text=\"25 November 2019\"\r\n                            android:textSize=\"12sp\"\r\n                            android:textColor=\"#5117B6\"/>\r\n                    </TableRow>\r\n                </TableLayout>\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:paddingTop=\"10dp\"\r\n                    android:paddingLeft=\"10dp\"\r\n                    android:paddingRight=\"10dp\"\r\n                    android:text=\"Isi Komplain\"\r\n                    android:textSize=\"12sp\"\r\n                    android:textColor=\"#000000\"\r\n                    android:background=\"#FFFFFF\"/>\r\n\r\n                <View\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"1dp\"\r\n                    android:background=\"#000000\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_marginRight=\"10dp\"\r\n                    android:layout_marginTop=\"5dp\"/>\r\n\r\n                <com.uncopt.android.widget.text.justify.JustifiedTextView\r\n                    android:id=\"@+id/isiTextView\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:paddingTop=\"5dp\"\r\n                    android:paddingBottom=\"10dp\"\r\n                    android:paddingLeft=\"10dp\"\r\n                    android:paddingRight=\"10dp\"\r\n                    android:background=\"#ffffff\"\r\n                    android:text=\"Isi Komplain\"\r\n                    android:textColor=\"#5117B6\"\r\n                    android:textSize=\"14sp\"\r\n                    android:lineSpacingExtra=\"3dp\"/>\r\n\r\n                <LinearLayout\r\n                    android:id=\"@+id/linearLayout\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_marginBottom=\"5dp\"\r\n                    android:orientation=\"vertical\">\r\n                    <TextView\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:paddingLeft=\"10dp\"\r\n                        android:paddingRight=\"10dp\"\r\n                        android:text=\"Komplain Ini Disertai Dokumen\"\r\n                        android:textSize=\"12sp\"\r\n                        android:textColor=\"#000000\"\r\n                        android:background=\"#FFFFFF\"/>\r\n\r\n                    <View\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"1dp\"\r\n                        android:background=\"#000000\"\r\n                        android:layout_marginLeft=\"10dp\"\r\n                        android:layout_marginRight=\"10dp\"\r\n                        android:layout_marginTop=\"5dp\"/>\r\n\r\n                    <Button\r\n                        android:id=\"@+id/btnDokumen\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"40dp\"\r\n                        android:layout_marginTop=\"7dp\"\r\n                        android:layout_marginStart=\"10dp\"\r\n                        android:drawableStart=\"@drawable/ic_download\"\r\n                        android:background=\"@drawable/rounded_button4\"\r\n                        android:text=\"Unduh Berkas\"\r\n                        android:textColor=\"#FFFFFF\"\r\n                        android:textSize=\"12sp\"\r\n                        android:textStyle=\"bold\"\r\n                        android:paddingEnd=\"15dp\"/>\r\n                </LinearLayout>\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:paddingTop=\"10dp\"\r\n                    android:paddingLeft=\"10dp\"\r\n                    android:paddingRight=\"10dp\"\r\n                    android:text=\"Status Komplain\"\r\n                    android:textSize=\"12sp\"\r\n                    android:textColor=\"#000000\"\r\n                    android:background=\"#FFFFFF\"/>\r\n\r\n                <View\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"1dp\"\r\n                    android:background=\"#000000\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_marginRight=\"10dp\"\r\n                    android:layout_marginTop=\"5dp\"/>\r\n\r\n                <RelativeLayout\r\n                    android:id=\"@+id/relative1\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"50dp\"\r\n                    android:layout_marginTop=\"7dp\"\r\n                    android:layout_marginBottom=\"10dp\"\r\n                    android:layout_marginStart=\"10dp\"\r\n                    android:layout_marginEnd=\"10dp\"\r\n                    android:gravity=\"center\"\r\n                    android:background=\"#235f7e\">\r\n                    <TextView\r\n                        android:id=\"@+id/statusTextView\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_centerVertical=\"true\"\r\n                        android:paddingLeft=\"10dp\"\r\n                        android:paddingRight=\"10dp\"\r\n                        android:text=\"Menunggu Diproses\"\r\n                        android:textColor=\"#FFFFFF\"\r\n                        android:textSize=\"14sp\"\r\n                        android:textStyle=\"bold\"\r\n                        android:gravity=\"center\"/>\r\n                </RelativeLayout>\r\n\r\n            </LinearLayout>\r\n\r\n            <TextView\r\n                android:id=\"@+id/tvBalas\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:text=\"Balas\"\r\n                android:textStyle=\"bold\"\r\n                android:textSize=\"18sp\"\r\n                android:textColor=\"#235f7e\"/>\r\n\r\n            <View\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"2dp\"\r\n                android:layout_marginBottom=\"10dp\"\r\n                android:background=\"#235f7e\"/>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/layout_kerangka\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:orientation=\"vertical\"\r\n                android:background=\"@drawable/rounded_komentar\">\r\n\r\n                <androidx.core.widget.NestedScrollView\r\n                    android:id=\"@+id/nestedScroll\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:fillViewport=\"true\"\r\n                    android:scrollbars=\"none\">\r\n\r\n                    <androidx.recyclerview.widget.RecyclerView\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginBottom=\"10dp\"\r\n                        android:nestedScrollingEnabled=\"false\"\r\n                        android:id=\"@+id/list_of_komentar\" />\r\n\r\n                </androidx.core.widget.NestedScrollView>\r\n\r\n                <Button\r\n                    android:id=\"@+id/btnTambahKomentar\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginBottom=\"10dp\"\r\n                    android:text=\"Tambah Balasan\"\r\n                    android:textColor=\"#ffffff\"\r\n                    android:textStyle=\"bold\"\r\n                    android:padding=\"15dp\"\r\n                    android:background=\"@drawable/rounded_buttonkomentar\" />\r\n\r\n                <LinearLayout\r\n                    android:id=\"@+id/linear2\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginBottom=\"10dp\"\r\n                    android:focusable=\"true\"\r\n                    android:focusableInTouchMode=\"true\"\r\n                    android:orientation=\"horizontal\"\r\n                    android:padding=\"5dp\"\r\n                    android:background=\"#ffffff\">\r\n\r\n                    <com.google.android.material.textfield.TextInputLayout\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_weight=\"0.9\">\r\n\r\n                        <EditText\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:hint=\"Tulis Balasan\"\r\n                            android:id=\"@+id/input\" />\r\n                    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n                    <com.google.android.material.floatingactionbutton.FloatingActionButton\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginEnd=\"5dp\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:clickable=\"true\"\r\n                        android:src=\"@drawable/ic_send_black_24dp\"\r\n                        android:id=\"@+id/fab\"\r\n                        android:tint=\"@android:color/white\"\r\n                        app:fabSize=\"mini\"/>\r\n\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n        </LinearLayout>\r\n    </ScrollView>\r\n\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_detail_sppt.xml b/app/src/main/res/layout/activity_detail_sppt.xml
--- a/app/src/main/res/layout/activity_detail_sppt.xml	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/res/layout/activity_detail_sppt.xml	(date 1661793107509)
@@ -60,7 +60,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="411.3/01/Rangkasbitung/2020"
+                            android:text="411.3/01/Rancabango/2022"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
@@ -86,7 +86,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="Jatmika Muhammad"
+                            android:text="Rohmatullah"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
@@ -111,7 +111,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="Kp. Selahaur"
+                            android:text="Kp. Ampel"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
@@ -137,7 +137,7 @@
                             android:layout_width="210dp"
                             android:layout_height="wrap_content"
                             android:layout_marginStart="5dp"
-                            android:text="25 November 2019"
+                            android:text="25 Agustus 2022"
                             android:textSize="12sp"
                             android:textColor="#5117B6"/>
                     </TableRow>
Index: app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentNikah.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.jatmika.admin_e_complaintrangkasbitung;\r\n\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomplain;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.Komplain;\r\nimport com.jatmika.admin_e_complaintrangkasbitung.Model.PersentaseKomplain;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n */\r\npublic class FragmentNikah extends Fragment implements RecyclerAdapterKomplain.OnItemClickListener {\r\n\r\n    private RecyclerAdapterKomplain mAdapter;\r\n    private FirebaseStorage mStorage;\r\n    private DatabaseReference mDatabaseRef;\r\n    private List<Komplain> mPengaduans;\r\n    private TextView tvNoData;\r\n    private Context context;\r\n\r\n    private void openDetailKomplainNikah(String[] data){\r\n        Intent intent = new Intent(getActivity(), DetailNikahActivity.class);\r\n        intent.putExtra(\"IMAGE_KEY\",data[0]);\r\n        intent.putExtra(\"BERKAS_KEY\",data[1]);\r\n        intent.putExtra(\"NOMOR_KEY\",data[2]);\r\n        intent.putExtra(\"NIK_KEY\",data[3]);\r\n        intent.putExtra(\"EMAIL_KEY\",data[4]);\r\n        intent.putExtra(\"NAMA_KEY\",data[5]);\r\n        intent.putExtra(\"ALAMAT_KEY\",data[6]);\r\n        intent.putExtra(\"TANGGAL_KEY\",data[7]);\r\n        intent.putExtra(\"NAMALOKASI_KEY\",data[8]);\r\n        intent.putExtra(\"LATITUDE_KEY\",data[9]);\r\n        intent.putExtra(\"LONGITUDE_KEY\",data[10]);\r\n        intent.putExtra(\"ISI_KEY\",data[11]);\r\n        intent.putExtra(\"KATEGORI_KEY\",data[12]);\r\n        intent.putExtra(\"STATUS_KEY\",data[13]);\r\n        intent.putExtra(\"JML_LIHAT_KEY\",data[14]);\r\n        intent.putExtra(\"JML_SUKA_KEY\",data[15]);\r\n        intent.putExtra(\"JML_BALAS_KEY\",data[16]);\r\n        intent.putExtra(\"GETPRIMARY_KEY\",data[17]);\r\n        startActivity(intent);\r\n    }\r\n\r\n    private String jumlahKomplainIUMK, jumlahKomplainKependudukan, jumlahKomplainKTP,\r\n            jumlahKomplainNikah, jumlahKomplainSPPT, jumlahKomplainTutupJalan;\r\n\r\n    public FragmentNikah() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View view = inflater.inflate(R.layout.fragment_nikah, container, false);\r\n\r\n        context = getActivity().getApplicationContext();\r\n\r\n        tvNoData = view.findViewById(R.id.tvNoData);\r\n        RecyclerView mRecyclerView = view.findViewById(R.id.mRecyclerView);\r\n        mRecyclerView.setHasFixedSize(true);\r\n        mRecyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));\r\n\r\n        mPengaduans = new ArrayList<>();\r\n        mAdapter = new RecyclerAdapterKomplain(getActivity(), mPengaduans);\r\n        mRecyclerView.setAdapter(mAdapter);\r\n        mAdapter.setOnItemClickListener(this);\r\n\r\n        mStorage = FirebaseStorage.getInstance();\r\n        mDatabaseRef = FirebaseDatabase.getInstance().getReference(\"data_komplain\");\r\n\r\n        mDatabaseRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                Query query = mDatabaseRef.orderByChild(\"kategori\").equalTo(\"Komplain Nikah\");\r\n                query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()) {\r\n                            mPengaduans.clear();\r\n                            for (DataSnapshot komplainSnapshot : dataSnapshot.getChildren()) {\r\n                                Komplain upload = komplainSnapshot.getValue(Komplain.class);\r\n                                upload.setKey(komplainSnapshot.getKey());\r\n                                mPengaduans.add(upload);\r\n                            }\r\n                            mAdapter.notifyDataSetChanged();\r\n                            tvNoData.setVisibility(View.GONE);\r\n                        } else {\r\n                            tvNoData.setVisibility(View.VISIBLE);\r\n                            tvNoData.setText(\"Belum Ada Komplain\");\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError databaseError) {\r\n                Toast.makeText(getActivity(), databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        return view;\r\n    }\r\n\r\n    @Override\r\n    public void onDeleteItemClick(int position) {\r\n        showJumlahKomplain();\r\n\r\n        Komplain selectedItem = mPengaduans.get(position);\r\n        final String selectedKey = selectedItem.getKey();\r\n\r\n        String url = selectedItem.getBerkas();\r\n\r\n        AlertDialog.Builder mBuilder = new AlertDialog.Builder(getActivity());\r\n        View mView = getLayoutInflater().inflate(R.layout.show_loading, null);\r\n\r\n        mBuilder.setView(mView);\r\n        mBuilder.setCancelable(false);\r\n        final AlertDialog mDialog = mBuilder.create();\r\n        mDialog.show();\r\n\r\n        if (url.equals(\"\")){\r\n            mDatabaseRef.child(selectedKey).removeValue().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                @Override\r\n                public void onSuccess(Void aVoid) {\r\n                    FirebaseDatabase.getInstance().getReference(\"data_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Nikah\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                            if (dataSnapshot.exists()){\r\n                                long totalData = dataSnapshot.getChildrenCount();\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"jumlah_komplain\").setValue(String.valueOf(totalData));\r\n                                showJumlahKomplain();\r\n\r\n                                double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);\r\n                                double komplainKependudukan = Double.parseDouble(jumlahKomplainKependudukan);\r\n                                double komplainKTP = Double.parseDouble(jumlahKomplainKTP);\r\n                                double komplainNikah = Double.parseDouble(String.valueOf(totalData));\r\n                                double komplainSPPT = Double.parseDouble(jumlahKomplainSPPT);\r\n                                double komplainTutupJalan = Double.parseDouble(jumlahKomplainTutupJalan);\r\n                                double TotalPersen2 = (komplainIUMK / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                double TotalPersen3 = (komplainKependudukan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                double TotalPersen4 = (komplainKTP / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                double TotalPersen5 = (komplainNikah / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                double TotalPersen6 = (komplainSPPT / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                double TotalPersen7 = (komplainTutupJalan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain IUMK\").child(\"persen\").setValue(String.valueOf(TotalPersen2));\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"persen\").setValue(String.valueOf(TotalPersen3));\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain KTP\").child(\"persen\").setValue(String.valueOf(TotalPersen4));\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"persen\").setValue(String.valueOf(TotalPersen5));\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"persen\").setValue(String.valueOf(TotalPersen6));\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"persen\").setValue(String.valueOf(TotalPersen7));\r\n\r\n                                mDialog.dismiss();\r\n                                Toast.makeText(FragmentNikah.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n\r\n                            } else {\r\n                                FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"jumlah_komplain\").setValue(\"0\")\r\n                                        .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                            @Override\r\n                                            public void onSuccess(Void aVoid) {\r\n                                                showJumlahKomplain();\r\n\r\n                                                double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);\r\n                                                double komplainKependudukan = Double.parseDouble(jumlahKomplainKependudukan);\r\n                                                double komplainKTP = Double.parseDouble(jumlahKomplainKTP);\r\n                                                double komplainNikah = 0;\r\n                                                double komplainSPPT = Double.parseDouble(jumlahKomplainSPPT);\r\n                                                double komplainTutupJalan = Double.parseDouble(jumlahKomplainTutupJalan);\r\n\r\n                                                if (komplainIUMK == 0 && komplainKependudukan == 0 && komplainKTP == 0\r\n                                                        && komplainSPPT == 0 && komplainTutupJalan == 0){\r\n                                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"persen\").setValue(\"0.0\");\r\n                                                    mDialog.dismiss();\r\n                                                    Toast.makeText(FragmentNikah.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n\r\n                                                } else {\r\n                                                    double TotalPersen2 = (komplainIUMK / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                    double TotalPersen3 = (komplainKependudukan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                    double TotalPersen4 = (komplainKTP / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                    double TotalPersen5 = (komplainNikah / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                    double TotalPersen6 = (komplainSPPT / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                    double TotalPersen7 = (komplainTutupJalan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n\r\n                                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain IUMK\").child(\"persen\").setValue(String.valueOf(TotalPersen2));\r\n                                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"persen\").setValue(String.valueOf(TotalPersen3));\r\n                                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain KTP\").child(\"persen\").setValue(String.valueOf(TotalPersen4));\r\n                                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"persen\").setValue(String.valueOf(TotalPersen5));\r\n                                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"persen\").setValue(String.valueOf(TotalPersen6));\r\n                                                    FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"persen\").setValue(String.valueOf(TotalPersen7));\r\n\r\n                                                    mDialog.dismiss();\r\n                                                    Toast.makeText(FragmentNikah.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n                                                }\r\n                                            }\r\n                                        });\r\n                            }\r\n                        }\r\n\r\n                        @Override\r\n                        public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n        } else {\r\n            StorageReference imageRef = mStorage.getReferenceFromUrl(selectedItem.getBerkas());\r\n            imageRef.delete().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                @Override\r\n                public void onSuccess(Void aVoid) {\r\n                    mDatabaseRef.child(selectedKey).removeValue().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            FirebaseDatabase.getInstance().getReference(\"data_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Nikah\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                @Override\r\n                                public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                    if (dataSnapshot.exists()){\r\n                                        long totalData = dataSnapshot.getChildrenCount();\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"jumlah_komplain\").setValue(String.valueOf(totalData));\r\n                                        showJumlahKomplain();\r\n\r\n                                        double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);\r\n                                        double komplainKependudukan = Double.parseDouble(jumlahKomplainKependudukan);\r\n                                        double komplainKTP = Double.parseDouble(jumlahKomplainKTP);\r\n                                        double komplainNikah = Double.parseDouble(String.valueOf(totalData));\r\n                                        double komplainSPPT = Double.parseDouble(jumlahKomplainSPPT);\r\n                                        double komplainTutupJalan = Double.parseDouble(jumlahKomplainTutupJalan);\r\n                                        double TotalPersen2 = (komplainIUMK / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                        double TotalPersen3 = (komplainKependudukan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                        double TotalPersen4 = (komplainKTP / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                        double TotalPersen5 = (komplainNikah / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                        double TotalPersen6 = (komplainSPPT / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                        double TotalPersen7 = (komplainTutupJalan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain IUMK\").child(\"persen\").setValue(String.valueOf(TotalPersen2));\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"persen\").setValue(String.valueOf(TotalPersen3));\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain KTP\").child(\"persen\").setValue(String.valueOf(TotalPersen4));\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"persen\").setValue(String.valueOf(TotalPersen5));\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"persen\").setValue(String.valueOf(TotalPersen6));\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"persen\").setValue(String.valueOf(TotalPersen7));\r\n\r\n                                        mDialog.dismiss();\r\n                                        Toast.makeText(FragmentNikah.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n\r\n                                    } else {\r\n                                        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"jumlah_komplain\").setValue(\"0\")\r\n                                                .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                    @Override\r\n                                                    public void onSuccess(Void aVoid) {\r\n                                                        showJumlahKomplain();\r\n\r\n                                                        double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);\r\n                                                        double komplainKependudukan = Double.parseDouble(jumlahKomplainKependudukan);\r\n                                                        double komplainKTP = Double.parseDouble(jumlahKomplainKTP);\r\n                                                        double komplainNikah = 0;\r\n                                                        double komplainSPPT = Double.parseDouble(jumlahKomplainSPPT);\r\n                                                        double komplainTutupJalan = Double.parseDouble(jumlahKomplainTutupJalan);\r\n\r\n                                                        if (komplainIUMK == 0 && komplainKependudukan == 0 && komplainKTP == 0\r\n                                                                && komplainSPPT == 0 && komplainTutupJalan == 0){\r\n                                                            FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"persen\").setValue(\"0.0\");\r\n                                                            mDialog.dismiss();\r\n                                                            Toast.makeText(FragmentNikah.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n\r\n                                                        } else {\r\n                                                            double TotalPersen2 = (komplainIUMK / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                            double TotalPersen3 = (komplainKependudukan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                            double TotalPersen4 = (komplainKTP / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                            double TotalPersen5 = (komplainNikah / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                            double TotalPersen6 = (komplainSPPT / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n                                                            double TotalPersen7 = (komplainTutupJalan / ( komplainIUMK + komplainKependudukan + komplainKTP + komplainNikah + komplainSPPT + komplainTutupJalan)) * 100;\r\n\r\n                                                            FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain IUMK\").child(\"persen\").setValue(String.valueOf(TotalPersen2));\r\n                                                            FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Kependudukan\").child(\"persen\").setValue(String.valueOf(TotalPersen3));\r\n                                                            FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain KTP\").child(\"persen\").setValue(String.valueOf(TotalPersen4));\r\n                                                            FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Nikah\").child(\"persen\").setValue(String.valueOf(TotalPersen5));\r\n                                                            FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain SPPT\").child(\"persen\").setValue(String.valueOf(TotalPersen6));\r\n                                                            FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").child(\"Komplain Tutup Jalan\").child(\"persen\").setValue(String.valueOf(TotalPersen7));\r\n\r\n                                                            mDialog.dismiss();\r\n                                                            Toast.makeText(FragmentNikah.this.context, \"Komplain telah dihapus!\", Toast.LENGTH_SHORT).show();\r\n                                                        }\r\n                                                    }\r\n                                                });\r\n                                    }\r\n                                }\r\n\r\n                                @Override\r\n                                public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onItemClick(int position) {\r\n        Komplain clickedKomplain = mPengaduans.get(position);\r\n        String[] komplainData = {clickedKomplain.getFoto(), clickedKomplain.getBerkas(), clickedKomplain.getNomor(),\r\n                clickedKomplain.getNik(), clickedKomplain.getEmail(), clickedKomplain.getNama(), clickedKomplain.getAlamat(),\r\n                clickedKomplain.getTanggal(), clickedKomplain.getNamalokasi(), String.valueOf(clickedKomplain.getLatitude()),\r\n                String.valueOf(clickedKomplain.getLongitude()), clickedKomplain.getIsi(), clickedKomplain.getKategori(),\r\n                clickedKomplain.getStatus(), clickedKomplain.getJml_lihat(), clickedKomplain.getJml_suka(),\r\n                clickedKomplain.getJml_balas(), clickedKomplain.getKey()};\r\n\r\n        openDetailKomplainNikah(komplainData);\r\n    }\r\n\r\n    private void showJumlahKomplain(){\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain IUMK\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainIUMK = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainIUMK = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Kependudukan\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainKependudukan = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainKependudukan = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain KTP\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainKTP = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainKTP = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Nikah\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainNikah = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainNikah = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain SPPT\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainSPPT = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainSPPT = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n        FirebaseDatabase.getInstance().getReference(\"data_persentase_komplain\").orderByChild(\"kategori\").equalTo(\"Komplain Tutup Jalan\")\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists()){\r\n                            for (DataSnapshot dataPersentase : dataSnapshot.getChildren()) {\r\n                                PersentaseKomplain data = dataPersentase.getValue(PersentaseKomplain.class);\r\n                                jumlahKomplainTutupJalan = (String) dataPersentase.child(\"jumlah_komplain\").getValue();\r\n                            }\r\n                        } else {\r\n                            jumlahKomplainTutupJalan = \"0\";\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentNikah.java b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentNikah.java
--- a/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentNikah.java	(revision c8263b182f8f94f0615cc548a09fc13fb1299d2a)
+++ b/app/src/main/java/com/jatmika/admin_e_complaintrangkasbitung/FragmentNikah.java	(date 1661697239277)
@@ -27,15 +27,20 @@
 import com.google.firebase.database.ValueEventListener;
 import com.google.firebase.storage.FirebaseStorage;
 import com.google.firebase.storage.StorageReference;
+import com.jatmika.admin_e_complaintrangkasbitung.API.API;
+import com.jatmika.admin_e_complaintrangkasbitung.API.APIUtility;
 import com.jatmika.admin_e_complaintrangkasbitung.Adapter.RecyclerAdapterKomplain;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.Komplain;
 import com.jatmika.admin_e_complaintrangkasbitung.Model.PersentaseKomplain;
-
+import com.jatmika.admin_e_complaintrangkasbitung.SharePref.SharePref;
 import org.json.JSONException;
 import org.json.JSONObject;
 
 import java.util.ArrayList;
 import java.util.List;
+import retrofit2.Call;
+import retrofit2.Callback;
+import retrofit2.Response;
 
 
 /**
@@ -49,6 +54,8 @@
     private List<Komplain> mPengaduans;
     private TextView tvNoData;
     private Context context;
+    private SharePref sharePref;
+    private API apiService;
 
     private void openDetailKomplainNikah(String[] data){
         Intent intent = new Intent(getActivity(), DetailNikahActivity.class);
@@ -88,6 +95,8 @@
         View view = inflater.inflate(R.layout.fragment_nikah, container, false);
 
         context = getActivity().getApplicationContext();
+        apiService = APIUtility.getAPI();
+        sharePref = new SharePref(context);
 
         tvNoData = view.findViewById(R.id.tvNoData);
         RecyclerView mRecyclerView = view.findViewById(R.id.mRecyclerView);
@@ -101,40 +110,21 @@
 
         mStorage = FirebaseStorage.getInstance();
         mDatabaseRef = FirebaseDatabase.getInstance().getReference("data_komplain");
-
-        mDatabaseRef.addValueEventListener(new ValueEventListener() {
+        Log.i("token", sharePref.getTokenApi());
+        apiService.getComplain("Bearer "+sharePref.getTokenApi(), "surat nikah").enqueue(new Callback<List<Komplain>>() {
             @Override
-            public void onDataChange(DataSnapshot dataSnapshot) {
-
-                Query query = mDatabaseRef.orderByChild("kategori").equalTo("Komplain Nikah");
-                query.addListenerForSingleValueEvent(new ValueEventListener() {
-                    @Override
-                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
-                        if (dataSnapshot.exists()) {
-                            mPengaduans.clear();
-                            for (DataSnapshot komplainSnapshot : dataSnapshot.getChildren()) {
-                                Komplain upload = komplainSnapshot.getValue(Komplain.class);
-                                upload.setKey(komplainSnapshot.getKey());
-                                mPengaduans.add(upload);
-                            }
-                            mAdapter.notifyDataSetChanged();
-                            tvNoData.setVisibility(View.GONE);
-                        } else {
-                            tvNoData.setVisibility(View.VISIBLE);
-                            tvNoData.setText("Belum Ada Komplain");
-                        }
-                    }
+            public void onResponse(Call<List<Komplain>> call, Response<List<Komplain>> response) {
+                Log.i("response", response.body().toString());
+                for (Komplain komplain : response.body()){
+                    mPengaduans.add(komplain);
+                }
+                mAdapter.notifyDataSetChanged();
+                tvNoData.setVisibility(View.GONE);
+            }
 
-                    @Override
-                    public void onCancelled(@NonNull DatabaseError databaseError) {
-
-                    }
-                });
-            }
-
             @Override
-            public void onCancelled(DatabaseError databaseError) {
-                Toast.makeText(getActivity(), databaseError.getMessage(), Toast.LENGTH_SHORT).show();
+            public void onFailure(Call<List<Komplain>> call, Throwable t) {
+                Log.i("responseError", t.toString());
             }
         });
 
@@ -143,7 +133,7 @@
 
     @Override
     public void onDeleteItemClick(int position) {
-        showJumlahKomplain();
+//        showJumlahKomplain();
 
         Komplain selectedItem = mPengaduans.get(position);
         final String selectedKey = selectedItem.getKey();
@@ -168,7 +158,7 @@
                             if (dataSnapshot.exists()){
                                 long totalData = dataSnapshot.getChildrenCount();
                                 FirebaseDatabase.getInstance().getReference("data_persentase_komplain").child("Komplain Nikah").child("jumlah_komplain").setValue(String.valueOf(totalData));
-                                showJumlahKomplain();
+//                                showJumlahKomplain();
 
                                 double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);
                                 double komplainKependudukan = Double.parseDouble(jumlahKomplainKependudukan);
@@ -198,7 +188,7 @@
                                         .addOnSuccessListener(new OnSuccessListener<Void>() {
                                             @Override
                                             public void onSuccess(Void aVoid) {
-                                                showJumlahKomplain();
+//                                                showJumlahKomplain();
 
                                                 double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);
                                                 double komplainKependudukan = Double.parseDouble(jumlahKomplainKependudukan);
@@ -258,7 +248,7 @@
                                     if (dataSnapshot.exists()){
                                         long totalData = dataSnapshot.getChildrenCount();
                                         FirebaseDatabase.getInstance().getReference("data_persentase_komplain").child("Komplain Nikah").child("jumlah_komplain").setValue(String.valueOf(totalData));
-                                        showJumlahKomplain();
+//                                        showJumlahKomplain();
 
                                         double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);
                                         double komplainKependudukan = Double.parseDouble(jumlahKomplainKependudukan);
@@ -288,7 +278,7 @@
                                                 .addOnSuccessListener(new OnSuccessListener<Void>() {
                                                     @Override
                                                     public void onSuccess(Void aVoid) {
-                                                        showJumlahKomplain();
+//                                                        showJumlahKomplain();
 
                                                         double komplainIUMK = Double.parseDouble(jumlahKomplainIUMK);
                                                         double komplainKependudukan = Double.parseDouble(jumlahKomplainKependudukan);
